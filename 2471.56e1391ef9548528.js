"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2471],{2471:(I,f,l)=>{l.r(f),l.d(f,{AdmRutasModule:()=>y});var A=l(6895),h=l(1407),Z=l(655),n=l(433),_=l(1588),b=l(634),U=l(162),q=l(8411),v=l(9299),o=l(8256),t=l(4556);function T(a,m){1&a&&o._UZ(0,"ion-datetime",37)}function C(a,m){1&a&&o._UZ(0,"ion-datetime",38)}const N=[{path:"",component:(()=>{class a{constructor(e,i){this.fb=e,this.modalCtrl=i,this.formLinea=new n.cw("")}ngOnInit(){this.formInit()}formInit(){this.formLinea=this.fb.group({id:["",[n.kI.required]],nombre:["",[n.kI.required]],horainicio:["",[]],horafin:["",[]],icono:["",[n.kI.required]],categoria:["",[n.kI.required]],parada1:this.fb.group({nombre:["",[n.kI.required]],lng:["",[n.kI.required]],lat:["",[n.kI.required]]}),parada2:this.fb.group({nombre:["",[n.kI.required]],lng:["",[n.kI.required]],lat:["",[n.kI.required]]}),ruta1:this.fb.group({detalle:["",[n.kI.required]],coordinates:[[],[n.kI.required]]}),ruta2:this.fb.group({detalle:["",[n.kI.required]],coordinates:[[],[n.kI.required]]})}),this.formLinea.patchValue({id:(0,_.Z)()})}crear(){return(0,Z.mG)(this,void 0,void 0,function*(){let e=this.formLinea.getRawValue(),{horainicio:i,horafin:r}=this.formLinea.getRawValue();e.horainicio=this.format_Hora(i),e.horafin=this.format_Hora(r),console.log(JSON.stringify(e)),yield(yield this.modalCtrl.create({component:v.p,componentProps:{linea:e}})).present()})}format_Hora(e){return(0,b.Z)(new Date(e),"h:mm a")}openMapaPuntos(e){var i,r,u,s;return(0,Z.mG)(this,void 0,void 0,function*(){const p=this.formLinea.getRawValue();let d={};d="p1"===e?p.parada1:p.parada2;const c=yield this.modalCtrl.create({component:U.d,componentProps:{parada:{tipo:e,coords:{lat:d.lat,lng:d.lng}}}});yield c.present();const{data:g,role:w}=yield c.onWillDismiss();"confirm"===w&&("p1"==g.tipo?(null===(i=this.formLinea.get("parada1.lng"))||void 0===i||i.patchValue(g.coords.lng),null===(r=this.formLinea.get("parada1.lat"))||void 0===r||r.patchValue(g.coords.lat)):(null===(u=this.formLinea.get("parada2.lng"))||void 0===u||u.patchValue(g.coords.lng),null===(s=this.formLinea.get("parada2.lat"))||void 0===s||s.patchValue(g.coords.lat)))})}openMapaRutas(e){var i,r;return(0,Z.mG)(this,void 0,void 0,function*(){const u=this.formLinea.getRawValue();let s=[];s="r1"===e?u.ruta1.coordinates:u.ruta2.coordinates;const p=yield this.modalCtrl.create({component:q.N,componentProps:{ruta:e,parada1:u.parada1,parada2:u.parada2,coordenadas:s}});yield p.present();const{data:d,role:c}=yield p.onWillDismiss();"confirm"===c&&("r1"==d.ruta?null===(i=this.formLinea.get("ruta1.coordinates"))||void 0===i||i.patchValue(d.rutas):null===(r=this.formLinea.get("ruta2.coordinates"))||void 0===r||r.patchValue(d.rutas))})}export(){let e=this.formLinea.getRawValue(),{horainicio:i,horafin:r}=this.formLinea.getRawValue();e.horainicio=this.format_Hora(i),e.horafin=this.format_Hora(r);const u=JSON.stringify(e),p=new Blob([u],{type:"text/plain"}),d=URL.createObjectURL(p),c=document.createElement("a");c.href=d,c.download="datos.txt",c.click(),URL.revokeObjectURL(d),console.log("Archivo descargado autom\xe1ticamente en el escritorio.")}}return a.\u0275fac=function(e){return new(e||a)(o.Y36(n.qu),o.Y36(t.IN))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-admrutas-page"]],decls:157,vars:5,consts:[["color","light"],[1,"ion-no-border"],["fixed",""],[3,"formGroup"],["size-xs","12","size-sm","12","size-md","4","size-lg","4"],["position","stacked"],["formControlName","id","readonly",""],["formControlName","nombre","placeholder","ingrese solo el nombre de la linea"],["placeholder","elegir categoria","slot","end","formControlName","categoria"],["value","micro"],["value","taxi-trufi"],["slot","end","datetime","inicio"],[3,"keepContentsMounted"],["slot","end","datetime","fin"],["placeholder","elegiricono","slot","end","formControlName","icono"],["value","arrow"],["value","arrow-2"],["value","arrow-3"],["value","arrow-4"],["size","12"],["formGroupName","parada1"],[3,"click"],["size-xs","12","size-sm","12","size-md","12","size-lg","12"],["formControlName","nombre","placeholder","Nombre de parada 1"],["size-xs","12","size-sm","12","size-md","6","size-lg","6"],["type","text","readonly","","formControlName","lat","placeholder","(Autocompletado)"],["type","text","readonly","","formControlName","lng","placeholder","(Autocompletado)"],["formGroupName","parada2"],["formControlName","nombre","placeholder","Nombre de parada 2"],["formGroupName","ruta1"],["formControlName","detalle","placeholder","Detalles sobre la ruta"],["readonly","","formControlName","coordinates","placeholder","(Autogenerado)"],["formGroupName","ruta2"],[3,"disabled","click"],["name","eye-outline","slot","icon-only"],["color","success",3,"disabled","click"],["name","checkmark-circle-outline","slot","icon-only"],["id","inicio","formControlName","horainicio","presentation","time","hour-cycle","h11","minute-values","[0,15,30,45]"],["id","fin","formControlName","horafin","presentation","time","hour-cycle","h11","minute-values","[0,15,30,45]"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar",0)(3,"ion-title"),o._uU(4,"Crear nueva linea"),o.qZA()()(),o.TgZ(5,"ion-grid",2)(6,"form",3)(7,"ion-row")(8,"ion-col",4)(9,"ion-item")(10,"ion-label",5),o._uU(11,"Id (Autogenerado)"),o.qZA(),o._UZ(12,"ion-input",6),o.qZA()(),o.TgZ(13,"ion-col",4)(14,"ion-item")(15,"ion-label",5),o._uU(16,"Nombre Linea"),o.qZA(),o._UZ(17,"ion-input",7),o.qZA()(),o.TgZ(18,"ion-col",4)(19,"ion-item")(20,"ion-label"),o._uU(21,"Categoria"),o.qZA(),o.TgZ(22,"ion-select",8)(23,"ion-select-option",9),o._uU(24,"Micro"),o.qZA(),o.TgZ(25,"ion-select-option",10),o._uU(26,"Taxi-trufi"),o.qZA()()()()(),o.TgZ(27,"ion-row")(28,"ion-col",4)(29,"ion-item")(30,"ion-label"),o._uU(31,"Hora Inicio"),o.qZA(),o._UZ(32,"ion-datetime-button",11),o.qZA(),o.TgZ(33,"ion-modal",12),o.YNc(34,T,1,0,"ng-template"),o.qZA()(),o.TgZ(35,"ion-col",4)(36,"ion-item")(37,"ion-label"),o._uU(38,"Hora Fin"),o.qZA(),o._UZ(39,"ion-datetime-button",13),o.qZA(),o.TgZ(40,"ion-modal",12),o.YNc(41,C,1,0,"ng-template"),o.qZA()(),o.TgZ(42,"ion-col",4)(43,"ion-item")(44,"ion-label"),o._uU(45,"Icono"),o.qZA(),o.TgZ(46,"ion-select",14)(47,"ion-select-option",15),o._uU(48,"Arrow"),o.qZA(),o.TgZ(49,"ion-select-option",16),o._uU(50,"Arrow-2"),o.qZA(),o.TgZ(51,"ion-select-option",17),o._uU(52,"Arrow-3"),o.qZA(),o.TgZ(53,"ion-select-option",18),o._uU(54,"Arrow-4"),o.qZA()()()()(),o.TgZ(55,"ion-row")(56,"ion-col",19)(57,"div",20)(58,"ion-list")(59,"ion-list-header")(60,"ion-label"),o._uU(61,"Informacion de parada 1"),o.qZA(),o.TgZ(62,"ion-button",21),o.NdJ("click",function(){return i.openMapaPuntos("p1")}),o._uU(63,"crear punto"),o.qZA()(),o.TgZ(64,"ion-row")(65,"ion-col",22)(66,"ion-item")(67,"ion-label",5),o._uU(68,"Nombre de parada:"),o.qZA(),o._UZ(69,"ion-input",23),o.qZA()()(),o.TgZ(70,"ion-row")(71,"ion-col",24)(72,"ion-item")(73,"ion-label",5),o._uU(74,"Latitud:"),o.qZA(),o._UZ(75,"ion-input",25),o.qZA()(),o.TgZ(76,"ion-col",24)(77,"ion-item")(78,"ion-label",5),o._uU(79,"Longitud:"),o.qZA(),o._UZ(80,"ion-input",26),o.qZA()()()()()()(),o.TgZ(81,"ion-row")(82,"ion-col",19)(83,"div",27)(84,"ion-list")(85,"ion-list-header")(86,"ion-label"),o._uU(87,"Informacion de parada 2"),o.qZA(),o.TgZ(88,"ion-button",21),o.NdJ("click",function(){return i.openMapaPuntos("p2")}),o._uU(89,"crear punto"),o.qZA()(),o.TgZ(90,"ion-row")(91,"ion-col",22)(92,"ion-item")(93,"ion-label",5),o._uU(94,"Nombre de parada:"),o.qZA(),o._UZ(95,"ion-input",28),o.qZA()()(),o.TgZ(96,"ion-row")(97,"ion-col",24)(98,"ion-item")(99,"ion-label",5),o._uU(100,"Latitud:"),o.qZA(),o._UZ(101,"ion-input",25),o.qZA()(),o.TgZ(102,"ion-col",24)(103,"ion-item")(104,"ion-label",5),o._uU(105,"Longitud:"),o.qZA(),o._UZ(106,"ion-input",26),o.qZA()()()()()()(),o.TgZ(107,"ion-row")(108,"ion-col",19)(109,"div",29)(110,"ion-list")(111,"ion-list-header")(112,"ion-label"),o._uU(113,"Informacion de Ruta1"),o.qZA(),o.TgZ(114,"ion-button",21),o.NdJ("click",function(){return i.openMapaRutas("r1")}),o._uU(115," crear ruta "),o.qZA()(),o.TgZ(116,"ion-row")(117,"ion-col",24)(118,"ion-item")(119,"ion-label",5),o._uU(120,"Detalle:"),o.qZA(),o._UZ(121,"ion-input",30),o.qZA()(),o.TgZ(122,"ion-col",24)(123,"ion-item")(124,"ion-label",5),o._uU(125,"Ruta:"),o.qZA(),o._UZ(126,"ion-input",31),o.qZA()()()()()()(),o.TgZ(127,"ion-row")(128,"ion-col",19)(129,"div",32)(130,"ion-list")(131,"ion-list-header")(132,"ion-label"),o._uU(133,"Informacion de Ruta2"),o.qZA(),o.TgZ(134,"ion-button",21),o.NdJ("click",function(){return i.openMapaRutas("r2")}),o._uU(135," crear ruta "),o.qZA()(),o.TgZ(136,"ion-row")(137,"ion-col",24)(138,"ion-item")(139,"ion-label",5),o._uU(140,"Detalle"),o.qZA(),o._UZ(141,"ion-input",30),o.qZA()(),o.TgZ(142,"ion-col",24)(143,"ion-item")(144,"ion-label",5),o._uU(145,"Ruta"),o.qZA(),o._UZ(146,"ion-input",31),o.qZA()()()()()()(),o.TgZ(147,"ion-row")(148,"ion-col",19)(149,"ion-button",33),o.NdJ("click",function(){return i.crear()}),o._UZ(150,"ion-icon",34),o._uU(151," \xa0 vista previa "),o.qZA(),o.TgZ(152,"ion-button",35),o.NdJ("click",function(){return i.export()}),o._UZ(153,"ion-icon",36),o._uU(154," \xa0generar json "),o.qZA()()()(),o.TgZ(155,"ion-row"),o._UZ(156,"ion-col",19),o.qZA()()()),2&e&&(o.xp6(6),o.Q6J("formGroup",i.formLinea),o.xp6(27),o.Q6J("keepContentsMounted",!0),o.xp6(7),o.Q6J("keepContentsMounted",!0),o.xp6(109),o.Q6J("disabled",i.formLinea.invalid),o.xp6(3),o.Q6J("disabled",i.formLinea.invalid))},dependencies:[t.YG,t.wI,t.W2,t.x4,t.Mj,t.jY,t.Gu,t.gu,t.pK,t.Ie,t.Q$,t.q_,t.yh,t.Nd,t.t9,t.n0,t.wd,t.sr,t.ki,t.QI,t.j9,n._Y,n.JJ,n.JL,n.sg,n.u,n.x0],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100vh}"]}),a})()}];let k=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[h.Bz.forChild(N),h.Bz]}),a})(),y=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[A.ez,k,t.Pc,n.u5,n.UX]}),a})()}}]);