(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7936],{7936:(At,gt,W)=>{"use strict";W.r(gt),W.d(gt,{DistanciaModule:()=>Ig});var q=W(6895),H=W(1407),rt=W(655),T=W(8256),et=W(9898),j=6371008.8,ut={centimeters:100*j,centimetres:100*j,degrees:j/111325,feet:3.28084*j,inches:39.37*j,kilometers:j/1e3,kilometres:j/1e3,meters:j,metres:j,miles:j/1609.344,millimeters:1e3*j,millimetres:1e3*j,nauticalmiles:j/1852,radians:1,yards:1.0936*j};function Rt(n,r,o){void 0===o&&(o={});var a={type:"Feature"};return(0===o.id||o.id)&&(a.id=o.id),o.bbox&&(a.bbox=o.bbox),a.properties=r||{},a.geometry=n,a}function it(n,r,o){if(void 0===o&&(o={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!at(n[0])||!at(n[1]))throw new Error("coordinates must contain numbers");return Rt({type:"Point",coordinates:n},r,o)}function Dt(n,r,o){void 0===o&&(o={});for(var a=0,u=n;a<u.length;a++){var f=u[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<f[f.length-1].length;c++)if(f[f.length-1][c]!==f[0][c])throw new Error("First and last Position are not equivalent.")}return Rt({type:"Polygon",coordinates:n},r,o)}function k(n,r,o){if(void 0===o&&(o={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return Rt({type:"LineString",coordinates:n},r,o)}function Ot(n){return n%360*Math.PI/180}function at(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function z(n,r,o){if(null!==n)for(var a,u,f,c,p,g,h,m,y=0,v=0,x=n.type,Z="FeatureCollection"===x,F="Feature"===x,st=Z?n.features.length:1,V=0;V<st;V++){p=(m=!!(h=Z?n.features[V].geometry:F?n.geometry:n)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var D=0;D<p;D++){var Y=0,pt=0;if(null!==(c=m?h.geometries[D]:h)){g=c.coordinates;var ct=c.type;switch(y=!o||"Polygon"!==ct&&"MultiPolygon"!==ct?0:1,ct){case null:break;case"Point":if(!1===r(g,v,V,Y,pt))return!1;v++,Y++;break;case"LineString":case"MultiPoint":for(a=0;a<g.length;a++){if(!1===r(g[a],v,V,Y,pt))return!1;v++,"MultiPoint"===ct&&Y++}"LineString"===ct&&Y++;break;case"Polygon":case"MultiLineString":for(a=0;a<g.length;a++){for(u=0;u<g[a].length-y;u++){if(!1===r(g[a][u],v,V,Y,pt))return!1;v++}"MultiLineString"===ct&&Y++,"Polygon"===ct&&pt++}"Polygon"===ct&&Y++;break;case"MultiPolygon":for(a=0;a<g.length;a++){for(pt=0,u=0;u<g[a].length;u++){for(f=0;f<g[a][u].length-y;f++){if(!1===r(g[a][u][f],v,V,Y,pt))return!1;v++}pt++}Y++}break;case"GeometryCollection":for(a=0;a<c.geometries.length;a++)if(!1===z(c.geometries[a],r,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Vt(n,r){!function Jt(n,r){var o,a,u,f,c,p,g,h,y,v,m=0,x="FeatureCollection"===n.type,Z="Feature"===n.type,F=x?n.features.length:1;for(o=0;o<F;o++){for(h=x?n.features[o].properties:Z?n.properties:{},y=x?n.features[o].bbox:Z?n.bbox:void 0,v=x?n.features[o].id:Z?n.id:void 0,c=(g=!!(p=x?n.features[o].geometry:Z?n.geometry:n)&&"GeometryCollection"===p.type)?p.geometries.length:1,u=0;u<c;u++)if(null!==(f=g?p.geometries[u]:p))switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===r(f,m,h,y,v))return!1;break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(!1===r(f.geometries[a],m,h,y,v))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===r(null,m,h,y,v))return!1;m++}}(n,function(o,a,u,f,c){var g,p=null===o?null:o.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return!1!==r(Rt(o,u,{bbox:f,id:c}),a,0)&&void 0}switch(p){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var h=0;h<o.coordinates.length;h++)if(!1===r(Rt({type:g,coordinates:o.coordinates[h]},u),a,h))return!1})}function R(n){var r=[1/0,1/0,-1/0,-1/0];return z(n,function(o){r[0]>o[0]&&(r[0]=o[0]),r[1]>o[1]&&(r[1]=o[1]),r[2]<o[0]&&(r[2]=o[0]),r[3]<o[1]&&(r[3]=o[1])}),r}R.default=R;const b=R;function P(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function li(n,r,o){if(void 0===o&&(o={}),!n)throw new Error("point is required");if(!r)throw new Error("polygon is required");var a=P(n),u=function bt(n){return"Feature"===n.type?n.geometry:n}(r),f=u.type,c=r.bbox,p=u.coordinates;if(c&&!1===function Va(n,r){return r[0]<=n[0]&&r[1]<=n[1]&&r[2]>=n[0]&&r[3]>=n[1]}(a,c))return!1;"Polygon"===f&&(p=[p]);for(var g=!1,h=0;h<p.length&&!g;h++)if(Ui(a,p[h][0],o.ignoreBoundary)){for(var y=!1,v=1;v<p[h].length&&!y;)Ui(a,p[h][v],!o.ignoreBoundary)&&(y=!0),v++;y||(g=!0)}return g}function Ui(n,r,o){var a=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var u=0,f=r.length-1;u<r.length;f=u++){var c=r[u][0],p=r[u][1],g=r[f][0],h=r[f][1];if(n[1]*(c-g)+p*(g-n[0])+h*(n[0]-c)==0&&(c-n[0])*(g-n[0])<=0&&(p-n[1])*(h-n[1])<=0)return!o;p>n[1]!=h>n[1]&&n[0]<(g-c)*(n[1]-p)/(h-p)+c&&(a=!a)}return a}W(5943),W(1335);const qo=function Ci(n,r,o){void 0===o&&(o={});var a=P(n),u=P(r),f=Ot(u[1]-a[1]),c=Ot(u[0]-a[0]),p=Ot(a[1]),g=Ot(u[1]),h=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(p)*Math.cos(g);return function w(n,r){void 0===r&&(r="kilometers");var o=ut[r];if(!o)throw new Error(r+" units is invalid");return n*o}(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),o.units)};var Qo=new ArrayBuffer(16);new Float64Array(Qo),new Uint32Array(Qo),W(3544),function(){function n(r){this.points=r.points||[],this.duration=r.duration||1e4,this.sharpness=r.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=r.stepLength||60,this.length=this.points.length,this.delay=0;for(var o=0;o<this.length;o++)this.points[o].z=this.points[o].z||0;for(o=0;o<this.length-1;o++){var a=this.points[o],u=this.points[o+1];this.centers.push({x:(a.x+u.x)/2,y:(a.y+u.y)/2,z:(a.z+u.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),o=0;o<this.centers.length-1;o++){var f=this.points[o+1].x-(this.centers[o].x+this.centers[o+1].x)/2,c=this.points[o+1].y-(this.centers[o].y+this.centers[o+1].y)/2,p=this.points[o+1].z-(this.centers[o].y+this.centers[o+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[o+1].x+this.sharpness*(this.centers[o].x+f),y:(1-this.sharpness)*this.points[o+1].y+this.sharpness*(this.centers[o].y+c),z:(1-this.sharpness)*this.points[o+1].z+this.sharpness*(this.centers[o].z+p)},{x:(1-this.sharpness)*this.points[o+1].x+this.sharpness*(this.centers[o+1].x+f),y:(1-this.sharpness)*this.points[o+1].y+this.sharpness*(this.centers[o+1].y+c),z:(1-this.sharpness)*this.points[o+1].z+this.sharpness*(this.centers[o+1].z+p)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}n.prototype.cacheSteps=function(r){var o=[],a=this.pos(0);o.push(0);for(var u=0;u<this.duration;u+=10){var f=this.pos(u);Math.sqrt((f.x-a.x)*(f.x-a.x)+(f.y-a.y)*(f.y-a.y)+(f.z-a.z)*(f.z-a.z))>r&&(o.push(u),a=f)}return o},n.prototype.vector=function(r){var o=this.pos(r+10),a=this.pos(r-10);return{angle:180*Math.atan2(o.y-a.y,o.x-a.x)/3.14,speed:Math.sqrt((a.x-o.x)*(a.x-o.x)+(a.y-o.y)*(a.y-o.y)+(a.z-o.z)*(a.z-o.z))}},n.prototype.pos=function(r){var o=r-this.delay;o<0&&(o=0),o>this.duration&&(o=this.duration-1);var a=o/this.duration;if(a>=1)return this.points[this.length-1];var u=Math.floor((this.points.length-1)*a);return function jr(n,r,o,a,u){var f=function an(n){var r=n*n;return[r*n,3*r*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:u.x*f[0]+a.x*f[1]+o.x*f[2]+r.x*f[3],y:u.y*f[0]+a.y*f[1]+o.y*f[2]+r.y*f[3],z:u.z*f[0]+a.z*f[1]+o.z*f[2]+r.z*f[3]}}((this.length-1)*a-u,this.points[u],this.controls[u][1],this.controls[u+1][0],this.points[u+1])}}();function aa(n,r){return void 0===r&&(r={}),function sn(n,r,o){var a=o,u=!1;return function hn(n,r){Vt(n,function(o,a,u){var f=0;if(o.geometry){var c=o.geometry.type;if("Point"!==c&&"MultiPoint"!==c){var p,g=0,h=0,y=0;if(!1===z(o,function(v,m,x,Z,F){if(void 0===p||a>g||Z>h||F>y)return p=v,g=a,h=Z,y=F,void(f=0);var st=k([p,v],o.properties);if(!1===r(st,a,u,F,f))return!1;f++,p=v}))return!1}}})}(n,function(f,c,p,g,h){a=!1===u&&void 0===o?f:r(a,f,c,p,g,h),u=!0}),a}(n,function(o,a){var u=a.geometry.coordinates;return o+qo(u[0],u[1],r)},0)}W(5469),W(5406);var oi=Math.PI/180,Pn=180/Math.PI,Ao=function(n,r){this.lon=n,this.lat=r,this.x=oi*n,this.y=oi*r};Ao.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ao.prototype.antipode=function(){return new Ao(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Os=function(){this.coords=[],this.length=0};Os.prototype.move_to=function(n){this.length++,this.coords.push(n)};var Jn=function(n){this.properties=n||{},this.geometries=[]};Jn.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],r=0;r<this.geometries.length;r++)n.push(this.geometries[r].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}},Jn.prototype.wkt=function(){for(var n="",r="LINESTRING(",o=function(f){r+=f[0]+" "+f[1]+","},a=0;a<this.geometries.length;a++){if(0===this.geometries[a].coords.length)return"LINESTRING(empty)";this.geometries[a].coords.forEach(o),n+=r.substring(0,r.length-1)+")"}return n};var _i=function(n,r,o){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!r||void 0===r.x||void 0===r.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ao(n.x,n.y),this.end=new Ao(r.x,r.y),this.properties=o||{};var a=this.start.x-this.end.x,f=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(a/2),2);if(this.g=2*Math.asin(Math.sqrt(f)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+r.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+r)};_i.prototype.interpolate=function(n){var r=Math.sin((1-n)*this.g)/Math.sin(this.g),o=Math.sin(n*this.g)/Math.sin(this.g),a=r*Math.cos(this.start.y)*Math.cos(this.start.x)+o*Math.cos(this.end.y)*Math.cos(this.end.x),u=r*Math.cos(this.start.y)*Math.sin(this.start.x)+o*Math.cos(this.end.y)*Math.sin(this.end.x),f=r*Math.sin(this.start.y)+o*Math.sin(this.end.y),c=Pn*Math.atan2(f,Math.sqrt(Math.pow(a,2)+Math.pow(u,2)));return[Pn*Math.atan2(u,a),c]},_i.prototype.Arc=function(n,r){var o=[];if(!n||n<=2)o.push([this.start.lon,this.start.lat]),o.push([this.end.lon,this.end.lat]);else for(var a=1/(n-1),u=0;u<n;++u){var c=this.interpolate(a*u);o.push(c)}for(var p=!1,g=0,h=r&&r.offset?r.offset:10,y=180-h,v=-180+h,m=360-h,x=1;x<o.length;++x){var Z=o[x-1][0],F=o[x][0],st=Math.abs(F-Z);st>m&&(F>y&&Z<v||Z>y&&F<v)?p=!0:st>g&&(g=st)}var V=[];if(p&&g<h){var D=[];V.push(D);for(var Y=0;Y<o.length;++Y){var pt=parseFloat(o[Y][0]);if(Y>0&&Math.abs(pt-o[Y-1][0])>m){var ct=parseFloat(o[Y-1][0]),_t=parseFloat(o[Y-1][1]),vt=parseFloat(o[Y][0]),It=parseFloat(o[Y][1]);if(ct>-180&&ct<v&&180===vt&&Y+1<o.length&&o[Y-1][0]>-180&&o[Y-1][0]<v){D.push([-180,o[Y][1]]),Y++,D.push([o[Y][0],o[Y][1]]);continue}if(ct>y&&ct<180&&-180===vt&&Y+1<o.length&&o[Y-1][0]>y&&o[Y-1][0]<180){D.push([180,o[Y][1]]),Y++,D.push([o[Y][0],o[Y][1]]);continue}if(ct<v&&vt>y){var tt=ct;ct=vt,vt=tt;var le=_t;_t=It,It=le}if(ct>y&&vt<v&&(vt+=360),ct<=180&&vt>=180&&ct<vt){var Zt=(180-ct)/(vt-ct),ve=Zt*It+(1-Zt)*_t;D.push([o[Y-1][0]>y?180:-180,ve]),(D=[]).push([o[Y-1][0]>y?-180:180,ve]),V.push(D)}else V.push(D=[]);D.push([pt,o[Y][1]])}else D.push([o[Y][0],o[Y][1]])}}else{var Ee=[];V.push(Ee);for(var Yt=0;Yt<o.length;++Yt)Ee.push([o[Yt][0],o[Yt][1]])}for(var ue=new Jn(this.properties),re=0;re<V.length;++re){var ln=new Os;ue.geometries.push(ln);for(var un=V[re],Ce=0;Ce<un.length;++Ce)ln.move_to(un[Ce])}return ue},W(1105);var xe=[],Pe=[],be=[],Le=[],Oe=[],Re=[],Ae=[],Te=[],De=[],Fe=[],Be=[],Ge=[],ke=[],qe=[],ze=[],Xe=[],Ue=[],Ye=[],He=[],We=[],Ze=[],Ve=[],je=[],Je=[];Ae[85]=Fe[85]=-1,Te[85]=Be[85]=0,De[85]=Ge[85]=1,He[85]=Ve[85]=1,We[85]=je[85]=0,Ze[85]=Je[85]=1,xe[85]=Le[85]=0,Pe[85]=Oe[85]=-1,be[85]=ze[85]=0,Xe[85]=ke[85]=0,Ue[85]=qe[85]=1,Re[85]=Ye[85]=1,Ve[1]=Ve[169]=0,je[1]=je[169]=-1,Je[1]=Je[169]=0,ke[1]=ke[169]=-1,qe[1]=qe[169]=0,ze[1]=ze[169]=0,Fe[4]=Fe[166]=0,Be[4]=Be[166]=-1,Ge[4]=Ge[166]=1,Xe[4]=Xe[166]=1,Ue[4]=Ue[166]=0,Ye[4]=Ye[166]=0,Ae[16]=Ae[154]=0,Te[16]=Te[154]=1,De[16]=De[154]=1,Le[16]=Le[154]=1,Oe[16]=Oe[154]=0,Re[16]=Re[154]=1,He[64]=He[106]=0,We[64]=We[106]=1,Ze[64]=Ze[106]=0,xe[64]=xe[106]=-1,Pe[64]=Pe[106]=0,be[64]=be[106]=1,He[2]=He[168]=0,We[2]=We[168]=-1,Ze[2]=Ze[168]=1,Ve[2]=Ve[168]=0,je[2]=je[168]=-1,Je[2]=Je[168]=0,ke[2]=ke[168]=-1,qe[2]=qe[168]=0,ze[2]=ze[168]=0,Xe[2]=Xe[168]=-1,Ue[2]=Ue[168]=0,Ye[2]=Ye[168]=1,Ae[8]=Ae[162]=0,Te[8]=Te[162]=-1,De[8]=De[162]=0,Fe[8]=Fe[162]=0,Be[8]=Be[162]=-1,Ge[8]=Ge[162]=1,ke[8]=ke[162]=1,qe[8]=qe[162]=0,ze[8]=ze[162]=1,Xe[8]=Xe[162]=1,Ue[8]=Ue[162]=0,Ye[8]=Ye[162]=0,Ae[32]=Ae[138]=0,Te[32]=Te[138]=1,De[32]=De[138]=1,Fe[32]=Fe[138]=0,Be[32]=Be[138]=1,Ge[32]=Ge[138]=0,xe[32]=xe[138]=1,Pe[32]=Pe[138]=0,be[32]=be[138]=0,Le[32]=Le[138]=1,Oe[32]=Oe[138]=0,Re[32]=Re[138]=1,Ve[128]=Ve[42]=0,je[128]=je[42]=1,Je[128]=Je[42]=1,He[128]=He[42]=0,We[128]=We[42]=1,Ze[128]=Ze[42]=0,xe[128]=xe[42]=-1,Pe[128]=Pe[42]=0,be[128]=be[42]=1,Le[128]=Le[42]=-1,Oe[128]=Oe[42]=0,Re[128]=Re[42]=0,Fe[5]=Fe[165]=-1,Be[5]=Be[165]=0,Ge[5]=Ge[165]=0,Ve[5]=Ve[165]=1,je[5]=je[165]=0,Je[5]=Je[165]=0,Xe[20]=Xe[150]=0,Ue[20]=Ue[150]=1,Ye[20]=Ye[150]=1,Le[20]=Le[150]=0,Oe[20]=Oe[150]=-1,Re[20]=Re[150]=1,Ae[80]=Ae[90]=-1,Te[80]=Te[90]=0,De[80]=De[90]=1,He[80]=He[90]=1,We[80]=We[90]=0,Ze[80]=Ze[90]=1,ke[65]=ke[105]=0,qe[65]=qe[105]=1,ze[65]=ze[105]=0,xe[65]=xe[105]=0,Pe[65]=Pe[105]=-1,be[65]=be[105]=0,Ae[160]=Ae[10]=-1,Te[160]=Te[10]=0,De[160]=De[10]=1,Fe[160]=Fe[10]=-1,Be[160]=Be[10]=0,Ge[160]=Ge[10]=0,Ve[160]=Ve[10]=1,je[160]=je[10]=0,Je[160]=Je[10]=0,He[160]=He[10]=1,We[160]=We[10]=0,Ze[160]=Ze[10]=1,Xe[130]=Xe[40]=0,Ue[130]=Ue[40]=1,Ye[130]=Ye[40]=1,ke[130]=ke[40]=0,qe[130]=qe[40]=1,ze[130]=ze[40]=0,xe[130]=xe[40]=0,Pe[130]=Pe[40]=-1,be[130]=be[40]=0,Le[130]=Le[40]=0,Oe[130]=Oe[40]=-1,Re[130]=Re[40]=1,Fe[37]=Fe[133]=0,Be[37]=Be[133]=1,Ge[37]=Ge[133]=1,Ve[37]=Ve[133]=0,je[37]=je[133]=1,Je[37]=Je[133]=0,xe[37]=xe[133]=-1,Pe[37]=Pe[133]=0,be[37]=be[133]=0,Le[37]=Le[133]=1,Oe[37]=Oe[133]=0,Re[37]=Re[133]=0,Xe[148]=Xe[22]=-1,Ue[148]=Ue[22]=0,Ye[148]=Ye[22]=0,Ve[148]=Ve[22]=0,je[148]=je[22]=-1,Je[148]=Je[22]=1,He[148]=He[22]=0,We[148]=We[22]=1,Ze[148]=Ze[22]=1,Le[148]=Le[22]=-1,Oe[148]=Oe[22]=0,Re[148]=Re[22]=1,Ae[82]=Ae[88]=0,Te[82]=Te[88]=-1,De[82]=De[88]=1,Xe[82]=Xe[88]=1,Ue[82]=Ue[88]=0,Ye[82]=Ye[88]=1,ke[82]=ke[88]=-1,qe[82]=qe[88]=0,ze[82]=ze[88]=1,He[82]=He[88]=0,We[82]=We[88]=-1,Ze[82]=Ze[88]=0,Ae[73]=Ae[97]=0,Te[73]=Te[97]=1,De[73]=De[97]=0,Fe[73]=Fe[97]=0,Be[73]=Be[97]=-1,Ge[73]=Ge[97]=0,ke[73]=ke[97]=1,qe[73]=qe[97]=0,ze[73]=ze[97]=0,xe[73]=xe[97]=1,Pe[73]=Pe[97]=0,be[73]=be[97]=1,Ae[145]=Ae[25]=0,Te[145]=Te[25]=-1,De[145]=De[25]=0,ke[145]=ke[25]=1,qe[145]=qe[25]=0,ze[145]=ze[25]=1,Ve[145]=Ve[25]=0,je[145]=je[25]=1,Je[145]=Je[25]=1,Le[145]=Le[25]=-1,Oe[145]=Oe[25]=0,Re[145]=Re[25]=0,Fe[70]=Fe[100]=0,Be[70]=Be[100]=1,Ge[70]=Ge[100]=0,Xe[70]=Xe[100]=-1,Ue[70]=Ue[100]=0,Ye[70]=Ye[100]=1,He[70]=He[100]=0,We[70]=We[100]=-1,Ze[70]=Ze[100]=1,xe[70]=xe[100]=1,Pe[70]=Pe[100]=0,be[70]=be[100]=0,Fe[101]=Fe[69]=0,Be[101]=Be[69]=1,Ge[101]=Ge[69]=0,xe[101]=xe[69]=1,Pe[101]=Pe[69]=0,be[101]=be[69]=0,Ve[149]=Ve[21]=0,je[149]=je[21]=1,Je[149]=Je[21]=1,Le[149]=Le[21]=-1,Oe[149]=Oe[21]=0,Re[149]=Re[21]=0,Xe[86]=Xe[84]=-1,Ue[86]=Ue[84]=0,Ye[86]=Ye[84]=1,He[86]=He[84]=0,We[86]=We[84]=-1,Ze[86]=Ze[84]=1,Ae[89]=Ae[81]=0,Te[89]=Te[81]=-1,De[89]=De[81]=0,ke[89]=ke[81]=1,qe[89]=qe[81]=0,ze[89]=ze[81]=1,Ae[96]=Ae[74]=0,Te[96]=Te[74]=1,De[96]=De[74]=0,Fe[96]=Fe[74]=-1,Be[96]=Be[74]=0,Ge[96]=Ge[74]=1,He[96]=He[74]=1,We[96]=We[74]=0,Ze[96]=Ze[74]=0,xe[96]=xe[74]=1,Pe[96]=Pe[74]=0,be[96]=be[74]=1,Ae[24]=Ae[146]=0,Te[24]=Te[146]=-1,De[24]=De[146]=1,Xe[24]=Xe[146]=1,Ue[24]=Ue[146]=0,Ye[24]=Ye[146]=1,ke[24]=ke[146]=0,qe[24]=qe[146]=1,ze[24]=ze[146]=1,Le[24]=Le[146]=0,Oe[24]=Oe[146]=-1,Re[24]=Re[146]=0,Fe[6]=Fe[164]=-1,Be[6]=Be[164]=0,Ge[6]=Ge[164]=1,Xe[6]=Xe[164]=-1,Ue[6]=Ue[164]=0,Ye[6]=Ye[164]=0,Ve[6]=Ve[164]=0,je[6]=je[164]=-1,Je[6]=Je[164]=1,He[6]=He[164]=1,We[6]=We[164]=0,Ze[6]=Ze[164]=0,ke[129]=ke[41]=0,qe[129]=qe[41]=1,ze[129]=ze[41]=1,Ve[129]=Ve[41]=0,je[129]=je[41]=1,Je[129]=Je[41]=0,xe[129]=xe[41]=-1,Pe[129]=Pe[41]=0,be[129]=be[41]=0,Le[129]=Le[41]=0,Oe[129]=Oe[41]=-1,Re[129]=Re[41]=0,Xe[66]=Xe[104]=0,Ue[66]=Ue[104]=1,Ye[66]=Ye[104]=0,ke[66]=ke[104]=-1,qe[66]=qe[104]=0,ze[66]=ze[104]=1,He[66]=He[104]=0,We[66]=We[104]=-1,Ze[66]=Ze[104]=0,xe[66]=xe[104]=0,Pe[66]=Pe[104]=-1,be[66]=be[104]=1,Ae[144]=Ae[26]=-1,Te[144]=Te[26]=0,De[144]=De[26]=0,Ve[144]=Ve[26]=1,je[144]=je[26]=0,Je[144]=Je[26]=1,He[144]=He[26]=0,We[144]=We[26]=1,Ze[144]=Ze[26]=1,Le[144]=Le[26]=-1,Oe[144]=Oe[26]=0,Re[144]=Re[26]=1,Fe[36]=Fe[134]=0,Be[36]=Be[134]=1,Ge[36]=Ge[134]=1,Xe[36]=Xe[134]=0,Ue[36]=Ue[134]=1,Ye[36]=Ye[134]=0,xe[36]=xe[134]=0,Pe[36]=Pe[134]=-1,be[36]=be[134]=1,Le[36]=Le[134]=1,Oe[36]=Oe[134]=0,Re[36]=Re[134]=0,Ae[9]=Ae[161]=-1,Te[9]=Te[161]=0,De[9]=De[161]=0,Fe[9]=Fe[161]=0,Be[9]=Be[161]=-1,Ge[9]=Ge[161]=0,ke[9]=ke[161]=1,qe[9]=qe[161]=0,ze[9]=ze[161]=0,Ve[9]=Ve[161]=1,je[9]=je[161]=0,Je[9]=Je[161]=1,Ae[136]=0,Te[136]=1,De[136]=1,Fe[136]=0,Be[136]=1,Ge[136]=0,Xe[136]=-1,Ue[136]=0,Ye[136]=1,ke[136]=-1,qe[136]=0,ze[136]=0,Ve[136]=0,je[136]=-1,Je[136]=0,He[136]=0,We[136]=-1,Ze[136]=1,xe[136]=1,Pe[136]=0,be[136]=0,Le[136]=1,Oe[136]=0,Re[136]=1,Ae[34]=0,Te[34]=-1,De[34]=0,Fe[34]=0,Be[34]=-1,Ge[34]=1,Xe[34]=1,Ue[34]=0,Ye[34]=0,ke[34]=1,qe[34]=0,ze[34]=1,Ve[34]=0,je[34]=1,Je[34]=1,He[34]=0,We[34]=1,Ze[34]=0,xe[34]=-1,Pe[34]=0,be[34]=1,Le[34]=-1,Oe[34]=0,Re[34]=0,Ae[35]=0,Te[35]=1,De[35]=1,Fe[35]=0,Be[35]=-1,Ge[35]=1,Xe[35]=1,Ue[35]=0,Ye[35]=0,ke[35]=-1,qe[35]=0,ze[35]=0,Ve[35]=0,je[35]=-1,Je[35]=0,He[35]=0,We[35]=1,Ze[35]=0,xe[35]=-1,Pe[35]=0,be[35]=1,Le[35]=1,Oe[35]=0,Re[35]=1,Ae[153]=0,Te[153]=1,De[153]=1,ke[153]=-1,qe[153]=0,ze[153]=0,Ve[153]=0,je[153]=-1,Je[153]=0,Le[153]=1,Oe[153]=0,Re[153]=1,Fe[102]=0,Be[102]=-1,Ge[102]=1,Xe[102]=1,Ue[102]=0,Ye[102]=0,He[102]=0,We[102]=1,Ze[102]=0,xe[102]=-1,Pe[102]=0,be[102]=1,Ae[155]=0,Te[155]=-1,De[155]=0,ke[155]=1,qe[155]=0,ze[155]=1,Ve[155]=0,je[155]=1,Je[155]=1,Le[155]=-1,Oe[155]=0,Re[155]=0,Fe[103]=0,Be[103]=1,Ge[103]=0,Xe[103]=-1,Ue[103]=0,Ye[103]=1,He[103]=0,We[103]=-1,Ze[103]=1,xe[103]=1,Pe[103]=0,be[103]=0,Ae[152]=0,Te[152]=1,De[152]=1,Xe[152]=-1,Ue[152]=0,Ye[152]=1,ke[152]=-1,qe[152]=0,ze[152]=0,Ve[152]=0,je[152]=-1,Je[152]=0,He[152]=0,We[152]=-1,Ze[152]=1,Le[152]=1,Oe[152]=0,Re[152]=1,Ae[156]=0,Te[156]=-1,De[156]=1,Xe[156]=1,Ue[156]=0,Ye[156]=1,ke[156]=-1,qe[156]=0,ze[156]=0,Ve[156]=0,je[156]=-1,Je[156]=0,He[156]=0,We[156]=1,Ze[156]=1,Le[156]=-1,Oe[156]=0,Re[156]=1,Ae[137]=0,Te[137]=1,De[137]=1,Fe[137]=0,Be[137]=1,Ge[137]=0,ke[137]=-1,qe[137]=0,ze[137]=0,Ve[137]=0,je[137]=-1,Je[137]=0,xe[137]=1,Pe[137]=0,be[137]=0,Le[137]=1,Oe[137]=0,Re[137]=1,Ae[139]=0,Te[139]=1,De[139]=1,Fe[139]=0,Be[139]=-1,Ge[139]=0,ke[139]=1,qe[139]=0,ze[139]=0,Ve[139]=0,je[139]=1,Je[139]=0,xe[139]=-1,Pe[139]=0,be[139]=0,Le[139]=1,Oe[139]=0,Re[139]=1,Ae[98]=0,Te[98]=-1,De[98]=0,Fe[98]=0,Be[98]=-1,Ge[98]=1,Xe[98]=1,Ue[98]=0,Ye[98]=0,ke[98]=1,qe[98]=0,ze[98]=1,He[98]=0,We[98]=1,Ze[98]=0,xe[98]=-1,Pe[98]=0,be[98]=1,Ae[99]=0,Te[99]=1,De[99]=0,Fe[99]=0,Be[99]=-1,Ge[99]=1,Xe[99]=1,Ue[99]=0,Ye[99]=0,ke[99]=-1,qe[99]=0,ze[99]=1,He[99]=0,We[99]=-1,Ze[99]=0,xe[99]=1,Pe[99]=0,be[99]=1,Fe[38]=0,Be[38]=-1,Ge[38]=1,Xe[38]=1,Ue[38]=0,Ye[38]=0,Ve[38]=0,je[38]=1,Je[38]=1,He[38]=0,We[38]=1,Ze[38]=0,xe[38]=-1,Pe[38]=0,be[38]=1,Le[38]=-1,Oe[38]=0,Re[38]=0,Fe[39]=0,Be[39]=1,Ge[39]=1,Xe[39]=-1,Ue[39]=0,Ye[39]=0,Ve[39]=0,je[39]=-1,Je[39]=1,He[39]=0,We[39]=1,Ze[39]=0,xe[39]=-1,Pe[39]=0,be[39]=1,Le[39]=1,Oe[39]=0,Re[39]=0;var fu=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},cu=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},hu=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},pu=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},gu=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},du=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},yu=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},vu=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Kt=[],jt=[],ae=[],se=[],de=[],he=[],$e=[],nn=[];se[1]=de[1]=18,se[169]=de[169]=18,ae[4]=jt[4]=12,ae[166]=jt[166]=12,Kt[16]=nn[16]=4,Kt[154]=nn[154]=4,he[64]=$e[64]=22,he[106]=$e[106]=22,ae[2]=he[2]=17,se[2]=de[2]=18,ae[168]=he[168]=17,se[168]=de[168]=18,Kt[8]=se[8]=9,jt[8]=ae[8]=12,Kt[162]=se[162]=9,jt[162]=ae[162]=12,Kt[32]=nn[32]=4,jt[32]=$e[32]=1,Kt[138]=nn[138]=4,jt[138]=$e[138]=1,de[128]=nn[128]=21,he[128]=$e[128]=22,de[42]=nn[42]=21,he[42]=$e[42]=22,jt[5]=de[5]=14,jt[165]=de[165]=14,ae[20]=nn[20]=6,ae[150]=nn[150]=6,Kt[80]=he[80]=11,Kt[90]=he[90]=11,se[65]=$e[65]=3,se[105]=$e[105]=3,Kt[160]=he[160]=11,jt[160]=de[160]=14,Kt[10]=he[10]=11,jt[10]=de[10]=14,ae[130]=nn[130]=6,se[130]=$e[130]=3,ae[40]=nn[40]=6,se[40]=$e[40]=3,jt[101]=$e[101]=1,jt[69]=$e[69]=1,de[149]=nn[149]=21,de[21]=nn[21]=21,ae[86]=he[86]=17,ae[84]=he[84]=17,Kt[89]=se[89]=9,Kt[81]=se[81]=9,Kt[96]=$e[96]=0,jt[96]=he[96]=15,Kt[74]=$e[74]=0,jt[74]=he[74]=15,Kt[24]=ae[24]=8,se[24]=nn[24]=7,Kt[146]=ae[146]=8,se[146]=nn[146]=7,jt[6]=he[6]=15,ae[6]=de[6]=16,jt[164]=he[164]=15,ae[164]=de[164]=16,se[129]=nn[129]=7,de[129]=$e[129]=20,se[41]=nn[41]=7,de[41]=$e[41]=20,ae[66]=$e[66]=2,se[66]=he[66]=19,ae[104]=$e[104]=2,se[104]=he[104]=19,Kt[144]=de[144]=10,he[144]=nn[144]=23,Kt[26]=de[26]=10,he[26]=nn[26]=23,jt[36]=nn[36]=5,ae[36]=$e[36]=2,jt[134]=nn[134]=5,ae[134]=$e[134]=2,Kt[9]=de[9]=10,jt[9]=se[9]=13,Kt[161]=de[161]=10,jt[161]=se[161]=13,jt[37]=nn[37]=5,de[37]=$e[37]=20,jt[133]=nn[133]=5,de[133]=$e[133]=20,ae[148]=de[148]=16,he[148]=nn[148]=23,ae[22]=de[22]=16,he[22]=nn[22]=23,Kt[82]=ae[82]=8,se[82]=he[82]=19,Kt[88]=ae[88]=8,se[88]=he[88]=19,Kt[73]=$e[73]=0,jt[73]=se[73]=13,Kt[97]=$e[97]=0,jt[97]=se[97]=13,Kt[145]=se[145]=9,de[145]=nn[145]=21,Kt[25]=se[25]=9,de[25]=nn[25]=21,jt[70]=$e[70]=1,ae[70]=he[70]=17,jt[100]=$e[100]=1,ae[100]=he[100]=17,Kt[34]=se[34]=9,jt[34]=ae[34]=12,de[34]=nn[34]=21,he[34]=$e[34]=22,Kt[136]=nn[136]=4,jt[136]=$e[136]=1,ae[136]=he[136]=17,se[136]=de[136]=18,Kt[35]=nn[35]=4,jt[35]=ae[35]=12,se[35]=de[35]=18,he[35]=$e[35]=22,Kt[153]=nn[153]=4,se[153]=de[153]=18,jt[102]=ae[102]=12,he[102]=$e[102]=22,Kt[155]=se[155]=9,de[155]=nn[155]=23,jt[103]=$e[103]=1,ae[103]=he[103]=17,Kt[152]=nn[152]=4,ae[152]=he[152]=17,se[152]=de[152]=18,Kt[156]=ae[156]=8,se[156]=de[156]=18,he[156]=nn[156]=23,Kt[137]=nn[137]=4,jt[137]=$e[137]=1,se[137]=de[137]=18,Kt[139]=nn[139]=4,jt[139]=se[139]=13,de[139]=$e[139]=20,Kt[98]=se[98]=9,jt[98]=ae[98]=12,he[98]=$e[98]=22,Kt[99]=$e[99]=0,jt[99]=ae[99]=12,se[99]=he[99]=19,jt[38]=ae[38]=12,de[38]=nn[38]=21,he[38]=$e[38]=22,jt[39]=nn[39]=5,ae[39]=de[39]=16,he[39]=$e[39]=22;var Wt=[];function xu(n,r,o){return function ih(n){return(n>0)-(n<0)||+n}((r[0]-n[0])*(o[1]-r[1])-(o[0]-r[0])*(r[1]-n[1]))}function vl(n,r){return r.geometry.coordinates[0].every(function(o){return li(it(o),n)})}Wt[1]=Wt[169]=fu,Wt[4]=Wt[166]=cu,Wt[16]=Wt[154]=hu,Wt[64]=Wt[106]=pu,Wt[168]=Wt[2]=gu,Wt[162]=Wt[8]=du,Wt[138]=Wt[32]=yu,Wt[42]=Wt[128]=vu,Wt[5]=Wt[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]},Wt[20]=Wt[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]},Wt[80]=Wt[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]},Wt[65]=Wt[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Wt[160]=Wt[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]},Wt[130]=Wt[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]},Wt[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Wt[101]=Wt[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]},Wt[149]=Wt[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]},Wt[86]=Wt[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]},Wt[89]=Wt[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]},Wt[96]=Wt[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]},Wt[24]=Wt[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]},Wt[6]=Wt[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]},Wt[129]=Wt[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]},Wt[66]=Wt[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Wt[144]=Wt[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Wt[36]=Wt[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]},Wt[9]=Wt[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]},Wt[37]=Wt[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Wt[148]=Wt[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Wt[82]=Wt[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]},Wt[73]=Wt[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]},Wt[145]=Wt[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Wt[70]=Wt[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Wt[34]=function(n){return[vu(n),du(n)]},Wt[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},Wt[136]=function(n){return[yu(n),gu(n)]},Wt[153]=function(n){return[hu(n),fu(n)]},Wt[102]=function(n){return[cu(n),pu(n)]},Wt[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]},Wt[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Wt[152]=function(n){return[hu(n),gu(n)]},Wt[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]},Wt[137]=function(n){return[yu(n),fu(n)]},Wt[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]},Wt[98]=function(n){return[du(n),pu(n)]},Wt[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]},Wt[38]=function(n){return[cu(n),vu(n)]},Wt[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};const ml=function(){function n(r){this.id=n.buildId(r),this.coordinates=r,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return n.buildId=function(r){return r.join(",")},n.prototype.removeInnerEdge=function(r){this.innerEdges=this.innerEdges.filter(function(o){return o.from.id!==r.from.id})},n.prototype.removeOuterEdge=function(r){this.outerEdges=this.outerEdges.filter(function(o){return o.to.id!==r.to.id})},n.prototype.addOuterEdge=function(r){this.outerEdges.push(r),this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var r=this;this.outerEdgesSorted||(this.outerEdges.sort(function(o,a){var u=o.to,f=a.to;if(u.coordinates[0]-r.coordinates[0]>=0&&f.coordinates[0]-r.coordinates[0]<0)return 1;if(u.coordinates[0]-r.coordinates[0]<0&&f.coordinates[0]-r.coordinates[0]>=0)return-1;if(u.coordinates[0]-r.coordinates[0]==0&&f.coordinates[0]-r.coordinates[0]==0)return u.coordinates[1]-r.coordinates[1]>=0||f.coordinates[1]-r.coordinates[1]>=0?u.coordinates[1]-f.coordinates[1]:f.coordinates[1]-u.coordinates[1];var c=xu(r.coordinates,u.coordinates,f.coordinates);return c<0?1:c>0?-1:Math.pow(u.coordinates[0]-r.coordinates[0],2)+Math.pow(u.coordinates[1]-r.coordinates[1],2)-(Math.pow(f.coordinates[0]-r.coordinates[0],2)+Math.pow(f.coordinates[1]-r.coordinates[1],2))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(r){return this.sortOuterEdges(),this.outerEdges[r]},n.prototype.addInnerEdge=function(r){this.innerEdges.push(r)},n}(),lh=function(){function n(r,o){this.from=r,this.to=o,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},n.prototype.isEqual=function(r){return this.from.id===r.from.id&&this.to.id===r.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return k([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(r){return xu(r.from.coordinates,r.to.coordinates,this.to.coordinates)},n}(),ch=function(){function n(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return n.prototype.push=function(r){this.edges.push(r),this.polygon=this.envelope=void 0},n.prototype.get=function(r){return this.edges[r]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(r){this.edges.forEach(r)},n.prototype.map=function(r){return this.edges.map(r)},n.prototype.some=function(r){return this.edges.some(r)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var r=this,o=this.edges.reduce(function(c,p,g){return p.from.coordinates[1]>r.edges[c].from.coordinates[1]&&(c=g),c},0),a=(0===o?this.length:o)-1,u=(o+1)%this.length,f=xu(this.edges[a].from.coordinates,this.edges[o].from.coordinates,this.edges[u].from.coordinates);return 0===f?this.edges[a].from.coordinates[0]>this.edges[u].from.coordinates[0]:f>0},n.prototype.toMultiPoint=function(){return function U(n,r,o){return void 0===o&&(o={}),Rt({type:"MultiPoint",coordinates:n},r,o)}(this.edges.map(function(r){return r.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var r=this.edges.map(function(o){return o.from.coordinates});return r.push(this.edges[0].from.coordinates),this.polygon=Dt([r])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function Li(n){return function qr(n,r){void 0===r&&(r={});var o=Number(n[0]),a=Number(n[1]),u=Number(n[2]),f=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var c=[o,a];return Dt([[c,[u,a],[u,f],[o,f],c]],r.properties,{bbox:n,id:r.id})}(b(n))}(this.toPolygon())},n.findEdgeRingContaining=function(r,o){var u,f,a=r.getEnvelope();return o.forEach(function(c){var p=c.getEnvelope();if(f&&(u=f.getEnvelope()),!function oh(n,r){var o=n.geometry.coordinates[0].map(function(c){return c[0]}),a=n.geometry.coordinates[0].map(function(c){return c[1]}),u=r.geometry.coordinates[0].map(function(c){return c[0]}),f=r.geometry.coordinates[0].map(function(c){return c[1]});return Math.max.apply(null,o)===Math.max.apply(null,u)&&Math.max.apply(null,a)===Math.max.apply(null,f)&&Math.min.apply(null,o)===Math.min.apply(null,u)&&Math.min.apply(null,a)===Math.min.apply(null,f)}(p,a)&&vl(p,a)){for(var g=r.map(function(Z){return Z.from.coordinates}),h=void 0,y=function(Z){c.some(function(F){return function sh(n,r){return n[0]===r[0]&&n[1]===r[1]}(Z,F.from.coordinates)})||(h=Z)},v=0,m=g;v<m.length;v++)y(m[v]);h&&c.inside(it(h))&&(!f||vl(u,p))&&(f=c)}}),f},n.prototype.inside=function(r){return li(r,this.toPolygon())},n}();function Nl(n){for(var r=n,o=[];r.parent;)o.unshift(r),r=r.parent;return o}!function(){function n(){this.edges=[],this.nodes={}}n.fromGeoJson=function(r){!function hh(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(r);var o=new n;return Vt(r,function(a){(function Tt(n,r,o){if(!n)throw new Error("No feature passed");if(!o)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+o+", Feature with geometry required");if(!n.geometry||n.geometry.type!==r)throw new Error("Invalid input to "+o+": must be a "+r+", given "+n.geometry.type)})(a,"LineString","Graph::fromGeoJson"),function Nt(n,r,o,a){var u=o;z(n,function(f,c,p,g,h){u=0===c&&void 0===o?f:r(u,f,c,p,g,h)},a)}(a,function(u,f){if(u){var c=o.getNode(u),p=o.getNode(f);o.addEdge(c,p)}return f})}),o},n.prototype.getNode=function(r){var o=ml.buildId(r),a=this.nodes[o];return a||(a=this.nodes[o]=new ml(r)),a},n.prototype.addEdge=function(r,o){var a=new lh(r,o),u=a.getSymetric();this.edges.push(a),this.edges.push(u)},n.prototype.deleteDangles=function(){var r=this;Object.keys(this.nodes).map(function(o){return r.nodes[o]}).forEach(function(o){return r._removeIfDangle(o)})},n.prototype._removeIfDangle=function(r){var o=this;if(r.innerEdges.length<=1){var a=r.getOuterEdges().map(function(u){return u.to});this.removeNode(r),a.forEach(function(u){return o._removeIfDangle(u)})}},n.prototype.deleteCutEdges=function(){var r=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(o){o.label===o.symetric.label&&(r.removeEdge(o.symetric),r.removeEdge(o))})},n.prototype._computeNextCWEdges=function(r){var o=this;typeof r>"u"?Object.keys(this.nodes).forEach(function(a){return o._computeNextCWEdges(o.nodes[a])}):r.getOuterEdges().forEach(function(a,u){r.getOuterEdge((0===u?r.getOuterEdges().length:u)-1).symetric.next=a})},n.prototype._computeNextCCWEdges=function(r,o){for(var u,f,a=r.getOuterEdges(),c=a.length-1;c>=0;--c){var p=a[c],g=p.symetric,h=void 0,y=void 0;p.label===o&&(h=p),g.label===o&&(y=g),h&&y&&(y&&(f=y),h&&(f&&(f.next=h,f=void 0),u||(u=h)))}f&&(f.next=u)},n.prototype._findLabeledEdgeRings=function(){var r=[],o=0;return this.edges.forEach(function(a){if(!(a.label>=0)){r.push(a);var u=a;do{u.label=o,u=u.next}while(!a.isEqual(u));o++}}),r},n.prototype.getEdgeRings=function(){var r=this;this._computeNextCWEdges(),this.edges.forEach(function(a){a.label=void 0}),this._findLabeledEdgeRings().forEach(function(a){r._findIntersectionNodes(a).forEach(function(u){r._computeNextCCWEdges(u,a.label)})});var o=[];return this.edges.forEach(function(a){a.ring||o.push(r._findEdgeRing(a))}),o},n.prototype._findIntersectionNodes=function(r){var o=[],a=r,u=function(){var f=0;a.from.getOuterEdges().forEach(function(c){c.label===r.label&&++f}),f>1&&o.push(a.from),a=a.next};do{u()}while(!r.isEqual(a));return o},n.prototype._findEdgeRing=function(r){var o=r,a=new ch;do{a.push(o),o.ring=a,o=o.next}while(!r.isEqual(o));return a},n.prototype.removeNode=function(r){var o=this;r.getOuterEdges().forEach(function(a){return o.removeEdge(a)}),r.innerEdges.forEach(function(a){return o.removeEdge(a)}),delete this.nodes[r.id]},n.prototype.removeEdge=function(r){this.edges=this.edges.filter(function(o){return!o.isEqual(r)}),r.deleteEdge()}}(),W(5013),W(7470),W(9475);var da={search:function(n,r,o,a){n.cleanDirty();var u=(a=a||{}).heuristic||da.heuristics.manhattan,f=a.closest||!1,c=function Mh(){return new Ml(function(n){return n.f})}(),p=r;for(r.h=u(r,o),c.push(r);c.size()>0;){var g=c.pop();if(g===o)return Nl(g);g.closed=!0;for(var h=n.neighbors(g),y=0,v=h.length;y<v;++y){var m=h[y];if(!m.closed&&!m.isWall()){var x=g.g+m.getCost(g),Z=m.visited;(!Z||x<m.g)&&(m.visited=!0,m.parent=g,m.h=m.h||u(m,o),m.g=x,m.f=m.g+m.h,n.markDirty(m),f&&(m.h<p.h||m.h===p.h&&m.g<p.g)&&(p=m),Z?c.rescoreElement(m):c.push(m))}}}return f?Nl(p):[]},heuristics:{manhattan:function(n,r){return Math.abs(r.x-n.x)+Math.abs(r.y-n.y)},diagonal:function(n,r){var a=Math.sqrt(2),u=Math.abs(r.x-n.x),f=Math.abs(r.y-n.y);return 1*(u+f)+(a-2)*Math.min(u,f)}},cleanNode:function(n){n.f=0,n.g=0,n.h=0,n.visited=!1,n.closed=!1,n.parent=null}};function gs(n,r){r=r||{},this.nodes=[],this.diagonal=!!r.diagonal,this.grid=[];for(var o=0;o<n.length;o++){this.grid[o]=[];for(var a=0,u=n[o];a<u.length;a++){var f=new ya(o,a,u[a]);this.grid[o][a]=f,this.nodes.push(f)}}this.init()}function ya(n,r,o){this.x=n,this.y=r,this.weight=o}function Ml(n){this.content=[],this.scoreFunction=n}function wu(){this._=null}function va(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function As(n,r){var o=r,a=r.R,u=o.U;u?u.L===o?u.L=a:u.R=a:n._=a,a.U=u,o.U=a,o.R=a.L,o.R&&(o.R.U=o),a.L=o}function Ts(n,r){var o=r,a=r.L,u=o.U;u?u.L===o?u.L=a:u.R=a:n._=a,a.U=u,o.U=a,o.L=a.R,o.L&&(o.L.U=o),a.R=o}function bl(n){for(;n.L;)n=n.L;return n}gs.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)da.cleanNode(this.nodes[n])},gs.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)da.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]},gs.prototype.markDirty=function(n){this.dirtyNodes.push(n)},gs.prototype.neighbors=function(n){var r=[],o=n.x,a=n.y,u=this.grid;return u[o-1]&&u[o-1][a]&&r.push(u[o-1][a]),u[o+1]&&u[o+1][a]&&r.push(u[o+1][a]),u[o]&&u[o][a-1]&&r.push(u[o][a-1]),u[o]&&u[o][a+1]&&r.push(u[o][a+1]),this.diagonal&&(u[o-1]&&u[o-1][a-1]&&r.push(u[o-1][a-1]),u[o+1]&&u[o+1][a-1]&&r.push(u[o+1][a-1]),u[o-1]&&u[o-1][a+1]&&r.push(u[o-1][a+1]),u[o+1]&&u[o+1][a+1]&&r.push(u[o+1][a+1])),r},gs.prototype.toString=function(){for(var o,a,u,f,n=[],r=this.grid,c=0,p=r.length;c<p;c++){for(o=[],u=0,f=(a=r[c]).length;u<f;u++)o.push(a[u].weight);n.push(o.join(" "))}return n.join("\n")},ya.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ya.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight},ya.prototype.isWall=function(){return 0===this.weight},Ml.prototype={push:function(n){this.content.push(n),this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],r=this.content.pop();return this.content.length>0&&(this.content[0]=r,this.bubbleUp(0)),n},remove:function(n){var r=this.content.indexOf(n),o=this.content.pop();r!==this.content.length-1&&(this.content[r]=o,this.scoreFunction(o)<this.scoreFunction(n)?this.sinkDown(r):this.bubbleUp(r))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var r=this.content[n];n>0;){var o=(n+1>>1)-1,a=this.content[o];if(!(this.scoreFunction(r)<this.scoreFunction(a)))break;this.content[o]=r,this.content[n]=a,n=o}},bubbleUp:function(n){for(var r=this.content.length,o=this.content[n],a=this.scoreFunction(o);;){var p,u=n+1<<1,f=u-1,c=null;if(f<r&&(p=this.scoreFunction(this.content[f]))<a&&(c=f),u<r&&this.scoreFunction(this.content[u])<(null===c?a:p)&&(c=u),null===c)break;this.content[n]=this.content[c],this.content[c]=o,n=c}}},wu.prototype={constructor:wu,insert:function(n,r){var o,a,u;if(n){if(r.P=n,r.N=n.N,n.N&&(n.N.P=r),n.N=r,n.R){for(n=n.R;n.L;)n=n.L;n.L=r}else n.R=r;o=n}else this._?(n=bl(this._),r.P=null,r.N=n,n.P=n.L=r,o=n):(r.P=r.N=null,this._=r,o=null);for(r.L=r.R=null,r.U=o,r.C=!0,n=r;o&&o.C;)o===(a=o.U).L?(u=a.R)&&u.C?(o.C=u.C=!1,a.C=!0,n=a):(n===o.R&&(As(this,o),o=(n=o).U),o.C=!1,a.C=!0,Ts(this,a)):(u=a.L)&&u.C?(o.C=u.C=!1,a.C=!0,n=a):(n===o.L&&(Ts(this,o),o=(n=o).U),o.C=!1,a.C=!0,As(this,a)),o=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var o,f,c,r=n.U,a=n.L,u=n.R;if(f=a?u?bl(u):a:u,r?r.L===n?r.L=f:r.R=f:this._=f,a&&u?(c=f.C,f.C=n.C,f.L=a,a.U=f,f!==u?(r=f.U,f.U=n.U,r.L=n=f.R,f.R=u,u.U=f):(f.U=r,r=f,n=f.R)):(c=n.C,n=f),n&&(n.U=r),!c){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===r.L){if((o=r.R).C&&(o.C=!1,r.C=!0,As(this,r),o=r.R),o.L&&o.L.C||o.R&&o.R.C){(!o.R||!o.R.C)&&(o.L.C=!1,o.C=!0,Ts(this,o),o=r.R),o.C=r.C,r.C=o.R.C=!1,As(this,r),n=this._;break}}else if((o=r.L).C&&(o.C=!1,r.C=!0,Ts(this,r),o=r.L),o.L&&o.L.C||o.R&&o.R.C){(!o.L||!o.L.C)&&(o.R.C=!1,o.C=!0,As(this,o),o=r.L),o.C=r.C,r.C=o.L.C=!1,Ts(this,r),n=this._;break}o.C=!0,n=r,r=r.U}while(!n.C);n&&(n.C=!1)}}};const Ll=wu;function Ds(n,r,o,a){var u=[null,null],f=Rr.push(u)-1;return u.left=n,u.right=r,o&&ma(u,n,r,o),a&&ma(u,r,n,a),Ei[n.index].halfedges.push(f),Ei[r.index].halfedges.push(f),u}function Fs(n,r,o){var a=[r,o];return a.left=n,a}function ma(n,r,o,a){n[0]||n[1]?n.left===o?n[1]=a:n[0]=a:(n[0]=a,n.left=r,n.right=o)}function Lh(n,r,o,a,u){var F,f=n[0],c=n[1],p=f[0],g=f[1],v=0,m=1,x=c[0]-p,Z=c[1]-g;if(F=r-p,x||!(F>0)){if(F/=x,x<0){if(F<v)return;F<m&&(m=F)}else if(x>0){if(F>m)return;F>v&&(v=F)}if(F=a-p,x||!(F<0)){if(F/=x,x<0){if(F>m)return;F>v&&(v=F)}else if(x>0){if(F<v)return;F<m&&(m=F)}if(F=o-g,Z||!(F>0)){if(F/=Z,Z<0){if(F<v)return;F<m&&(m=F)}else if(Z>0){if(F>m)return;F>v&&(v=F)}if(F=u-g,Z||!(F<0)){if(F/=Z,Z<0){if(F>m)return;F>v&&(v=F)}else if(Z>0){if(F<v)return;F<m&&(m=F)}return!(v>0)&&!(m<1)||(v>0&&(n[0]=[p+v*x,g+v*Z]),m<1&&(n[1]=[p+m*x,g+m*Z])),!0}}}}}function Oh(n,r,o,a,u){var f=n[1];if(f)return!0;var F,st,c=n[0],p=n.left,g=n.right,h=p[0],y=p[1],v=g[0],m=g[1],x=(h+v)/2;if(m===y){if(x<r||x>=a)return;if(h>v){if(c){if(c[1]>=u)return}else c=[x,o];f=[x,u]}else{if(c){if(c[1]<o)return}else c=[x,u];f=[x,o]}}else if(st=(y+m)/2-(F=(h-v)/(m-y))*x,F<-1||F>1)if(h>v){if(c){if(c[1]>=u)return}else c=[(o-st)/F,o];f=[(u-st)/F,u]}else{if(c){if(c[1]<o)return}else c=[(u-st)/F,u];f=[(o-st)/F,o]}else if(y<m){if(c){if(c[0]>=a)return}else c=[r,F*r+st];f=[a,F*a+st]}else{if(c){if(c[0]<r)return}else c=[a,F*a+st];f=[r,F*r+st]}return n[0]=c,n[1]=f,!0}function Th(n,r){var o=n.site,a=r.left,u=r.right;return o===u&&(u=a,a=o),u?Math.atan2(u[1]-a[1],u[0]-a[0]):(o===a?(a=r[1],u=r[0]):(a=r[0],u=r[1]),Math.atan2(a[0]-u[0],u[1]-a[1]))}function Ol(n,r){return r[+(r.left!==n.site)]}function Dh(n,r){return r[+(r.left===n.site)]}var Iu,Rl=[];function Gh(){va(this),this.x=this.y=this.arc=this.site=this.cy=null}function ds(n){var r=n.P,o=n.N;if(r&&o){var a=r.site,u=n.site,f=o.site;if(a!==f){var c=u[0],p=u[1],g=a[0]-c,h=a[1]-p,y=f[0]-c,v=f[1]-p,m=2*(g*v-h*y);if(!(m>=-Uh)){var x=g*g+h*h,Z=y*y+v*v,F=(v*x-h*Z)/m,st=(g*Z-y*x)/m,V=Rl.pop()||new Gh;V.arc=n,V.site=u,V.x=F+c,V.y=(V.cy=st+p)+Math.sqrt(F*F+st*st),n.circle=V;for(var D=null,Y=Bs._;Y;)if(V.y<Y.y||V.y===Y.y&&V.x<=Y.x){if(!Y.L){D=Y.P;break}Y=Y.L}else{if(!Y.R){D=Y;break}Y=Y.R}Bs.insert(D,V),D||(Iu=V)}}}}function ys(n){var r=n.circle;r&&(r.P||(Iu=r.N),Bs.remove(r),Rl.push(r),va(r),n.circle=null)}var Al=[];function kh(){va(this),this.edge=this.site=this.circle=null}function Tl(n){var r=Al.pop()||new kh;return r.site=n,r}function Pu(n){ys(n),vs.remove(n),Al.push(n),va(n)}function qh(n){var r=n.circle,o=r.x,a=r.cy,u=[o,a],f=n.P,c=n.N,p=[n];Pu(n);for(var g=f;g.circle&&Math.abs(o-g.circle.x)<Gn&&Math.abs(a-g.circle.cy)<Gn;)f=g.P,p.unshift(g),Pu(g),g=f;p.unshift(g),ys(g);for(var h=c;h.circle&&Math.abs(o-h.circle.x)<Gn&&Math.abs(a-h.circle.cy)<Gn;)c=h.N,p.push(h),Pu(h),h=c;p.push(h),ys(h);var v,y=p.length;for(v=1;v<y;++v)ma((h=p[v]).edge,(g=p[v-1]).site,h.site,u);(h=p[y-1]).edge=Ds((g=p[0]).site,h.site,null,u),ds(g),ds(h)}function zh(n){for(var a,u,f,c,r=n[0],o=n[1],p=vs._;p;)if((f=Dl(p,o)-r)>Gn)p=p.L;else{if(!((c=r-Xh(p,o))>Gn)){f>-Gn?(a=p.P,u=p):c>-Gn?(a=p,u=p.N):a=u=p;break}if(!p.R){a=p;break}p=p.R}!function Ah(n){Ei[n.index]={site:n,halfedges:[]}}(n);var g=Tl(n);if(vs.insert(a,g),a||u){if(a===u)return ys(a),u=Tl(a.site),vs.insert(g,u),g.edge=u.edge=Ds(a.site,g.site),ds(a),void ds(u);if(!u)return void(g.edge=Ds(a.site,g.site));ys(a),ys(u);var h=a.site,y=h[0],v=h[1],m=n[0]-y,x=n[1]-v,Z=u.site,F=Z[0]-y,st=Z[1]-v,V=2*(m*st-x*F),D=m*m+x*x,Y=F*F+st*st,pt=[(st*D-x*Y)/V+y,(m*Y-F*D)/V+v];ma(u.edge,h,Z,pt),g.edge=Ds(h,n,null,pt),u.edge=Ds(n,Z,null,pt),ds(a),ds(u)}}function Dl(n,r){var o=n.site,a=o[0],u=o[1],f=u-r;if(!f)return a;var c=n.P;if(!c)return-1/0;var p=(o=c.site)[0],g=o[1],h=g-r;if(!h)return p;var y=p-a,v=1/f-1/h,m=y/h;return v?(-m+Math.sqrt(m*m-2*v*(y*y/(-2*h)-g+h/2+u-f/2)))/v+a:(a+p)/2}function Xh(n,r){var o=n.N;if(o)return Dl(o,r);var a=n.site;return a[1]===r?a[0]:1/0}var vs,Ei,Bs,Rr,Gn=1e-6,Uh=1e-12;function Yh(n,r,o){return(n[0]-o[0])*(r[1]-n[1])-(n[0]-r[0])*(o[1]-n[1])}function Hh(n,r){return r[1]-n[1]||r[0]-n[0]}function Fl(n,r){var a,u,f,o=n.sort(Hh).pop();for(Rr=[],Ei=new Array(n.length),vs=new Ll,Bs=new Ll;;)if(f=Iu,o&&(!f||o[1]<f.y||o[1]===f.y&&o[0]<f.x))(o[0]!==a||o[1]!==u)&&(zh(o),a=o[0],u=o[1]),o=n.pop();else{if(!f)break;qh(f.arc)}if(function Fh(){for(var o,a,u,f,n=0,r=Ei.length;n<r;++n)if((o=Ei[n])&&(f=(a=o.halfedges).length)){var c=new Array(f),p=new Array(f);for(u=0;u<f;++u)c[u]=u,p[u]=Th(o,Rr[a[u]]);for(c.sort(function(g,h){return p[h]-p[g]}),u=0;u<f;++u)p[u]=a[c[u]];for(u=0;u<f;++u)a[u]=p[u]}}(),r){var c=+r[0][0],p=+r[0][1],g=+r[1][0],h=+r[1][1];(function Rh(n,r,o,a){for(var f,u=Rr.length;u--;)Oh(f=Rr[u],n,r,o,a)&&Lh(f,n,r,o,a)&&(Math.abs(f[0][0]-f[1][0])>Gn||Math.abs(f[0][1]-f[1][1])>Gn)||delete Rr[u]})(c,p,g,h),function Bh(n,r,o,a){var f,c,p,g,h,y,v,m,x,Z,F,st,u=Ei.length,V=!0;for(f=0;f<u;++f)if(c=Ei[f]){for(p=c.site,g=(h=c.halfedges).length;g--;)Rr[h[g]]||h.splice(g,1);for(g=0,y=h.length;g<y;)F=(Z=Dh(c,Rr[h[g]]))[0],st=Z[1],m=(v=Ol(c,Rr[h[++g%y]]))[0],x=v[1],(Math.abs(F-m)>Gn||Math.abs(st-x)>Gn)&&(h.splice(g,0,Rr.push(Fs(p,Z,Math.abs(F-n)<Gn&&a-st>Gn?[n,Math.abs(m-n)<Gn?x:a]:Math.abs(st-a)<Gn&&o-F>Gn?[Math.abs(x-a)<Gn?m:o,a]:Math.abs(F-o)<Gn&&st-r>Gn?[o,Math.abs(m-o)<Gn?x:r]:Math.abs(st-r)<Gn&&F-n>Gn?[Math.abs(x-r)<Gn?m:n,r]:null))-1),++y);y&&(V=!1)}if(V){var D,Y,pt,ct=1/0;for(f=0,V=null;f<u;++f)(c=Ei[f])&&(pt=(D=(p=c.site)[0]-n)*D+(Y=p[1]-r)*Y)<ct&&(ct=pt,V=c);if(V){var _t=[n,r],vt=[n,a],It=[o,a],tt=[o,r];V.halfedges.push(Rr.push(Fs(p=V.site,_t,vt))-1,Rr.push(Fs(p,vt,It))-1,Rr.push(Fs(p,It,tt))-1,Rr.push(Fs(p,tt,_t))-1)}}for(f=0;f<u;++f)(c=Ei[f])&&(c.halfedges.length||delete Ei[f])}(c,p,g,h)}this.edges=Rr,this.cells=Ei,vs=Bs=Rr=Ei=null}function Go(){return new _a}function _a(){this.reset()}Fl.prototype={constructor:Fl,polygons:function(){var n=this.edges;return this.cells.map(function(r){var o=r.halfedges.map(function(a){return Ol(r,n[a])});return o.data=r.site.data,o})},triangles:function(){var n=[],r=this.edges;return this.cells.forEach(function(o,a){if(p=(f=o.halfedges).length)for(var f,p,g,u=o.site,c=-1,h=r[f[p-1]],y=h.left===u?h.right:h.left;++c<p;)g=y,y=(h=r[f[c]]).left===u?h.right:h.left,g&&y&&a<g.index&&a<y.index&&Yh(u,g,y)<0&&n.push([u.data,g.data,y.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,r,o){for(var u,p,a=this,f=a._found||0,c=a.cells.length;!(p=a.cells[f]);)if(++f>=c)return null;var g=n-p.site[0],h=r-p.site[1],y=g*g+h*h;do{p=a.cells[u=f],f=null,p.halfedges.forEach(function(v){var m=a.edges[v],x=m.left;if(x!==p.site&&x||(x=m.right)){var Z=n-x[0],F=r-x[1],st=Z*Z+F*F;st<y&&(y=st,f=x.index)}})}while(null!==f);return a._found=u,null==o||y<=o*o?p.site:null}},W(9855),W(770),_a.prototype={constructor:_a,reset:function(){this.s=this.t=0},add:function(n){Zl(xa,n,this.t),Zl(this,xa.s,this.s),this.s?this.t+=xa.t:this.s=xa.t},valueOf:function(){return this.s}};var xa=new _a;function Zl(n,r,o){var a=n.s=r+o,u=a-r;n.t=r-(a-u)+(o-u)}var Yn=Math.PI,ai=Yn/2,ms=2*Yn,Dn=Yn/180,Gs=(Math,Math.atan),_s=Math.atan2,cn=Math.cos,rn=(Math,Math,Math,Math,Math,Math.sin),Eo=(Math,Math.sqrt);Math;function xs(n){return n>1?ai:n<-1?-ai:Math.asin(n)}function Gu(n,r){return[n>Yn?n-ms:n<-Yn?n+ms:n,r]}function Ef(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}Go(),Go(),Go(),Gu.invert=Gu,function Ip(n){1===n.length&&(n=function Pp(n){return function(r,o){return Ef(n(r),o)}}(n))}(Ef),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Go();function rl(){}function Zf(n){return function(r,o){var a=cn(r),u=cn(o),f=n(a*u);return[f*u*rn(r),f*rn(o)]}}function Vs(n){return function(r,o){var a=Eo(r*r+o*o),u=n(a),f=rn(u),c=cn(u);return[_s(r*f,a*c),xs(a&&o*f/a)]}}function ol(n,r){return[n,r]}Go(),Go(),Go(),Go(),function Yf(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}(4.5),rl.prototype={constructor:rl,point:function(n,r){this.stream.point(n,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},cn(30*Dn),function Hf(n){return function(r){var o=new rl;for(var a in n)o[a]=n[a];return o.stream=r,o}}({point:function(n,r){this.stream.point(n*Dn,r*Dn)}}),Zf(function(n){return Eo(2/(1+n))}).invert=Vs(function(n){return 2*xs(n/2)}),Zf(function(n){return(n=function op(n){return n>1?0:n<-1?Yn:Math.acos(n)}(n))&&n/rn(n)}).invert=Vs(function(n){return n}),ol.invert=ol,Vs(Gs),Vs(xs),Vs(function(n){return 2*Gs(n)});var vg=W(2340),sl=W(6090);let mg=(()=>{class n{constructor(){this.mapbox=et,this.distancia=0,this.mapbox.accessToken=vg.N.KeyMapBox}generarMapa(){this.map=new et.Map({container:"map",style:"mapbox://sprites/mapbox/outdoors-v12",zoom:13,center:[-64.73349858433076,-21.53250712718626]}),this.map.on("load",()=>{this.map.resize()})}crearPunto(o,a){this.map.on("click",u=>{const f=u.lngLat.lng,c=u.lngLat.lat;this.CalcularDistancia(o,{lng:f,lat:c}).then(p=>{console.log(p.distanceTurf),this.markerDestino?this.markerDestino.setLngLat([f,c]):this.markerDestino=new et.Marker({element:a}).setLngLat([f,c]).addTo(this.map),(new et.Popup).setLngLat([f,c]).setHTML(`<div class="popup"> <span>Aproximadamente ${p.distanceTurf.toFixed(2)} km</span></div>`).addTo(this.map),this.printRuta(p.route)})})}miubicacion(){return sl.b.getCurrentPosition({enableHighAccuracy:!0})}crearmarkerOrigen(o,a,u,f){this.markerOrigen?this.markerOrigen.setLngLat([o,a]):this.markerOrigen=new et.Marker({draggable:u,element:f}).setLngLat([o,a]).addTo(this.map)}checkPermisos(){return sl.b.checkPermissions()}printRuta(o){return(0,rt.mG)(this,void 0,void 0,function*(){const a={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:o,type:"LineString"}}]};this.map.getSource("route")?this.map.getSource("route").setData(a):(this.map.addSource("route",{type:"geojson",lineMetrics:!0,data:a}),this.map.addLayer({type:"line",source:"route",id:"route-id",layout:{"line-join":"round","line-cap":"round"},paint:{"line-gradient":["interpolate",["linear"],["line-progress"],0,"#4747F4",.5,"#4747F4",.6,"#7B47F4",1,"#7B47F4"],"line-width":5}}))})}modMap(o){this.map.setStyle(o)}centerMap(o,a){this.map.setCenter([o,a])}createPopup(){return new et.Popup({closeOnClick:!1}).setHTML("<h1>Hello World!</h1>")}CalcularDistancia(o,a){return(0,rt.mG)(this,void 0,void 0,function*(){const p=(yield(yield fetch(`https://api.mapbox.com/directions/v5/mapbox/driving-traffic/${o.lng},${o.lat};${Number(a.lng)},${Number(a.lat)}?steps=true&geometries=geojson&access_token=${et.accessToken}`,{method:"GET"})).json()).routes[0].geometry.coordinates;return{distanceTurf:aa(k(p),{units:"kilometers"}),route:p}})}solicitarPermiso(){return(0,rt.mG)(this,void 0,void 0,function*(){return yield sl.b.requestPermissions()})}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=T.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var oo=W(4556);function _g(n,r){if(1&n){const o=T.EpF();T.TgZ(0,"div",9)(1,"h1"),T._uU(2,"Mapas"),T.qZA(),T.TgZ(3,"ion-list",10)(4,"ion-item",11),T.NdJ("click",function(){T.CHM(o);const u=T.oxw(),f=T.MAs(6);return T.KtG(u.cambiarMapa(f,"mapbox://styles/mapbox/satellite-streets-v12"))}),T.TgZ(5,"ion-avatar",12),T._UZ(6,"img",13),T.qZA(),T.TgZ(7,"ion-label"),T._uU(8,"MapBox Satelite"),T.qZA()(),T.TgZ(9,"ion-item",11),T.NdJ("click",function(){T.CHM(o);const u=T.oxw(),f=T.MAs(6);return T.KtG(u.cambiarMapa(f,"mapbox://styles/mapbox/outdoors-v12"))}),T.TgZ(10,"ion-avatar",12),T._UZ(11,"img",14),T.qZA(),T.TgZ(12,"ion-label"),T._uU(13,"MapBox Outdoors"),T.qZA()(),T.TgZ(14,"ion-item",11),T.NdJ("click",function(){T.CHM(o);const u=T.oxw(),f=T.MAs(6);return T.KtG(u.cambiarMapa(f,"mapbox://styles/mapbox/dark-v11"))}),T.TgZ(15,"ion-avatar",12),T._UZ(16,"img",15),T.qZA(),T.TgZ(17,"ion-label"),T._uU(18,"MapBox Dark"),T.qZA()(),T.TgZ(19,"ion-item",11),T.NdJ("click",function(){T.CHM(o);const u=T.oxw(),f=T.MAs(6);return T.KtG(u.cambiarMapa(f,"mapbox://styles/mapbox/light-v11"))}),T.TgZ(20,"ion-avatar",12),T._UZ(21,"img",16),T.qZA(),T.TgZ(22,"ion-label"),T._uU(23,"MapBox light"),T.qZA()()()()}}function xg(n,r){if(1&n){const o=T.EpF();T.TgZ(0,"div",9)(1,"h1"),T._uU(2,"Permisos"),T.qZA(),T.TgZ(3,"h5"),T._uU(4,"\xbf Permitir acceso a "),T._UZ(5,"br"),T._uU(6," tu ubicacion actual?"),T.qZA()(),T.TgZ(7,"div",17)(8,"ion-button",18),T.NdJ("click",function(){T.CHM(o);const u=T.oxw(),f=T.MAs(9);return T.KtG(u.miubicacion(f))}),T._uU(9," aceptar "),T.qZA(),T.TgZ(10,"ion-button",19),T.NdJ("click",function(){T.CHM(o),T.oxw();const u=T.MAs(9);return T.KtG(u.dismiss())}),T._uU(11," cancelar "),T.qZA()()}}const Eg=[{path:"",component:(()=>{class n{constructor(o,a,u,f){this._mapbox=o,this.loadingCtrl=a,this.toastCtrl=u,this.renderer=f}ngOnInit(){this._mapbox.generarMapa()}miubicacion(o){this._mapbox.checkPermisos().then(()=>{this._mapbox.solicitarPermiso().then(a=>{if("granted"==a.coarseLocation){let u=this.renderer.createElement("div");this.renderer.addClass(u,"markerOrigen");let f=this.renderer.createElement("div");this.renderer.addClass(f,"markerDestino"),this.showLoading("Cargando Ubicacion"),this._mapbox.miubicacion().then(c=>{const p=c.coords.longitude,g=c.coords.latitude;this._mapbox.centerMap(p,g),this._mapbox.crearmarkerOrigen(p,g,!1,u),this._mapbox.crearPunto({lng:p,lat:g},f),this.loading.dismiss(),o.dismiss()}).catch(c=>{console.log("se produjo el siguiente error "+c.message),o.dismiss(),this.mensaje("Ocurrio un error inesperado intentelo nuevamente",2e3,"close-circle-outline","animate__animated animate__fadeIn","danger")})}else"denied"==a.coarseLocation&&(o.dismiss(),this.mensaje("Se denego el permiso de ubicacion",2e3,"close-circle-outline","animate__animated animate__fadeIn","danger"))}).catch(a=>{console.log("se produjo el siguiente error "+a.message),o.dismiss(),this.mensaje(a.message,2e3,"close-circle-outline","animate__animated animate__fadeIn","danger")})}).catch(a=>{console.log("se producjo el siguiente error "+a.message),o.dismiss(),this.mensaje("habilite el GPS para tener acceso a la ubicacion",2e3,"navigate-outline","animate__animated animate__fadeIn","danger")})}showLoading(o){return(0,rt.mG)(this,void 0,void 0,function*(){this.loading=yield this.loadingCtrl.create({message:o}),this.loading.present()})}cambiarMapa(o,a){this._mapbox.modMap(a),o.dismiss()}mensaje(o,a,u,f,c){return(0,rt.mG)(this,void 0,void 0,function*(){yield(yield this.toastCtrl.create({message:o,icon:u,cssClass:f,duration:a,position:"top",color:c})).present()})}}return n.\u0275fac=function(o){return new(o||n)(T.Y36(mg),T.Y36(oo.HT),T.Y36(oo.yF),T.Y36(T.Qsj))},n.\u0275cmp=T.Xpm({type:n,selectors:[["app-distancia-page"]],decls:11,vars:0,consts:[["id","map"],["id","openPermisions","shape","round",1,"btn-ubicacion","btn"],["name","navigate-outline","slot","icon-only","color","primary"],["id","open-custom-dialog","shape","round",1,"btn","btn-capas"],["name","layers-outline","color","primary"],["id","example-modal","trigger","open-custom-dialog"],["modal",""],["id","example-modal","trigger","openPermisions"],["modalPermissions",""],[1,"wrapper"],["lines","none"],["button","true","detail","false",3,"click"],["slot","start"],["src","../../../../../assets/img/maps/satelite.png"],["src","../../../../../assets/img/maps/outdoors.png"],["src","../../../../../assets/img/maps/dark.png"],["src","../../../../../assets/img/maps/light.png"],[1,"buttons-modal"],["fill","solid","color","primary",3,"click"],["fill","clear","color","medium",3,"click"]],template:function(o,a){1&o&&(T._UZ(0,"div",0),T.TgZ(1,"ion-button",1),T._UZ(2,"ion-icon",2),T.qZA(),T.TgZ(3,"ion-button",3),T._UZ(4,"ion-icon",4),T.qZA(),T.TgZ(5,"ion-modal",5,6),T.YNc(7,_g,24,0,"ng-template"),T.qZA(),T.TgZ(8,"ion-modal",7,8),T.YNc(10,xg,12,0,"ng-template"),T.qZA())},dependencies:[oo.BJ,oo.YG,oo.gu,oo.Ie,oo.Q$,oo.q_,oo.ki],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100vh}.btn[_ngcontent-%COMP%]{--background: #000}.btn-ubicacion[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px}.btn-capas[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}ion-modal#example-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#example-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;padding:10px}.markerOrigen[_ngcontent-%COMP%]{background-size:cover;width:20px;height:20px;border-radius:50%;cursor:pointer;background-color:#4747f4}.markerDestino[_ngcontent-%COMP%]{background-size:cover;width:20px;height:20px;border-radius:50%;cursor:pointer;background-color:#7b47f4}.buttons-modal[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;margin-bottom:5px}"]}),n})()}];let wg=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=T.oAB({type:n}),n.\u0275inj=T.cJS({imports:[H.Bz.forChild(Eg),H.Bz]}),n})(),Ig=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=T.oAB({type:n}),n.\u0275inj=T.cJS({imports:[q.ez,wg,oo.Pc]}),n})()},1503:(At,gt,W)=>{"use strict";var H=W(3269);function rt(T){var et=[1/0,1/0,-1/0,-1/0];return H.coordEach(T,function(j){et[0]>j[0]&&(et[0]=j[0]),et[1]>j[1]&&(et[1]=j[1]),et[2]<j[0]&&(et[2]=j[0]),et[3]<j[1]&&(et[3]=j[1])}),et}rt.default=rt,gt.Z=rt},8275:(At,gt)=>{"use strict";function W(K,Q,A){void 0===A&&(A={});var Ot={type:"Feature"};return(0===A.id||A.id)&&(Ot.id=A.id),A.bbox&&(Ot.bbox=A.bbox),Ot.properties=Q||{},Ot.geometry=K,Ot}function H(K,Q,A){if(void 0===A&&(A={}),!K)throw new Error("coordinates is required");if(!Array.isArray(K))throw new Error("coordinates must be an Array");if(K.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!O(K[0])||!O(K[1]))throw new Error("coordinates must contain numbers");return W({type:"Point",coordinates:K},Q,A)}function T(K,Q,A){void 0===A&&(A={});for(var Ot=0,Pt=K;Ot<Pt.length;Ot++){var X=Pt[Ot];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var at=0;at<X[X.length-1].length;at++)if(X[X.length-1][at]!==X[0][at])throw new Error("First and last Position are not equivalent.")}return W({type:"Polygon",coordinates:K},Q,A)}function j(K,Q,A){if(void 0===A&&(A={}),K.length<2)throw new Error("coordinates must be an array of two or more positions");return W({type:"LineString",coordinates:K},Q,A)}function mt(K,Q){void 0===Q&&(Q={});var A={type:"FeatureCollection"};return Q.id&&(A.id=Q.id),Q.bbox&&(A.bbox=Q.bbox),A.features=K,A}function Lt(K,Q,A){return void 0===A&&(A={}),W({type:"MultiLineString",coordinates:K},Q,A)}function Rt(K,Q,A){return void 0===A&&(A={}),W({type:"MultiPoint",coordinates:K},Q,A)}function Ct(K,Q,A){return void 0===A&&(A={}),W({type:"MultiPolygon",coordinates:K},Q,A)}function Dt(K,Q){void 0===Q&&(Q="kilometers");var A=gt.factors[Q];if(!A)throw new Error(Q+" units is invalid");return K*A}function I(K,Q){void 0===Q&&(Q="kilometers");var A=gt.factors[Q];if(!A)throw new Error(Q+" units is invalid");return K/A}function L(K){return K%(2*Math.PI)*180/Math.PI}function O(K){return!isNaN(K)&&null!==K&&!Array.isArray(K)}Object.defineProperty(gt,"__esModule",{value:!0}),gt.earthRadius=6371008.8,gt.factors={centimeters:100*gt.earthRadius,centimetres:100*gt.earthRadius,degrees:gt.earthRadius/111325,feet:3.28084*gt.earthRadius,inches:39.37*gt.earthRadius,kilometers:gt.earthRadius/1e3,kilometres:gt.earthRadius/1e3,meters:gt.earthRadius,metres:gt.earthRadius,miles:gt.earthRadius/1609.344,millimeters:1e3*gt.earthRadius,millimetres:1e3*gt.earthRadius,nauticalmiles:gt.earthRadius/1852,radians:1,yards:1.0936*gt.earthRadius},gt.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/gt.earthRadius,yards:1.0936133},gt.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},gt.feature=W,gt.geometry=function q(K,Q,A){switch(void 0===A&&(A={}),K){case"Point":return H(Q).geometry;case"LineString":return j(Q).geometry;case"Polygon":return T(Q).geometry;case"MultiPoint":return Rt(Q).geometry;case"MultiLineString":return Lt(Q).geometry;case"MultiPolygon":return Ct(Q).geometry;default:throw new Error(K+" is invalid")}},gt.point=H,gt.points=function rt(K,Q,A){return void 0===A&&(A={}),mt(K.map(function(Ot){return H(Ot,Q)}),A)},gt.polygon=T,gt.polygons=function et(K,Q,A){return void 0===A&&(A={}),mt(K.map(function(Ot){return T(Ot,Q)}),A)},gt.lineString=j,gt.lineStrings=function ut(K,Q,A){return void 0===A&&(A={}),mt(K.map(function(Ot){return j(Ot,Q)}),A)},gt.featureCollection=mt,gt.multiLineString=Lt,gt.multiPoint=Rt,gt.multiPolygon=Ct,gt.geometryCollection=function it(K,Q,A){return void 0===A&&(A={}),W({type:"GeometryCollection",geometries:K},Q,A)},gt.round=function yt(K,Q){if(void 0===Q&&(Q=0),Q&&!(Q>=0))throw new Error("precision must be a positive number");var A=Math.pow(10,Q||0);return Math.round(K*A)/A},gt.radiansToLength=Dt,gt.lengthToRadians=I,gt.lengthToDegrees=function k(K,Q){return L(I(K,Q))},gt.bearingToAzimuth=function N(K){var Q=K%360;return Q<0&&(Q+=360),Q},gt.radiansToDegrees=L,gt.degreesToRadians=function M(K){return K%360*Math.PI/180},gt.convertLength=function U(K,Q,A){if(void 0===Q&&(Q="kilometers"),void 0===A&&(A="kilometers"),!(K>=0))throw new Error("length must be a positive number");return Dt(I(K,Q),A)},gt.convertArea=function C(K,Q,A){if(void 0===Q&&(Q="meters"),void 0===A&&(A="kilometers"),!(K>=0))throw new Error("area must be a positive number");var Ot=gt.areaFactors[Q];if(!Ot)throw new Error("invalid original units");var Pt=gt.areaFactors[A];if(!Pt)throw new Error("invalid final units");return K/Ot*Pt},gt.isNumber=O,gt.isObject=function G(K){return!!K&&K.constructor===Object},gt.validateBBox=function w(K){if(!K)throw new Error("bbox is required");if(!Array.isArray(K))throw new Error("bbox must be an Array");if(4!==K.length&&6!==K.length)throw new Error("bbox must be an Array of 4 or 6 numbers");K.forEach(function(Q){if(!O(Q))throw new Error("bbox must only contain numbers")})},gt.validateId=function ht(K){if(!K)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof K))throw new Error("id must be a number or a string")}},1105:(At,gt,W)=>{var q=W(1356),H=W(3407),rt=W(2e3),T=W(2342),et=W(9235),j=W(2374),ut=Date.prototype.getTime;function Lt(it){return null==it}function Rt(it){return!(!it||"object"!=typeof it||"number"!=typeof it.length||"function"!=typeof it.copy||"function"!=typeof it.slice||it.length>0&&"number"!=typeof it[0])}At.exports=function mt(it,yt,Dt){var I=Dt||{};return!!(I.strict?rt(it,yt):it===yt)||(!it||!yt||"object"!=typeof it&&"object"!=typeof yt?I.strict?rt(it,yt):it==yt:function Ct(it,yt,Dt){var I,k;if(typeof it!=typeof yt||Lt(it)||Lt(yt)||it.prototype!==yt.prototype||H(it)!==H(yt))return!1;var N=T(it),L=T(yt);if(N!==L)return!1;if(N||L)return it.source===yt.source&&et(it)===et(yt);if(j(it)&&j(yt))return ut.call(it)===ut.call(yt);var M=Rt(it),U=Rt(yt);if(M!==U)return!1;if(M||U){if(it.length!==yt.length)return!1;for(I=0;I<it.length;I++)if(it[I]!==yt[I])return!1;return!0}if(typeof it!=typeof yt)return!1;try{var C=q(it),O=q(yt)}catch(G){return!1}if(C.length!==O.length)return!1;for(C.sort(),O.sort(),I=C.length-1;I>=0;I--)if(C[I]!=O[I])return!1;for(I=C.length-1;I>=0;I--)if(!mt(it[k=C[I]],yt[k],Dt))return!1;return!0}(it,yt,I))}},3269:(At,gt,W)=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});var q=W(8275);function H(M,U,C){if(null!==M)for(var O,G,w,ht,K,Q,A,X,Ot=0,Pt=0,at=M.type,J="FeatureCollection"===at,ot="Feature"===at,lt=J?M.features.length:1,z=0;z<lt;z++){K=(X=!!(A=J?M.features[z].geometry:ot?M.geometry:M)&&"GeometryCollection"===A.type)?A.geometries.length:1;for(var Nt=0;Nt<K;Nt++){var Mt=0,qt=0;if(null!==(ht=X?A.geometries[Nt]:A)){Q=ht.coordinates;var xt=ht.type;switch(Ot=!C||"Polygon"!==xt&&"MultiPolygon"!==xt?0:1,xt){case null:break;case"Point":if(!1===U(Q,Pt,z,Mt,qt))return!1;Pt++,Mt++;break;case"LineString":case"MultiPoint":for(O=0;O<Q.length;O++){if(!1===U(Q[O],Pt,z,Mt,qt))return!1;Pt++,"MultiPoint"===xt&&Mt++}"LineString"===xt&&Mt++;break;case"Polygon":case"MultiLineString":for(O=0;O<Q.length;O++){for(G=0;G<Q[O].length-Ot;G++){if(!1===U(Q[O][G],Pt,z,Mt,qt))return!1;Pt++}"MultiLineString"===xt&&Mt++,"Polygon"===xt&&qt++}"Polygon"===xt&&Mt++;break;case"MultiPolygon":for(O=0;O<Q.length;O++){for(qt=0,G=0;G<Q[O].length;G++){for(w=0;w<Q[O][G].length-Ot;w++){if(!1===U(Q[O][G][w],Pt,z,Mt,qt))return!1;Pt++}qt++}Mt++}break;case"GeometryCollection":for(O=0;O<ht.geometries.length;O++)if(!1===H(ht.geometries[O],U,C))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(M,U){var C;switch(M.type){case"FeatureCollection":for(C=0;C<M.features.length&&!1!==U(M.features[C].properties,C);C++);break;case"Feature":U(M.properties,0)}}function j(M,U){if("Feature"===M.type)U(M,0);else if("FeatureCollection"===M.type)for(var C=0;C<M.features.length&&!1!==U(M.features[C],C);C++);}function Lt(M,U){var C,O,G,w,ht,K,Q,A,Ot,Pt,X=0,at="FeatureCollection"===M.type,J="Feature"===M.type,ot=at?M.features.length:1;for(C=0;C<ot;C++){for(A=at?M.features[C].properties:J?M.properties:{},Ot=at?M.features[C].bbox:J?M.bbox:void 0,Pt=at?M.features[C].id:J?M.id:void 0,ht=(Q=!!(K=at?M.features[C].geometry:J?M.geometry:M)&&"GeometryCollection"===K.type)?K.geometries.length:1,G=0;G<ht;G++)if(null!==(w=Q?K.geometries[G]:K))switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===U(w,X,A,Ot,Pt))return!1;break;case"GeometryCollection":for(O=0;O<w.geometries.length;O++)if(!1===U(w.geometries[O],X,A,Ot,Pt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===U(null,X,A,Ot,Pt))return!1;X++}}function Ct(M,U){Lt(M,function(C,O,G,w,ht){var Q,K=null===C?null:C.type;switch(K){case null:case"Point":case"LineString":case"Polygon":return!1!==U(q.feature(C,G,{bbox:w,id:ht}),O,0)&&void 0}switch(K){case"MultiPoint":Q="Point";break;case"MultiLineString":Q="LineString";break;case"MultiPolygon":Q="Polygon"}for(var A=0;A<C.coordinates.length;A++)if(!1===U(q.feature({type:Q,coordinates:C.coordinates[A]},G),O,A))return!1})}function yt(M,U){Ct(M,function(C,O,G){var w=0;if(C.geometry){var ht=C.geometry.type;if("Point"!==ht&&"MultiPoint"!==ht){var K,Q=0,A=0,Ot=0;if(!1===H(C,function(Pt,X,at,J,ot){if(void 0===K||O>Q||J>A||ot>Ot)return K=Pt,Q=O,A=J,Ot=ot,void(w=0);var lt=q.lineString([K,Pt],C.properties);if(!1===U(lt,O,G,ot,w))return!1;w++,K=Pt}))return!1}}})}function I(M,U){if(!M)throw new Error("geojson is required");Ct(M,function(C,O,G){if(null!==C.geometry){var ht=C.geometry.coordinates;switch(C.geometry.type){case"LineString":if(!1===U(C,O,G,0,0))return!1;break;case"Polygon":for(var K=0;K<ht.length;K++)if(!1===U(q.lineString(ht[K],C.properties),O,G,K))return!1}}})}gt.coordAll=function mt(M){var U=[];return H(M,function(C){U.push(C)}),U},gt.coordEach=H,gt.coordReduce=function rt(M,U,C,O){var G=C;return H(M,function(w,ht,K,Q,A){G=0===ht&&void 0===C?w:U(G,w,ht,K,Q,A)},O),G},gt.featureEach=j,gt.featureReduce=function ut(M,U,C){var O=C;return j(M,function(G,w){O=0===w&&void 0===C?G:U(O,G,w)}),O},gt.findPoint=function L(M,U){if(!q.isObject(U=U||{}))throw new Error("options is invalid");var K,C=U.featureIndex||0,O=U.multiFeatureIndex||0,G=U.geometryIndex||0,w=U.coordIndex||0,ht=U.properties;switch(M.type){case"FeatureCollection":C<0&&(C=M.features.length+C),ht=ht||M.features[C].properties,K=M.features[C].geometry;break;case"Feature":ht=ht||M.properties,K=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":K=M;break;default:throw new Error("geojson is invalid")}if(null===K)return null;var Q=K.coordinates;switch(K.type){case"Point":return q.point(Q,ht,U);case"MultiPoint":return O<0&&(O=Q.length+O),q.point(Q[O],ht,U);case"LineString":return w<0&&(w=Q.length+w),q.point(Q[w],ht,U);case"Polygon":return G<0&&(G=Q.length+G),w<0&&(w=Q[G].length+w),q.point(Q[G][w],ht,U);case"MultiLineString":return O<0&&(O=Q.length+O),w<0&&(w=Q[O].length+w),q.point(Q[O][w],ht,U);case"MultiPolygon":return O<0&&(O=Q.length+O),G<0&&(G=Q[O].length+G),w<0&&(w=Q[O][G].length-w),q.point(Q[O][G][w],ht,U)}throw new Error("geojson is invalid")},gt.findSegment=function N(M,U){if(!q.isObject(U=U||{}))throw new Error("options is invalid");var K,C=U.featureIndex||0,O=U.multiFeatureIndex||0,G=U.geometryIndex||0,w=U.segmentIndex||0,ht=U.properties;switch(M.type){case"FeatureCollection":C<0&&(C=M.features.length+C),ht=ht||M.features[C].properties,K=M.features[C].geometry;break;case"Feature":ht=ht||M.properties,K=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":K=M;break;default:throw new Error("geojson is invalid")}if(null===K)return null;var Q=K.coordinates;switch(K.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=Q.length+w-1),q.lineString([Q[w],Q[w+1]],ht,U);case"Polygon":return G<0&&(G=Q.length+G),w<0&&(w=Q[G].length+w-1),q.lineString([Q[G][w],Q[G][w+1]],ht,U);case"MultiLineString":return O<0&&(O=Q.length+O),w<0&&(w=Q[O].length+w-1),q.lineString([Q[O][w],Q[O][w+1]],ht,U);case"MultiPolygon":return O<0&&(O=Q.length+O),G<0&&(G=Q[O].length+G),w<0&&(w=Q[O][G].length-w-1),q.lineString([Q[O][G][w],Q[O][G][w+1]],ht,U)}throw new Error("geojson is invalid")},gt.flattenEach=Ct,gt.flattenReduce=function it(M,U,C){var O=C;return Ct(M,function(G,w,ht){O=0===w&&0===ht&&void 0===C?G:U(O,G,w,ht)}),O},gt.geomEach=Lt,gt.geomReduce=function Rt(M,U,C){var O=C;return Lt(M,function(G,w,ht,K,Q){O=0===w&&void 0===C?G:U(O,G,w,ht,K,Q)}),O},gt.lineEach=I,gt.lineReduce=function k(M,U,C){var O=C;return I(M,function(G,w,ht,K){O=0===w&&void 0===C?G:U(O,G,w,ht,K)}),O},gt.propEach=T,gt.propReduce=function et(M,U,C){var O=C;return T(M,function(G,w){O=0===w&&void 0===C?G:U(O,G,w)}),O},gt.segmentEach=yt,gt.segmentReduce=function Dt(M,U,C){var O=C,G=!1;return yt(M,function(w,ht,K,Q,A){O=!1===G&&void 0===C?w:U(O,w,ht,K,Q,A),G=!0}),O}},5834:(At,gt,W)=>{"use strict";var q=W(5203),H=W(5685),rt=H(q("String.prototype.indexOf"));At.exports=function(et,j){var ut=q(et,!!j);return"function"==typeof ut&&rt(et,".prototype.")>-1?H(ut):ut}},5685:(At,gt,W)=>{"use strict";var q=W(4444),H=W(5203),rt=H("%Function.prototype.apply%"),T=H("%Function.prototype.call%"),et=H("%Reflect.apply%",!0)||q.call(T,rt),j=H("%Object.getOwnPropertyDescriptor%",!0),ut=H("%Object.defineProperty%",!0),mt=H("%Math.max%");if(ut)try{ut({},"a",{value:1})}catch(Rt){ut=null}At.exports=function(Ct){var it=et(q,T,arguments);return j&&ut&&j(it,"length").configurable&&ut(it,"length",{value:1+mt(0,Ct.length-(arguments.length-1))}),it};var Lt=function(){return et(q,rt,arguments)};ut?ut(At.exports,"apply",{value:Lt}):At.exports.apply=Lt},1335:(At,gt,W)=>{"use strict";var q=W(3156),H=W(7253),rt=W(3870),T=W(7563).orient2d;function et(C,O,G){O=Math.max(0,void 0===O?2:O),G=G||0;var w=function Dt(C){for(var O=C[0],G=C[0],w=C[0],ht=C[0],K=0;K<C.length;K++){var Q=C[K];Q[0]<O[0]&&(O=Q),Q[0]>w[0]&&(w=Q),Q[1]<G[1]&&(G=Q),Q[1]>ht[1]&&(ht=Q)}var A=[O,G,w,ht],Ot=A.slice();for(K=0;K<C.length;K++)rt(C[K],A)||Ot.push(C[K]);return function U(C){C.sort(M);for(var O=[],G=0;G<C.length;G++){for(;O.length>=2&&Ct(O[O.length-2],O[O.length-1],C[G])<=0;)O.pop();O.push(C[G])}for(var w=[],ht=C.length-1;ht>=0;ht--){for(;w.length>=2&&Ct(w[w.length-2],w[w.length-1],C[ht])<=0;)w.pop();w.push(C[ht])}return w.pop(),O.pop(),O.concat(w)}(Ot)}(C),ht=new q(16);ht.toBBox=function(qt){return{minX:qt[0],minY:qt[1],maxX:qt[0],maxY:qt[1]}},ht.compareMinX=function(qt,xt){return qt[0]-xt[0]},ht.compareMinY=function(qt,xt){return qt[1]-xt[1]},ht.load(C);for(var A,K=[],Q=0;Q<w.length;Q++){var Ot=w[Q];ht.remove(Ot),A=I(Ot,A),K.push(A)}var Pt=new q(16);for(Q=0;Q<K.length;Q++)Pt.insert(yt(K[Q]));for(var X=O*O,at=G*G;K.length;){var J=K.shift(),ot=J.p,lt=J.next.p,z=k(ot,lt);if(!(z<at)){var Nt=z/X;(Ot=j(ht,J.prev.p,ot,lt,J.next.next.p,Nt,Pt))&&Math.min(k(Ot,ot),k(Ot,lt))<=Nt&&(K.push(J),K.push(I(Ot,J)),ht.remove(Ot),Pt.remove(J),Pt.insert(yt(J)),Pt.insert(yt(J.next)))}}J=A;var Mt=[];do{Mt.push(J.p),J=J.next}while(J!==A);return Mt.push(J.p),Mt}function j(C,O,G,w,ht,K,Q){for(var A=new H([],ut),Ot=C.data;Ot;){for(var Pt=0;Pt<Ot.children.length;Pt++){var X=Ot.children[Pt],at=Ot.leaf?N(X,G,w):mt(G,w,X);at>K||A.push({node:X,dist:at})}for(;A.length&&!A.peek().node.children;){var J=A.pop(),ot=J.node,lt=N(ot,O,G),z=N(ot,w,ht);if(J.dist<lt&&J.dist<z&&Rt(G,ot,Q)&&Rt(w,ot,Q))return ot}(Ot=A.pop())&&(Ot=Ot.node)}return null}function ut(C,O){return C.dist-O.dist}function mt(C,O,G){if(Lt(C,G)||Lt(O,G))return 0;var w=L(C[0],C[1],O[0],O[1],G.minX,G.minY,G.maxX,G.minY);if(0===w)return 0;var ht=L(C[0],C[1],O[0],O[1],G.minX,G.minY,G.minX,G.maxY);if(0===ht)return 0;var K=L(C[0],C[1],O[0],O[1],G.maxX,G.minY,G.maxX,G.maxY);if(0===K)return 0;var Q=L(C[0],C[1],O[0],O[1],G.minX,G.maxY,G.maxX,G.maxY);return 0===Q?0:Math.min(w,ht,K,Q)}function Lt(C,O){return C[0]>=O.minX&&C[0]<=O.maxX&&C[1]>=O.minY&&C[1]<=O.maxY}function Rt(C,O,G){for(var w=Math.min(C[0],O[0]),ht=Math.min(C[1],O[1]),K=Math.max(C[0],O[0]),Q=Math.max(C[1],O[1]),A=G.search({minX:w,minY:ht,maxX:K,maxY:Q}),Ot=0;Ot<A.length;Ot++)if(it(A[Ot].p,A[Ot].next.p,C,O))return!1;return!0}function Ct(C,O,G){return T(C[0],C[1],O[0],O[1],G[0],G[1])}function it(C,O,G,w){return C!==w&&O!==G&&Ct(C,O,G)>0!=Ct(C,O,w)>0&&Ct(G,w,C)>0!=Ct(G,w,O)>0}function yt(C){var O=C.p,G=C.next.p;return C.minX=Math.min(O[0],G[0]),C.minY=Math.min(O[1],G[1]),C.maxX=Math.max(O[0],G[0]),C.maxY=Math.max(O[1],G[1]),C}function I(C,O){var G={p:C,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return O?(G.next=O.next,G.prev=O,O.next.prev=G,O.next=G):(G.prev=G,G.next=G),G}function k(C,O){var G=C[0]-O[0],w=C[1]-O[1];return G*G+w*w}function N(C,O,G){var w=O[0],ht=O[1],K=G[0]-w,Q=G[1]-ht;if(0!==K||0!==Q){var A=((C[0]-w)*K+(C[1]-ht)*Q)/(K*K+Q*Q);A>1?(w=G[0],ht=G[1]):A>0&&(w+=K*A,ht+=Q*A)}return(K=C[0]-w)*K+(Q=C[1]-ht)*Q}function L(C,O,G,w,ht,K,Q,A){var Qt,te,Jt,ee,Ot=G-C,Pt=w-O,X=Q-ht,at=A-K,J=C-ht,ot=O-K,lt=Ot*Ot+Pt*Pt,z=Ot*X+Pt*at,Nt=X*X+at*at,Mt=Ot*J+Pt*ot,qt=X*J+at*ot,xt=lt*Nt-z*z,Vt=xt,Bt=xt;0===xt?(te=0,Vt=1,ee=qt,Bt=Nt):(ee=lt*qt-z*Mt,(te=z*qt-Nt*Mt)<0?(te=0,ee=qt,Bt=Nt):te>Vt&&(te=Vt,ee=qt+z,Bt=Nt)),ee<0?(ee=0,-Mt<0?te=0:-Mt>lt?te=Vt:(te=-Mt,Vt=lt)):ee>Bt&&(ee=Bt,-Mt+z<0?te=0:-Mt+z>lt?te=Vt:(te=-Mt+z,Vt=lt));var fe=(1-(Jt=0===ee?0:ee/Bt))*ht+Jt*Q-((1-(Qt=0===te?0:te/Vt))*C+Qt*G),dt=(1-Jt)*K+Jt*A-((1-Qt)*O+Qt*w);return fe*fe+dt*dt}function M(C,O){return C[0]===O[0]?C[1]-O[1]:C[0]-O[0]}H.default&&(H=H.default),At.exports=et,At.exports.default=et},3156:function(At){At.exports=function(){"use strict";function gt(I,k,N,L,M){!function U(C,O,G,w,ht){for(;w>G;){if(w-G>600){var K=w-G+1,Q=O-G+1,A=Math.log(K),Ot=.5*Math.exp(2*A/3),Pt=.5*Math.sqrt(A*Ot*(K-Ot)/K)*(Q-K/2<0?-1:1);U(C,O,Math.max(G,Math.floor(O-Q*Ot/K+Pt)),Math.min(w,Math.floor(O+(K-Q)*Ot/K+Pt)),ht)}var J=C[O],ot=G,lt=w;for(W(C,G,O),ht(C[w],J)>0&&W(C,G,w);ot<lt;){for(W(C,ot,lt),ot++,lt--;ht(C[ot],J)<0;)ot++;for(;ht(C[lt],J)>0;)lt--}0===ht(C[G],J)?W(C,G,lt):W(C,++lt,w),lt<=O&&(G=lt+1),O<=lt&&(w=lt-1)}}(I,k,N||0,L||I.length-1,M||q)}function W(I,k,N){var L=I[k];I[k]=I[N],I[N]=L}function q(I,k){return I<k?-1:I>k?1:0}var H=function(I){void 0===I&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function rt(I,k,N){if(!N)return k.indexOf(I);for(var L=0;L<k.length;L++)if(N(I,k[L]))return L;return-1}function T(I,k){et(I,0,I.children.length,k,I)}function et(I,k,N,L,M){M||(M=yt(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var U=k;U<N;U++){var C=I.children[U];j(M,I.leaf?L(C):C)}return M}function j(I,k){return I.minX=Math.min(I.minX,k.minX),I.minY=Math.min(I.minY,k.minY),I.maxX=Math.max(I.maxX,k.maxX),I.maxY=Math.max(I.maxY,k.maxY),I}function ut(I,k){return I.minX-k.minX}function mt(I,k){return I.minY-k.minY}function Lt(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function Rt(I){return I.maxX-I.minX+(I.maxY-I.minY)}function Ct(I,k){return I.minX<=k.minX&&I.minY<=k.minY&&k.maxX<=I.maxX&&k.maxY<=I.maxY}function it(I,k){return k.minX<=I.maxX&&k.minY<=I.maxY&&k.maxX>=I.minX&&k.maxY>=I.minY}function yt(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Dt(I,k,N,L,M){for(var U=[k,N];U.length;)if(!((N=U.pop())-(k=U.pop())<=L)){var C=k+Math.ceil((N-k)/L/2)*L;gt(I,C,k,N,M),U.push(k,C,C,N)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(I){var k=this.data,N=[];if(!it(I,k))return N;for(var L=this.toBBox,M=[];k;){for(var U=0;U<k.children.length;U++){var C=k.children[U],O=k.leaf?L(C):C;it(I,O)&&(k.leaf?N.push(C):Ct(I,O)?this._all(C,N):M.push(C))}k=M.pop()}return N},H.prototype.collides=function(I){var k=this.data;if(!it(I,k))return!1;for(var N=[];k;){for(var L=0;L<k.children.length;L++){var M=k.children[L],U=k.leaf?this.toBBox(M):M;if(it(I,U)){if(k.leaf||Ct(I,U))return!0;N.push(M)}}k=N.pop()}return!1},H.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var k=0;k<I.length;k++)this.insert(I[k]);return this}var N=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var L=this.data;this.data=N,N=L}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},H.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},H.prototype.clear=function(){return this.data=yt([]),this},H.prototype.remove=function(I,k){if(!I)return this;for(var N,L,M,U=this.data,C=this.toBBox(I),O=[],G=[];U||O.length;){if(U||(U=O.pop(),L=O[O.length-1],N=G.pop(),M=!0),U.leaf){var w=rt(I,U.children,k);if(-1!==w)return U.children.splice(w,1),O.push(U),this._condense(O),this}M||U.leaf||!Ct(U,C)?L?(N++,U=L.children[N],M=!1):U=null:(O.push(U),G.push(N),N=0,L=U,U=U.children[0])}return this},H.prototype.toBBox=function(I){return I},H.prototype.compareMinX=function(I,k){return I.minX-k.minX},H.prototype.compareMinY=function(I,k){return I.minY-k.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(I){return this.data=I,this},H.prototype._all=function(I,k){for(var N=[];I;)I.leaf?k.push.apply(k,I.children):N.push.apply(N,I.children),I=N.pop();return k},H.prototype._build=function(I,k,N,L){var M,U=N-k+1,C=this._maxEntries;if(U<=C)return T(M=yt(I.slice(k,N+1)),this.toBBox),M;L||(L=Math.ceil(Math.log(U)/Math.log(C)),C=Math.ceil(U/Math.pow(C,L-1))),(M=yt([])).leaf=!1,M.height=L;var O=Math.ceil(U/C),G=O*Math.ceil(Math.sqrt(C));Dt(I,k,N,G,this.compareMinX);for(var w=k;w<=N;w+=G){var ht=Math.min(w+G-1,N);Dt(I,w,ht,O,this.compareMinY);for(var K=w;K<=ht;K+=O){var Q=Math.min(K+O-1,ht);M.children.push(this._build(I,K,Q,L-1))}}return T(M,this.toBBox),M},H.prototype._chooseSubtree=function(I,k,N,L){for(;L.push(k),!k.leaf&&L.length-1!==N;){for(var M=1/0,U=1/0,C=void 0,O=0;O<k.children.length;O++){var G=k.children[O],w=Lt(G),ht=(K=I,Q=G,(Math.max(Q.maxX,K.maxX)-Math.min(Q.minX,K.minX))*(Math.max(Q.maxY,K.maxY)-Math.min(Q.minY,K.minY))-w);ht<U?(U=ht,M=w<M?w:M,C=G):ht===U&&w<M&&(M=w,C=G)}k=C||k.children[0]}var K,Q;return k},H.prototype._insert=function(I,k,N){var L=N?I:this.toBBox(I),M=[],U=this._chooseSubtree(L,this.data,k,M);for(U.children.push(I),j(U,L);k>=0&&M[k].children.length>this._maxEntries;)this._split(M,k),k--;this._adjustParentBBoxes(L,M,k)},H.prototype._split=function(I,k){var N=I[k],L=N.children.length,M=this._minEntries;this._chooseSplitAxis(N,M,L);var U=this._chooseSplitIndex(N,M,L),C=yt(N.children.splice(U,N.children.length-U));C.height=N.height,C.leaf=N.leaf,T(N,this.toBBox),T(C,this.toBBox),k?I[k-1].children.push(C):this._splitRoot(N,C)},H.prototype._splitRoot=function(I,k){this.data=yt([I,k]),this.data.height=I.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(I,k,N){for(var L,M,U,C,O,G,w,ht=1/0,K=1/0,Q=k;Q<=N-k;Q++){var A=et(I,0,Q,this.toBBox),Ot=et(I,Q,N,this.toBBox),Pt=(M=A,U=Ot,void 0,void 0,void 0,void 0,C=Math.max(M.minX,U.minX),O=Math.max(M.minY,U.minY),G=Math.min(M.maxX,U.maxX),w=Math.min(M.maxY,U.maxY),Math.max(0,G-C)*Math.max(0,w-O)),X=Lt(A)+Lt(Ot);Pt<ht?(ht=Pt,L=Q,K=X<K?X:K):Pt===ht&&X<K&&(K=X,L=Q)}return L||N-k},H.prototype._chooseSplitAxis=function(I,k,N){var L=I.leaf?this.compareMinX:ut,M=I.leaf?this.compareMinY:mt;this._allDistMargin(I,k,N,L)<this._allDistMargin(I,k,N,M)&&I.children.sort(L)},H.prototype._allDistMargin=function(I,k,N,L){I.children.sort(L);for(var M=this.toBBox,U=et(I,0,k,M),C=et(I,N-k,N,M),O=Rt(U)+Rt(C),G=k;G<N-k;G++){var w=I.children[G];j(U,I.leaf?M(w):w),O+=Rt(U)}for(var ht=N-k-1;ht>=k;ht--){var K=I.children[ht];j(C,I.leaf?M(K):K),O+=Rt(C)}return O},H.prototype._adjustParentBBoxes=function(I,k,N){for(var L=N;L>=0;L--)j(k[L],I)},H.prototype._condense=function(I){for(var k=I.length-1,N=void 0;k>=0;k--)0===I[k].children.length?k>0?(N=I[k-1].children).splice(N.indexOf(I[k]),1):this.clear():T(I[k],this.toBBox)},H}()},2358:(At,gt,W)=>{"use strict";var q=W(1356),H="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),rt=Object.prototype.toString,T=Array.prototype.concat,et=Object.defineProperty,ut=W(7027)(),mt=et&&ut,Lt=function(Ct,it,yt,Dt){if(it in Ct)if(!0===Dt){if(Ct[it]===yt)return}else if(!function(Ct){return"function"==typeof Ct&&"[object Function]"===rt.call(Ct)}(Dt)||!Dt())return;mt?et(Ct,it,{configurable:!0,enumerable:!1,value:yt,writable:!0}):Ct[it]=yt},Rt=function(Ct,it){var yt=arguments.length>2?arguments[2]:{},Dt=q(it);H&&(Dt=T.call(Dt,Object.getOwnPropertySymbols(it)));for(var I=0;I<Dt.length;I+=1)Lt(Ct,Dt[I],it[Dt[I]],yt[Dt[I]])};Rt.supportsDescriptors=!!mt,At.exports=Rt},1817:At=>{function gt(W,q,H,rt){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(W,q,H,rt)}gt.prototype.run=function(W,q,H,rt){this._init(W,q,H,rt);for(var T=0;T<this._datasetLength;T++)if(1!==this._visited[T]){this._visited[T]=1;var et=this._regionQuery(T);if(et.length<this.minPts)this.noise.push(T);else{var j=this.clusters.length;this.clusters.push([]),this._addToCluster(T,j),this._expandCluster(j,et)}}return this.clusters},gt.prototype._init=function(W,q,H,rt){if(W){if(!(W instanceof Array))throw Error("Dataset must be of type array, "+typeof W+" given");this.dataset=W,this.clusters=[],this.noise=[],this._datasetLength=W.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}q&&(this.epsilon=q),H&&(this.minPts=H),rt&&(this.distance=rt)},gt.prototype._expandCluster=function(W,q){for(var H=0;H<q.length;H++){var rt=q[H];if(1!==this._visited[rt]){this._visited[rt]=1;var T=this._regionQuery(rt);T.length>=this.minPts&&(q=this._mergeArrays(q,T))}1!==this._assigned[rt]&&this._addToCluster(rt,W)}},gt.prototype._addToCluster=function(W,q){this.clusters[q].push(W),this._assigned[W]=1},gt.prototype._regionQuery=function(W){for(var q=[],H=0;H<this._datasetLength;H++)this.distance(this.dataset[W],this.dataset[H])<this.epsilon&&q.push(H);return q},gt.prototype._mergeArrays=function(W,q){for(var H=q.length,rt=0;rt<H;rt++){var T=q[rt];W.indexOf(T)<0&&W.push(T)}return W},gt.prototype._euclideanDistance=function(W,q){for(var H=0,rt=Math.min(W.length,q.length);rt--;)H+=(W[rt]-q[rt])*(W[rt]-q[rt]);return Math.sqrt(H)},At.exports&&(At.exports=gt)},4273:At=>{function gt(W,q,H){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(W,q,H)}gt.prototype.init=function(W,q,H){this.assignments=[],this.centroids=[],typeof W<"u"&&(this.dataset=W),typeof q<"u"&&(this.k=q),typeof H<"u"&&(this.distance=H)},gt.prototype.run=function(W,q){this.init(W,q);for(var H=this.dataset.length,rt=0;rt<this.k;rt++)this.centroids[rt]=this.randomCentroid();for(var T=!0;T;){T=this.assign();for(var et=0;et<this.k;et++){for(var j=new Array(Rt),ut=0,mt=0;mt<Rt;mt++)j[mt]=0;for(var Lt=0;Lt<H;Lt++){var Rt=this.dataset[Lt].length;if(et===this.assignments[Lt]){for(mt=0;mt<Rt;mt++)j[mt]+=this.dataset[Lt][mt];ut++}}if(ut>0){for(mt=0;mt<Rt;mt++)j[mt]/=ut;this.centroids[et]=j}else this.centroids[et]=this.randomCentroid(),T=!0}}return this.getClusters()},gt.prototype.randomCentroid=function(){var q,H,W=this.dataset.length-1;do{H=Math.round(Math.random()*W),q=this.dataset[H]}while(this.centroids.indexOf(q)>=0);return q},gt.prototype.assign=function(){for(var H,W=!1,q=this.dataset.length,rt=0;rt<q;rt++)(H=this.argmin(this.dataset[rt],this.centroids,this.distance))!=this.assignments[rt]&&(this.assignments[rt]=H,W=!0);return W},gt.prototype.getClusters=function(){for(var q,W=new Array(this.k),H=0;H<this.assignments.length;H++)typeof W[q=this.assignments[H]]>"u"&&(W[q]=[]),W[q].push(H);return W},gt.prototype.argmin=function(W,q,H){for(var j,rt=Number.MAX_VALUE,T=0,et=q.length,ut=0;ut<et;ut++)(j=H(W,q[ut]))<rt&&(rt=j,T=ut);return T},gt.prototype.distance=function(W,q){for(var H=0,rt=Math.min(W.length,q.length);rt--;){var T=W[rt]-q[rt];H+=T*T}return Math.sqrt(H)},At.exports&&(At.exports=gt)},8680:(At,gt,W)=>{if(At.exports)var q=W(8759);function H(rt,T,et,j){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(rt,T,et,j)}H.prototype.run=function(rt,T,et,j){this._init(rt,T,et,j);for(var ut=0,mt=this.dataset.length;ut<mt;ut++)if(1!==this._processed[ut]){this._processed[ut]=1,this.clusters.push([ut]);var Lt=this.clusters.length-1;this._orderedList.push(ut);var Rt=new q(null,null,"asc"),Ct=this._regionQuery(ut);void 0!==this._distanceToCore(ut)&&(this._updateQueue(ut,Ct,Rt),this._expandCluster(Lt,Rt))}return this.clusters},H.prototype.getReachabilityPlot=function(){for(var rt=[],T=0,et=this._orderedList.length;T<et;T++){var j=this._orderedList[T];rt.push([j,this._reachability[j]])}return rt},H.prototype._init=function(rt,T,et,j){if(rt){if(!(rt instanceof Array))throw Error("Dataset must be of type array, "+typeof rt+" given");this.dataset=rt,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}T&&(this.epsilon=T),et&&(this.minPts=et),j&&(this.distance=j)},H.prototype._updateQueue=function(rt,T,et){var j=this;this._coreDistance=this._distanceToCore(rt),T.forEach(function(ut){if(void 0===j._processed[ut]){var mt=j.distance(j.dataset[rt],j.dataset[ut]),Lt=Math.max(j._coreDistance,mt);void 0===j._reachability[ut]?(j._reachability[ut]=Lt,et.insert(ut,Lt)):Lt<j._reachability[ut]&&(j._reachability[ut]=Lt,et.remove(ut),et.insert(ut,Lt))}})},H.prototype._expandCluster=function(rt,T){for(var et=T.getElements(),j=0,ut=et.length;j<ut;j++){var mt=et[j];if(void 0===this._processed[mt]){var Lt=this._regionQuery(mt);this._processed[mt]=1,this.clusters[rt].push(mt),this._orderedList.push(mt),void 0!==this._distanceToCore(mt)&&(this._updateQueue(mt,Lt,T),this._expandCluster(rt,T))}}},H.prototype._distanceToCore=function(rt){for(var T=this.epsilon,et=0;et<T;et++)if(this._regionQuery(rt,et).length>=this.minPts)return et},H.prototype._regionQuery=function(rt,T){T=T||this.epsilon;for(var et=[],j=0,ut=this.dataset.length;j<ut;j++)this.distance(this.dataset[rt],this.dataset[j])<T&&et.push(j);return et},H.prototype._euclideanDistance=function(rt,T){for(var et=0,j=Math.min(rt.length,T.length);j--;)et+=(rt[j]-T[j])*(rt[j]-T[j]);return Math.sqrt(et)},At.exports&&(At.exports=H)},8759:At=>{function gt(W,q,H){this._queue=[],this._priorities=[],this._sorting="desc",this._init(W,q,H)}gt.prototype.insert=function(W,q){for(var H=this._queue.length,rt=H;rt--;){var T=this._priorities[rt];"desc"===this._sorting?q>T&&(H=rt):q<T&&(H=rt)}this._insertAt(W,q,H)},gt.prototype.remove=function(W){for(var q=this._queue.length;q--;)if(W===this._queue[q]){this._queue.splice(q,1),this._priorities.splice(q,1);break}},gt.prototype.forEach=function(W){this._queue.forEach(W)},gt.prototype.getElements=function(){return this._queue},gt.prototype.getElementPriority=function(W){return this._priorities[W]},gt.prototype.getPriorities=function(){return this._priorities},gt.prototype.getElementsWithPriorities=function(){for(var W=[],q=0,H=this._queue.length;q<H;q++)W.push([this._queue[q],this._priorities[q]]);return W},gt.prototype._init=function(W,q,H){if(W&&q){if(this._queue=[],this._priorities=[],W.length!==q.length)throw new Error("Arrays must have the same length");for(var rt=0;rt<W.length;rt++)this.insert(W[rt],q[rt])}H&&(this._sorting=H)},gt.prototype._insertAt=function(W,q,H){this._queue.length===H?(this._queue.push(W),this._priorities.push(q)):(this._queue.splice(H,0,W),this._priorities.splice(H,0,q))},At.exports&&(At.exports=gt)},7470:(At,gt,W)=>{At.exports&&(At.exports={DBSCAN:W(1817),KMEANS:W(4273),OPTICS:W(8680),PriorityQueue:W(8759)})},5469:At=>{"use strict";function gt(X,at,J){J=J||2;var Mt,qt,xt,Qt,te,Jt,ee,ot=at&&at.length,lt=ot?at[0]*J:X.length,z=W(X,0,lt,J,!0),Nt=[];if(!z||z.next===z.prev)return Nt;if(ot&&(z=function ut(X,at,J,ot){var z,Nt,xt,lt=[];for(z=0,Nt=at.length;z<Nt;z++)(xt=W(X,at[z]*ot,z<Nt-1?at[z+1]*ot:X.length,ot,!1))===xt.next&&(xt.steiner=!0),lt.push(I(xt));for(lt.sort(mt),z=0;z<lt.length;z++)J=Lt(lt[z],J);return J}(X,at,z,J)),X.length>80*J){Mt=xt=X[0],qt=Qt=X[1];for(var Vt=J;Vt<lt;Vt+=J)(te=X[Vt])<Mt&&(Mt=te),(Jt=X[Vt+1])<qt&&(qt=Jt),te>xt&&(xt=te),Jt>Qt&&(Qt=Jt);ee=0!==(ee=Math.max(xt-Mt,Qt-qt))?32767/ee:0}return H(z,Nt,J,Mt,qt,ee,0),Nt}function W(X,at,J,ot,lt){var z,Nt;if(lt===Pt(X,at,J,ot)>0)for(z=at;z<J;z+=ot)Nt=Q(z,X[z],X[z+1],Nt);else for(z=J-ot;z>=at;z-=ot)Nt=Q(z,X[z],X[z+1],Nt);return Nt&&M(Nt,Nt.next)&&(A(Nt),Nt=Nt.next),Nt}function q(X,at){if(!X)return X;at||(at=X);var ot,J=X;do{if(ot=!1,J.steiner||!M(J,J.next)&&0!==L(J.prev,J,J.next))J=J.next;else{if(A(J),(J=at=J.prev)===J.next)break;ot=!0}}while(ot||J!==at);return at}function H(X,at,J,ot,lt,z,Nt){if(X){!Nt&&z&&function it(X,at,J,ot){var lt=X;do{0===lt.z&&(lt.z=Dt(lt.x,lt.y,at,J,ot)),lt.prevZ=lt.prev,lt.nextZ=lt.next,lt=lt.next}while(lt!==X);lt.prevZ.nextZ=null,lt.prevZ=null,function yt(X){var at,J,ot,lt,z,Nt,Mt,qt,xt=1;do{for(J=X,X=null,z=null,Nt=0;J;){for(Nt++,ot=J,Mt=0,at=0;at<xt&&(Mt++,ot=ot.nextZ);at++);for(qt=xt;Mt>0||qt>0&&ot;)0!==Mt&&(0===qt||!ot||J.z<=ot.z)?(lt=J,J=J.nextZ,Mt--):(lt=ot,ot=ot.nextZ,qt--),z?z.nextZ=lt:X=lt,lt.prevZ=z,z=lt;J=ot}z.nextZ=null,xt*=2}while(Nt>1)}(lt)}(X,ot,lt,z);for(var qt,xt,Mt=X;X.prev!==X.next;)if(qt=X.prev,xt=X.next,z?T(X,ot,lt,z):rt(X))at.push(qt.i/J|0),at.push(X.i/J|0),at.push(xt.i/J|0),A(X),X=xt.next,Mt=xt.next;else if((X=xt)===Mt){Nt?1===Nt?H(X=et(q(X),at,J),at,J,ot,lt,z,2):2===Nt&&j(X,at,J,ot,lt,z):H(q(X),at,J,ot,lt,z,1);break}}}function rt(X){var at=X.prev,J=X,ot=X.next;if(L(at,J,ot)>=0)return!1;for(var lt=at.x,z=J.x,Nt=ot.x,Mt=at.y,qt=J.y,xt=ot.y,Qt=lt<z?lt<Nt?lt:Nt:z<Nt?z:Nt,te=Mt<qt?Mt<xt?Mt:xt:qt<xt?qt:xt,Jt=lt>z?lt>Nt?lt:Nt:z>Nt?z:Nt,ee=Mt>qt?Mt>xt?Mt:xt:qt>xt?qt:xt,Vt=ot.next;Vt!==at;){if(Vt.x>=Qt&&Vt.x<=Jt&&Vt.y>=te&&Vt.y<=ee&&k(lt,Mt,z,qt,Nt,xt,Vt.x,Vt.y)&&L(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.next}return!0}function T(X,at,J,ot){var lt=X.prev,z=X,Nt=X.next;if(L(lt,z,Nt)>=0)return!1;for(var Mt=lt.x,qt=z.x,xt=Nt.x,Qt=lt.y,te=z.y,Jt=Nt.y,ee=Mt<qt?Mt<xt?Mt:xt:qt<xt?qt:xt,Vt=Qt<te?Qt<Jt?Qt:Jt:te<Jt?te:Jt,Bt=Mt>qt?Mt>xt?Mt:xt:qt>xt?qt:xt,hn=Qt>te?Qt>Jt?Qt:Jt:te>Jt?te:Jt,sn=Dt(ee,Vt,at,J,ot),pn=Dt(Bt,hn,at,J,ot),ie=X.prevZ,fe=X.nextZ;ie&&ie.z>=sn&&fe&&fe.z<=pn;){if(ie.x>=ee&&ie.x<=Bt&&ie.y>=Vt&&ie.y<=hn&&ie!==lt&&ie!==Nt&&k(Mt,Qt,qt,te,xt,Jt,ie.x,ie.y)&&L(ie.prev,ie,ie.next)>=0||(ie=ie.prevZ,fe.x>=ee&&fe.x<=Bt&&fe.y>=Vt&&fe.y<=hn&&fe!==lt&&fe!==Nt&&k(Mt,Qt,qt,te,xt,Jt,fe.x,fe.y)&&L(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;ie&&ie.z>=sn;){if(ie.x>=ee&&ie.x<=Bt&&ie.y>=Vt&&ie.y<=hn&&ie!==lt&&ie!==Nt&&k(Mt,Qt,qt,te,xt,Jt,ie.x,ie.y)&&L(ie.prev,ie,ie.next)>=0)return!1;ie=ie.prevZ}for(;fe&&fe.z<=pn;){if(fe.x>=ee&&fe.x<=Bt&&fe.y>=Vt&&fe.y<=hn&&fe!==lt&&fe!==Nt&&k(Mt,Qt,qt,te,xt,Jt,fe.x,fe.y)&&L(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function et(X,at,J){var ot=X;do{var lt=ot.prev,z=ot.next.next;!M(lt,z)&&U(lt,ot,ot.next,z)&&w(lt,z)&&w(z,lt)&&(at.push(lt.i/J|0),at.push(ot.i/J|0),at.push(z.i/J|0),A(ot),A(ot.next),ot=X=z),ot=ot.next}while(ot!==X);return q(ot)}function j(X,at,J,ot,lt,z){var Nt=X;do{for(var Mt=Nt.next.next;Mt!==Nt.prev;){if(Nt.i!==Mt.i&&N(Nt,Mt)){var qt=K(Nt,Mt);return Nt=q(Nt,Nt.next),qt=q(qt,qt.next),H(Nt,at,J,ot,lt,z,0),void H(qt,at,J,ot,lt,z,0)}Mt=Mt.next}Nt=Nt.next}while(Nt!==X)}function mt(X,at){return X.x-at.x}function Lt(X,at){var J=function Rt(X,at){var Nt,J=at,ot=X.x,lt=X.y,z=-1/0;do{if(lt<=J.y&&lt>=J.next.y&&J.next.y!==J.y){var Mt=J.x+(lt-J.y)*(J.next.x-J.x)/(J.next.y-J.y);if(Mt<=ot&&Mt>z&&(z=Mt,Nt=J.x<J.next.x?J:J.next,Mt===ot))return Nt}J=J.next}while(J!==at);if(!Nt)return null;var Jt,qt=Nt,xt=Nt.x,Qt=Nt.y,te=1/0;J=Nt;do{ot>=J.x&&J.x>=xt&&ot!==J.x&&k(lt<Qt?ot:z,lt,xt,Qt,lt<Qt?z:ot,lt,J.x,J.y)&&(Jt=Math.abs(lt-J.y)/(ot-J.x),w(J,X)&&(Jt<te||Jt===te&&(J.x>Nt.x||J.x===Nt.x&&Ct(Nt,J)))&&(Nt=J,te=Jt)),J=J.next}while(J!==qt);return Nt}(X,at);if(!J)return at;var ot=K(J,X);return q(ot,ot.next),q(J,J.next)}function Ct(X,at){return L(X.prev,X,at.prev)<0&&L(at.next,X,X.next)<0}function Dt(X,at,J,ot,lt){return(X=1431655765&((X=858993459&((X=252645135&((X=16711935&((X=(X-J)*lt|0)|X<<8))|X<<4))|X<<2))|X<<1))|(at=1431655765&((at=858993459&((at=252645135&((at=16711935&((at=(at-ot)*lt|0)|at<<8))|at<<4))|at<<2))|at<<1))<<1}function I(X){var at=X,J=X;do{(at.x<J.x||at.x===J.x&&at.y<J.y)&&(J=at),at=at.next}while(at!==X);return J}function k(X,at,J,ot,lt,z,Nt,Mt){return(lt-Nt)*(at-Mt)>=(X-Nt)*(z-Mt)&&(X-Nt)*(ot-Mt)>=(J-Nt)*(at-Mt)&&(J-Nt)*(z-Mt)>=(lt-Nt)*(ot-Mt)}function N(X,at){return X.next.i!==at.i&&X.prev.i!==at.i&&!function G(X,at){var J=X;do{if(J.i!==X.i&&J.next.i!==X.i&&J.i!==at.i&&J.next.i!==at.i&&U(J,J.next,X,at))return!0;J=J.next}while(J!==X);return!1}(X,at)&&(w(X,at)&&w(at,X)&&function ht(X,at){var J=X,ot=!1,lt=(X.x+at.x)/2,z=(X.y+at.y)/2;do{J.y>z!=J.next.y>z&&J.next.y!==J.y&&lt<(J.next.x-J.x)*(z-J.y)/(J.next.y-J.y)+J.x&&(ot=!ot),J=J.next}while(J!==X);return ot}(X,at)&&(L(X.prev,X,at.prev)||L(X,at.prev,at))||M(X,at)&&L(X.prev,X,X.next)>0&&L(at.prev,at,at.next)>0)}function L(X,at,J){return(at.y-X.y)*(J.x-at.x)-(at.x-X.x)*(J.y-at.y)}function M(X,at){return X.x===at.x&&X.y===at.y}function U(X,at,J,ot){var lt=O(L(X,at,J)),z=O(L(X,at,ot)),Nt=O(L(J,ot,X)),Mt=O(L(J,ot,at));return!!(lt!==z&&Nt!==Mt||0===lt&&C(X,J,at)||0===z&&C(X,ot,at)||0===Nt&&C(J,X,ot)||0===Mt&&C(J,at,ot))}function C(X,at,J){return at.x<=Math.max(X.x,J.x)&&at.x>=Math.min(X.x,J.x)&&at.y<=Math.max(X.y,J.y)&&at.y>=Math.min(X.y,J.y)}function O(X){return X>0?1:X<0?-1:0}function w(X,at){return L(X.prev,X,X.next)<0?L(X,at,X.next)>=0&&L(X,X.prev,at)>=0:L(X,at,X.prev)<0||L(X,X.next,at)<0}function K(X,at){var J=new Ot(X.i,X.x,X.y),ot=new Ot(at.i,at.x,at.y),lt=X.next,z=at.prev;return X.next=at,at.prev=X,J.next=lt,lt.prev=J,ot.next=J,J.prev=ot,z.next=ot,ot.prev=z,ot}function Q(X,at,J,ot){var lt=new Ot(X,at,J);return ot?(lt.next=ot.next,lt.prev=ot,ot.next.prev=lt,ot.next=lt):(lt.prev=lt,lt.next=lt),lt}function A(X){X.next.prev=X.prev,X.prev.next=X.next,X.prevZ&&(X.prevZ.nextZ=X.nextZ),X.nextZ&&(X.nextZ.prevZ=X.prevZ)}function Ot(X,at,J){this.i=X,this.x=at,this.y=J,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pt(X,at,J,ot){for(var lt=0,z=at,Nt=J-ot;z<J;z+=ot)lt+=(X[Nt]-X[z])*(X[z+1]+X[Nt+1]),Nt=z;return lt}At.exports=gt,At.exports.default=gt,gt.deviation=function(X,at,J,ot){var lt=at&&at.length,Nt=Math.abs(Pt(X,0,lt?at[0]*J:X.length,J));if(lt)for(var Mt=0,qt=at.length;Mt<qt;Mt++)Nt-=Math.abs(Pt(X,at[Mt]*J,Mt<qt-1?at[Mt+1]*J:X.length,J));var te=0;for(Mt=0;Mt<ot.length;Mt+=3){var Jt=ot[Mt]*J,ee=ot[Mt+1]*J,Vt=ot[Mt+2]*J;te+=Math.abs((X[Jt]-X[Vt])*(X[ee+1]-X[Jt+1])-(X[Jt]-X[ee])*(X[Vt+1]-X[Jt+1]))}return 0===Nt&&0===te?0:Math.abs((te-Nt)/Nt)},gt.flatten=function(X){for(var at=X[0][0].length,J={vertices:[],holes:[],dimensions:at},ot=0,lt=0;lt<X.length;lt++){for(var z=0;z<X[lt].length;z++)for(var Nt=0;Nt<at;Nt++)J.vertices.push(X[lt][z][Nt]);lt>0&&J.holes.push(ot+=X[lt-1].length)}return J}},6415:At=>{"use strict";var gt="Function.prototype.bind called on incompatible ",W=Array.prototype.slice,q=Object.prototype.toString,H="[object Function]";At.exports=function(T){var et=this;if("function"!=typeof et||q.call(et)!==H)throw new TypeError(gt+et);for(var ut,j=W.call(arguments,1),Lt=Math.max(0,et.length-j.length),Rt=[],Ct=0;Ct<Lt;Ct++)Rt.push("$"+Ct);if(ut=Function("binder","return function ("+Rt.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof ut){var yt=et.apply(this,j.concat(W.call(arguments)));return Object(yt)===yt?yt:this}return et.apply(T,j.concat(W.call(arguments)))}),et.prototype){var it=function(){};it.prototype=et.prototype,ut.prototype=new it,it.prototype=null}return ut}},4444:(At,gt,W)=>{"use strict";var q=W(6415);At.exports=Function.prototype.bind||q},9582:At=>{"use strict";var gt=function(){return"string"==typeof function(){}.name},W=Object.getOwnPropertyDescriptor;if(W)try{W([],"length")}catch(H){W=null}gt.functionsHaveConfigurableNames=function(){if(!gt()||!W)return!1;var rt=W(function(){},"name");return!!rt&&!!rt.configurable};var q=Function.prototype.bind;gt.boundFunctionsHaveNames=function(){return gt()&&"function"==typeof q&&""!==function(){}.bind().name},At.exports=gt},5013:(At,gt,W)=>{var q=W(8958),H=function(j){this.precision=j&&j.precision?j.precision:17,this.direction=!(!j||!j.direction)&&j.direction,this.pseudoNode=!(!j||!j.pseudoNode)&&j.pseudoNode,this.objectComparator=j&&j.objectComparator?j.objectComparator:et};function rt(j){return j.coordinates.map(function(ut){return{type:j.type.replace("Multi",""),coordinates:ut}})}function T(j,ut){return j.hasOwnProperty("coordinates")?j.coordinates.length===ut.coordinates.length:j.length===ut.length}function et(j,ut){return q(j,ut,{strict:!0})}H.prototype.compare=function(j,ut){if(j.type!==ut.type||!T(j,ut))return!1;switch(j.type){case"Point":return this.compareCoord(j.coordinates,ut.coordinates);case"LineString":return this.compareLine(j.coordinates,ut.coordinates,0,!1);case"Polygon":return this.comparePolygon(j,ut);case"Feature":return this.compareFeature(j,ut);default:if(0===j.type.indexOf("Multi")){var mt=this,Lt=rt(j),Rt=rt(ut);return Lt.every(function(Ct){return this.some(function(it){return mt.compare(Ct,it)})},Rt)}}return!1},H.prototype.compareCoord=function(j,ut){if(j.length!==ut.length)return!1;for(var mt=0;mt<j.length;mt++)if(j[mt].toFixed(this.precision)!==ut[mt].toFixed(this.precision))return!1;return!0},H.prototype.compareLine=function(j,ut,mt,Lt){if(!T(j,ut))return!1;var Rt=this.pseudoNode?j:this.removePseudo(j),Ct=this.pseudoNode?ut:this.removePseudo(ut);if(!Lt||this.compareCoord(Rt[0],Ct[0])||(Ct=this.fixStartIndex(Ct,Rt))){var it=this.compareCoord(Rt[mt],Ct[mt]);return this.direction||it?this.comparePath(Rt,Ct):!!this.compareCoord(Rt[mt],Ct[Ct.length-(1+mt)])&&this.comparePath(Rt.slice().reverse(),Ct)}},H.prototype.fixStartIndex=function(j,ut){for(var mt,Lt=-1,Rt=0;Rt<j.length;Rt++)if(this.compareCoord(j[Rt],ut[0])){Lt=Rt;break}return Lt>=0&&(mt=[].concat(j.slice(Lt,j.length),j.slice(1,Lt+1))),mt},H.prototype.comparePath=function(j,ut){var mt=this;return j.every(function(Lt,Rt){return mt.compareCoord(Lt,this[Rt])},ut)},H.prototype.comparePolygon=function(j,ut){if(this.compareLine(j.coordinates[0],ut.coordinates[0],1,!0)){var mt=j.coordinates.slice(1,j.coordinates.length),Lt=ut.coordinates.slice(1,ut.coordinates.length),Rt=this;return mt.every(function(Ct){return this.some(function(it){return Rt.compareLine(Ct,it,1,!0)})},Lt)}return!1},H.prototype.compareFeature=function(j,ut){return!(j.id!==ut.id||!this.objectComparator(j.properties,ut.properties)||!this.compareBBox(j,ut))&&this.compare(j.geometry,ut.geometry)},H.prototype.compareBBox=function(j,ut){return!!(!j.bbox&&!ut.bbox||j.bbox&&ut.bbox&&this.compareCoord(j.bbox,ut.bbox))},H.prototype.removePseudo=function(j){return j},At.exports=H},8958:(At,gt,W)=>{var q=W(1356),H=W(3407),rt=W(2e3),T=W(2342),et=W(9235),j=W(2374),ut=Date.prototype.getTime;function Lt(it){return null==it}function Rt(it){return!(!it||"object"!=typeof it||"number"!=typeof it.length||"function"!=typeof it.copy||"function"!=typeof it.slice||it.length>0&&"number"!=typeof it[0])}At.exports=function mt(it,yt,Dt){var I=Dt||{};return!!(I.strict?rt(it,yt):it===yt)||(!it||!yt||"object"!=typeof it&&"object"!=typeof yt?I.strict?rt(it,yt):it==yt:function Ct(it,yt,Dt){var I,k;if(typeof it!=typeof yt||Lt(it)||Lt(yt)||it.prototype!==yt.prototype||H(it)!==H(yt))return!1;var N=T(it),L=T(yt);if(N!==L)return!1;if(N||L)return it.source===yt.source&&et(it)===et(yt);if(j(it)&&j(yt))return ut.call(it)===ut.call(yt);var M=Rt(it),U=Rt(yt);if(M!==U)return!1;if(M||U){if(it.length!==yt.length)return!1;for(I=0;I<it.length;I++)if(it[I]!==yt[I])return!1;return!0}if(typeof it!=typeof yt)return!1;try{var C=q(it),O=q(yt)}catch(G){return!1}if(C.length!==O.length)return!1;for(C.sort(),O.sort(),I=C.length-1;I>=0;I--)if(C[I]!=O[I])return!1;for(I=C.length-1;I>=0;I--)if(!mt(it[k=C[I]],yt[k],Dt))return!1;return!0}(it,yt,I))}},5406:(At,gt,W)=>{var q=W(7192),H=W(8275),rt=W(3269),T=W(1503).Z,et=rt.featureEach,mt=H.featureCollection;function Lt(Rt){var Ct=new q(Rt);return Ct.insert=function(it){if("Feature"!==it.type)throw new Error("invalid feature");return it.bbox=it.bbox?it.bbox:T(it),q.prototype.insert.call(this,it)},Ct.load=function(it){var yt=[];return Array.isArray(it)?it.forEach(function(Dt){if("Feature"!==Dt.type)throw new Error("invalid features");Dt.bbox=Dt.bbox?Dt.bbox:T(Dt),yt.push(Dt)}):et(it,function(Dt){if("Feature"!==Dt.type)throw new Error("invalid features");Dt.bbox=Dt.bbox?Dt.bbox:T(Dt),yt.push(Dt)}),q.prototype.load.call(this,yt)},Ct.remove=function(it,yt){if("Feature"!==it.type)throw new Error("invalid feature");return it.bbox=it.bbox?it.bbox:T(it),q.prototype.remove.call(this,it,yt)},Ct.clear=function(){return q.prototype.clear.call(this)},Ct.search=function(it){var yt=q.prototype.search.call(this,this.toBBox(it));return mt(yt)},Ct.collides=function(it){return q.prototype.collides.call(this,this.toBBox(it))},Ct.all=function(){var it=q.prototype.all.call(this);return mt(it)},Ct.toJSON=function(){return q.prototype.toJSON.call(this)},Ct.fromJSON=function(it){return q.prototype.fromJSON.call(this,it)},Ct.toBBox=function(it){var yt;if(it.bbox)yt=it.bbox;else if(Array.isArray(it)&&4===it.length)yt=it;else if(Array.isArray(it)&&6===it.length)yt=[it[0],it[1],it[3],it[4]];else if("Feature"===it.type)yt=T(it);else{if("FeatureCollection"!==it.type)throw new Error("invalid geojson");yt=T(it)}return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},Ct}At.exports=Lt,At.exports.default=Lt},7192:function(At){At.exports=function(){"use strict";function gt(I,k,N,L,M){!function U(C,O,G,w,ht){for(;w>G;){if(w-G>600){var K=w-G+1,Q=O-G+1,A=Math.log(K),Ot=.5*Math.exp(2*A/3),Pt=.5*Math.sqrt(A*Ot*(K-Ot)/K)*(Q-K/2<0?-1:1);U(C,O,Math.max(G,Math.floor(O-Q*Ot/K+Pt)),Math.min(w,Math.floor(O+(K-Q)*Ot/K+Pt)),ht)}var J=C[O],ot=G,lt=w;for(W(C,G,O),ht(C[w],J)>0&&W(C,G,w);ot<lt;){for(W(C,ot,lt),ot++,lt--;ht(C[ot],J)<0;)ot++;for(;ht(C[lt],J)>0;)lt--}0===ht(C[G],J)?W(C,G,lt):W(C,++lt,w),lt<=O&&(G=lt+1),O<=lt&&(w=lt-1)}}(I,k,N||0,L||I.length-1,M||q)}function W(I,k,N){var L=I[k];I[k]=I[N],I[N]=L}function q(I,k){return I<k?-1:I>k?1:0}var H=function(I){void 0===I&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function rt(I,k,N){if(!N)return k.indexOf(I);for(var L=0;L<k.length;L++)if(N(I,k[L]))return L;return-1}function T(I,k){et(I,0,I.children.length,k,I)}function et(I,k,N,L,M){M||(M=yt(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var U=k;U<N;U++){var C=I.children[U];j(M,I.leaf?L(C):C)}return M}function j(I,k){return I.minX=Math.min(I.minX,k.minX),I.minY=Math.min(I.minY,k.minY),I.maxX=Math.max(I.maxX,k.maxX),I.maxY=Math.max(I.maxY,k.maxY),I}function ut(I,k){return I.minX-k.minX}function mt(I,k){return I.minY-k.minY}function Lt(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function Rt(I){return I.maxX-I.minX+(I.maxY-I.minY)}function Ct(I,k){return I.minX<=k.minX&&I.minY<=k.minY&&k.maxX<=I.maxX&&k.maxY<=I.maxY}function it(I,k){return k.minX<=I.maxX&&k.minY<=I.maxY&&k.maxX>=I.minX&&k.maxY>=I.minY}function yt(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Dt(I,k,N,L,M){for(var U=[k,N];U.length;)if(!((N=U.pop())-(k=U.pop())<=L)){var C=k+Math.ceil((N-k)/L/2)*L;gt(I,C,k,N,M),U.push(k,C,C,N)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(I){var k=this.data,N=[];if(!it(I,k))return N;for(var L=this.toBBox,M=[];k;){for(var U=0;U<k.children.length;U++){var C=k.children[U],O=k.leaf?L(C):C;it(I,O)&&(k.leaf?N.push(C):Ct(I,O)?this._all(C,N):M.push(C))}k=M.pop()}return N},H.prototype.collides=function(I){var k=this.data;if(!it(I,k))return!1;for(var N=[];k;){for(var L=0;L<k.children.length;L++){var M=k.children[L],U=k.leaf?this.toBBox(M):M;if(it(I,U)){if(k.leaf||Ct(I,U))return!0;N.push(M)}}k=N.pop()}return!1},H.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var k=0;k<I.length;k++)this.insert(I[k]);return this}var N=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var L=this.data;this.data=N,N=L}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},H.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},H.prototype.clear=function(){return this.data=yt([]),this},H.prototype.remove=function(I,k){if(!I)return this;for(var N,L,M,U=this.data,C=this.toBBox(I),O=[],G=[];U||O.length;){if(U||(U=O.pop(),L=O[O.length-1],N=G.pop(),M=!0),U.leaf){var w=rt(I,U.children,k);if(-1!==w)return U.children.splice(w,1),O.push(U),this._condense(O),this}M||U.leaf||!Ct(U,C)?L?(N++,U=L.children[N],M=!1):U=null:(O.push(U),G.push(N),N=0,L=U,U=U.children[0])}return this},H.prototype.toBBox=function(I){return I},H.prototype.compareMinX=function(I,k){return I.minX-k.minX},H.prototype.compareMinY=function(I,k){return I.minY-k.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(I){return this.data=I,this},H.prototype._all=function(I,k){for(var N=[];I;)I.leaf?k.push.apply(k,I.children):N.push.apply(N,I.children),I=N.pop();return k},H.prototype._build=function(I,k,N,L){var M,U=N-k+1,C=this._maxEntries;if(U<=C)return T(M=yt(I.slice(k,N+1)),this.toBBox),M;L||(L=Math.ceil(Math.log(U)/Math.log(C)),C=Math.ceil(U/Math.pow(C,L-1))),(M=yt([])).leaf=!1,M.height=L;var O=Math.ceil(U/C),G=O*Math.ceil(Math.sqrt(C));Dt(I,k,N,G,this.compareMinX);for(var w=k;w<=N;w+=G){var ht=Math.min(w+G-1,N);Dt(I,w,ht,O,this.compareMinY);for(var K=w;K<=ht;K+=O){var Q=Math.min(K+O-1,ht);M.children.push(this._build(I,K,Q,L-1))}}return T(M,this.toBBox),M},H.prototype._chooseSubtree=function(I,k,N,L){for(;L.push(k),!k.leaf&&L.length-1!==N;){for(var M=1/0,U=1/0,C=void 0,O=0;O<k.children.length;O++){var G=k.children[O],w=Lt(G),ht=(K=I,Q=G,(Math.max(Q.maxX,K.maxX)-Math.min(Q.minX,K.minX))*(Math.max(Q.maxY,K.maxY)-Math.min(Q.minY,K.minY))-w);ht<U?(U=ht,M=w<M?w:M,C=G):ht===U&&w<M&&(M=w,C=G)}k=C||k.children[0]}var K,Q;return k},H.prototype._insert=function(I,k,N){var L=N?I:this.toBBox(I),M=[],U=this._chooseSubtree(L,this.data,k,M);for(U.children.push(I),j(U,L);k>=0&&M[k].children.length>this._maxEntries;)this._split(M,k),k--;this._adjustParentBBoxes(L,M,k)},H.prototype._split=function(I,k){var N=I[k],L=N.children.length,M=this._minEntries;this._chooseSplitAxis(N,M,L);var U=this._chooseSplitIndex(N,M,L),C=yt(N.children.splice(U,N.children.length-U));C.height=N.height,C.leaf=N.leaf,T(N,this.toBBox),T(C,this.toBBox),k?I[k-1].children.push(C):this._splitRoot(N,C)},H.prototype._splitRoot=function(I,k){this.data=yt([I,k]),this.data.height=I.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(I,k,N){for(var L,M,U,C,O,G,w,ht=1/0,K=1/0,Q=k;Q<=N-k;Q++){var A=et(I,0,Q,this.toBBox),Ot=et(I,Q,N,this.toBBox),Pt=(M=A,U=Ot,void 0,void 0,void 0,void 0,C=Math.max(M.minX,U.minX),O=Math.max(M.minY,U.minY),G=Math.min(M.maxX,U.maxX),w=Math.min(M.maxY,U.maxY),Math.max(0,G-C)*Math.max(0,w-O)),X=Lt(A)+Lt(Ot);Pt<ht?(ht=Pt,L=Q,K=X<K?X:K):Pt===ht&&X<K&&(K=X,L=Q)}return L||N-k},H.prototype._chooseSplitAxis=function(I,k,N){var L=I.leaf?this.compareMinX:ut,M=I.leaf?this.compareMinY:mt;this._allDistMargin(I,k,N,L)<this._allDistMargin(I,k,N,M)&&I.children.sort(L)},H.prototype._allDistMargin=function(I,k,N,L){I.children.sort(L);for(var M=this.toBBox,U=et(I,0,k,M),C=et(I,N-k,N,M),O=Rt(U)+Rt(C),G=k;G<N-k;G++){var w=I.children[G];j(U,I.leaf?M(w):w),O+=Rt(U)}for(var ht=N-k-1;ht>=k;ht--){var K=I.children[ht];j(C,I.leaf?M(K):K),O+=Rt(C)}return O},H.prototype._adjustParentBBoxes=function(I,k,N){for(var L=N;L>=0;L--)j(k[L],I)},H.prototype._condense=function(I){for(var k=I.length-1,N=void 0;k>=0;k--)0===I[k].children.length?k>0?(N=I[k-1].children).splice(N.indexOf(I[k]),1):this.clear():T(I[k],this.toBBox)},H}()},5203:(At,gt,W)=>{"use strict";var q,H=SyntaxError,rt=Function,T=TypeError,et=function(A){try{return rt('"use strict"; return ('+A+").constructor;")()}catch(Ot){}},j=Object.getOwnPropertyDescriptor;if(j)try{j({},"")}catch(A){j=null}var ut=function(){throw new T},mt=j?function(){try{return ut}catch(A){try{return j(arguments,"callee").get}catch(Ot){return ut}}}():ut,Lt=W(2969)(),Rt=Object.getPrototypeOf||function(A){return A.__proto__},Ct={},it=typeof Uint8Array>"u"?q:Rt(Uint8Array),yt={"%AggregateError%":typeof AggregateError>"u"?q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?q:ArrayBuffer,"%ArrayIteratorPrototype%":Lt?Rt([][Symbol.iterator]()):q,"%AsyncFromSyncIteratorPrototype%":q,"%AsyncFunction%":Ct,"%AsyncGenerator%":Ct,"%AsyncGeneratorFunction%":Ct,"%AsyncIteratorPrototype%":Ct,"%Atomics%":typeof Atomics>"u"?q:Atomics,"%BigInt%":typeof BigInt>"u"?q:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?q:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?q:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?q:Float32Array,"%Float64Array%":typeof Float64Array>"u"?q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?q:FinalizationRegistry,"%Function%":rt,"%GeneratorFunction%":Ct,"%Int8Array%":typeof Int8Array>"u"?q:Int8Array,"%Int16Array%":typeof Int16Array>"u"?q:Int16Array,"%Int32Array%":typeof Int32Array>"u"?q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Lt?Rt(Rt([][Symbol.iterator]())):q,"%JSON%":"object"==typeof JSON?JSON:q,"%Map%":typeof Map>"u"?q:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Lt?q:Rt((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?q:Promise,"%Proxy%":typeof Proxy>"u"?q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?q:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Lt?q:Rt((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Lt?Rt(""[Symbol.iterator]()):q,"%Symbol%":Lt?Symbol:q,"%SyntaxError%":H,"%ThrowTypeError%":mt,"%TypedArray%":it,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array>"u"?q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?q:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?q:WeakMap,"%WeakRef%":typeof WeakRef>"u"?q:WeakRef,"%WeakSet%":typeof WeakSet>"u"?q:WeakSet};try{null.error}catch(A){var Dt=Rt(Rt(A));yt["%Error.prototype%"]=Dt}var I=function A(Ot){var Pt;if("%AsyncFunction%"===Ot)Pt=et("async function () {}");else if("%GeneratorFunction%"===Ot)Pt=et("function* () {}");else if("%AsyncGeneratorFunction%"===Ot)Pt=et("async function* () {}");else if("%AsyncGenerator%"===Ot){var X=A("%AsyncGeneratorFunction%");X&&(Pt=X.prototype)}else if("%AsyncIteratorPrototype%"===Ot){var at=A("%AsyncGenerator%");at&&(Pt=Rt(at.prototype))}return yt[Ot]=Pt,Pt},k={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=W(4444),L=W(3164),M=N.call(Function.call,Array.prototype.concat),U=N.call(Function.apply,Array.prototype.splice),C=N.call(Function.call,String.prototype.replace),O=N.call(Function.call,String.prototype.slice),G=N.call(Function.call,RegExp.prototype.exec),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ht=/\\(\\)?/g,K=function(Ot){var Pt=O(Ot,0,1),X=O(Ot,-1);if("%"===Pt&&"%"!==X)throw new H("invalid intrinsic syntax, expected closing `%`");if("%"===X&&"%"!==Pt)throw new H("invalid intrinsic syntax, expected opening `%`");var at=[];return C(Ot,w,function(J,ot,lt,z){at[at.length]=lt?C(z,ht,"$1"):ot||J}),at},Q=function(Ot,Pt){var at,X=Ot;if(L(k,X)&&(X="%"+(at=k[X])[0]+"%"),L(yt,X)){var J=yt[X];if(J===Ct&&(J=I(X)),typeof J>"u"&&!Pt)throw new T("intrinsic "+Ot+" exists, but is not available. Please file an issue!");return{alias:at,name:X,value:J}}throw new H("intrinsic "+Ot+" does not exist!")};At.exports=function(Ot,Pt){if("string"!=typeof Ot||0===Ot.length)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Pt)throw new T('"allowMissing" argument must be a boolean');if(null===G(/^%?[^%]*%?$/,Ot))throw new H("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var X=K(Ot),at=X.length>0?X[0]:"",J=Q("%"+at+"%",Pt),ot=J.name,lt=J.value,z=!1,Nt=J.alias;Nt&&(at=Nt[0],U(X,M([0,1],Nt)));for(var Mt=1,qt=!0;Mt<X.length;Mt+=1){var xt=X[Mt],Qt=O(xt,0,1),te=O(xt,-1);if(('"'===Qt||"'"===Qt||"`"===Qt||'"'===te||"'"===te||"`"===te)&&Qt!==te)throw new H("property names with quotes must have matching quotes");if(("constructor"===xt||!qt)&&(z=!0),L(yt,ot="%"+(at+="."+xt)+"%"))lt=yt[ot];else if(null!=lt){if(!(xt in lt)){if(!Pt)throw new T("base intrinsic for "+Ot+" exists, but the property is not available.");return}if(j&&Mt+1>=X.length){var Jt=j(lt,xt);lt=(qt=!!Jt)&&"get"in Jt&&!("originalValue"in Jt.get)?Jt.get:lt[xt]}else qt=L(lt,xt),lt=lt[xt];qt&&!z&&(yt[ot]=lt)}}return lt}},7027:(At,gt,W)=>{"use strict";var H=W(5203)("%Object.defineProperty%",!0),rt=function(){if(H)try{return H({},"a",{value:1}),!0}catch(et){return!1}return!1};rt.hasArrayLengthDefineBug=function(){if(!rt())return null;try{return 1!==H([],"length",{value:1}).length}catch(et){return!0}},At.exports=rt},2969:(At,gt,W)=>{"use strict";var q=typeof Symbol<"u"&&Symbol,H=W(1983);At.exports=function(){return"function"==typeof q&&"function"==typeof Symbol&&"symbol"==typeof q("foo")&&"symbol"==typeof Symbol("bar")&&H()}},1983:At=>{"use strict";At.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var W={},q=Symbol("test"),H=Object(q);if("string"==typeof q||"[object Symbol]"!==Object.prototype.toString.call(q)||"[object Symbol]"!==Object.prototype.toString.call(H))return!1;for(q in W[q]=42,W)return!1;if("function"==typeof Object.keys&&0!==Object.keys(W).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(W).length)return!1;var T=Object.getOwnPropertySymbols(W);if(1!==T.length||T[0]!==q||!Object.prototype.propertyIsEnumerable.call(W,q))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var et=Object.getOwnPropertyDescriptor(W,q);if(42!==et.value||!0!==et.enumerable)return!1}return!0}},6259:(At,gt,W)=>{"use strict";var q=W(1983);At.exports=function(){return q()&&!!Symbol.toStringTag}},3164:(At,gt,W)=>{"use strict";var q=W(4444);At.exports=q.call(Function.call,Object.prototype.hasOwnProperty)},3407:(At,gt,W)=>{"use strict";var q=W(6259)(),rt=W(5834)("Object.prototype.toString"),T=function(mt){return!(q&&mt&&"object"==typeof mt&&Symbol.toStringTag in mt)&&"[object Arguments]"===rt(mt)},et=function(mt){return!!T(mt)||null!==mt&&"object"==typeof mt&&"number"==typeof mt.length&&mt.length>=0&&"[object Array]"!==rt(mt)&&"[object Function]"===rt(mt.callee)},j=function(){return T(arguments)}();T.isLegacyArguments=et,At.exports=j?T:et},2374:(At,gt,W)=>{"use strict";var q=Date.prototype.getDay,rt=Object.prototype.toString,et=W(6259)();At.exports=function(ut){return"object"==typeof ut&&null!==ut&&(et?function(ut){try{return q.call(ut),!0}catch(mt){return!1}}(ut):"[object Date]"===rt.call(ut))}},2342:(At,gt,W)=>{"use strict";var rt,T,et,j,q=W(5834),H=W(6259)();if(H){rt=q("Object.prototype.hasOwnProperty"),T=q("RegExp.prototype.exec"),et={};var ut=function(){throw et};j={toString:ut,valueOf:ut},"symbol"==typeof Symbol.toPrimitive&&(j[Symbol.toPrimitive]=ut)}var mt=q("Object.prototype.toString"),Lt=Object.getOwnPropertyDescriptor;At.exports=H?function(it){if(!it||"object"!=typeof it)return!1;var yt=Lt(it,"lastIndex");if(!yt||!rt(yt,"value"))return!1;try{T(it,j)}catch(I){return I===et}}:function(it){return!(!it||"object"!=typeof it&&"function"!=typeof it)&&"[object RegExp]"===mt(it)}},5943:At=>{"use strict";var gt=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;At.exports=function rt(){try{if(!Object.assign)return!1;var T=new String("abc");if(T[5]="de","5"===Object.getOwnPropertyNames(T)[0])return!1;for(var et={},j=0;j<10;j++)et["_"+String.fromCharCode(j)]=j;if("0123456789"!==Object.getOwnPropertyNames(et).map(function(Lt){return et[Lt]}).join(""))return!1;var mt={};return"abcdefghijklmnopqrst".split("").forEach(function(Lt){mt[Lt]=Lt}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},mt)).join("")}catch(Lt){return!1}}()?Object.assign:function(T,et){for(var j,mt,ut=function H(T){if(null==T)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(T)}(T),Lt=1;Lt<arguments.length;Lt++){for(var Rt in j=Object(arguments[Lt]))W.call(j,Rt)&&(ut[Rt]=j[Rt]);if(gt){mt=gt(j);for(var Ct=0;Ct<mt.length;Ct++)q.call(j,mt[Ct])&&(ut[mt[Ct]]=j[mt[Ct]])}}return ut}},1175:At=>{"use strict";var gt=function(W){return W!=W};At.exports=function(q,H){return 0===q&&0===H?1/q==1/H:!!(q===H||gt(q)&&gt(H))}},2e3:(At,gt,W)=>{"use strict";var q=W(2358),H=W(5685),rt=W(1175),T=W(6305),et=W(3859),j=H(T(),Object);q(j,{getPolyfill:T,implementation:rt,shim:et}),At.exports=j},6305:(At,gt,W)=>{"use strict";var q=W(1175);At.exports=function(){return"function"==typeof Object.is?Object.is:q}},3859:(At,gt,W)=>{"use strict";var q=W(6305),H=W(2358);At.exports=function(){var T=q();return H(Object,{is:T},{is:function(){return Object.is!==T}}),T}},2450:(At,gt,W)=>{"use strict";var q;if(!Object.keys){var H=Object.prototype.hasOwnProperty,rt=Object.prototype.toString,T=W(9978),et=Object.prototype.propertyIsEnumerable,j=!et.call({toString:null},"toString"),ut=et.call(function(){},"prototype"),mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Lt=function(yt){var Dt=yt.constructor;return Dt&&Dt.prototype===yt},Rt={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ct=function(){if(typeof window>"u")return!1;for(var yt in window)try{if(!Rt["$"+yt]&&H.call(window,yt)&&null!==window[yt]&&"object"==typeof window[yt])try{Lt(window[yt])}catch(Dt){return!0}}catch(Dt){return!0}return!1}();q=function(Dt){var I=null!==Dt&&"object"==typeof Dt,k="[object Function]"===rt.call(Dt),N=T(Dt),L=I&&"[object String]"===rt.call(Dt),M=[];if(!I&&!k&&!N)throw new TypeError("Object.keys called on a non-object");var U=ut&&k;if(L&&Dt.length>0&&!H.call(Dt,0))for(var C=0;C<Dt.length;++C)M.push(String(C));if(N&&Dt.length>0)for(var O=0;O<Dt.length;++O)M.push(String(O));else for(var G in Dt)(!U||"prototype"!==G)&&H.call(Dt,G)&&M.push(String(G));if(j)for(var w=function(yt){if(typeof window>"u"||!Ct)return Lt(yt);try{return Lt(yt)}catch(Dt){return!1}}(Dt),ht=0;ht<mt.length;++ht)(!w||"constructor"!==mt[ht])&&H.call(Dt,mt[ht])&&M.push(mt[ht]);return M}}At.exports=q},1356:(At,gt,W)=>{"use strict";var q=Array.prototype.slice,H=W(9978),rt=Object.keys,T=rt?function(ut){return rt(ut)}:W(2450),et=Object.keys;T.shim=function(){if(Object.keys){var ut=function(){var mt=Object.keys(arguments);return mt&&mt.length===arguments.length}(1,2);ut||(Object.keys=function(Lt){return H(Lt)?et(q.call(Lt)):et(Lt)})}else Object.keys=T;return Object.keys||T},At.exports=T},9978:At=>{"use strict";var gt=Object.prototype.toString;At.exports=function(q){var H=gt.call(q),rt="[object Arguments]"===H;return rt||(rt="[object Array]"!==H&&null!==q&&"object"==typeof q&&"number"==typeof q.length&&q.length>=0&&"[object Function]"===gt.call(q.callee)),rt}},1766:At=>{At.exports=function(W,q,H,rt){var T=W[0],et=W[1],j=!1;void 0===H&&(H=0),void 0===rt&&(rt=q.length);for(var ut=(rt-H)/2,mt=0,Lt=ut-1;mt<ut;Lt=mt++){var Rt=q[H+2*mt+0],Ct=q[H+2*mt+1],yt=q[H+2*Lt+1];Ct>et!=yt>et&&T<(q[H+2*Lt+0]-Rt)*(et-Ct)/(yt-Ct)+Rt&&(j=!j)}return j}},3870:(At,gt,W)=>{var q=W(1766),H=W(2260);At.exports=function(T,et,j,ut){return et.length>0&&Array.isArray(et[0])?H(T,et,j,ut):q(T,et,j,ut)},At.exports.nested=H,At.exports.flat=q},2260:At=>{At.exports=function(W,q,H,rt){var T=W[0],et=W[1],j=!1;void 0===H&&(H=0),void 0===rt&&(rt=q.length);for(var ut=rt-H,mt=0,Lt=ut-1;mt<ut;Lt=mt++){var Rt=q[mt+H][0],Ct=q[mt+H][1],yt=q[Lt+H][1];Ct>et!=yt>et&&T<(q[Lt+H][0]-Rt)*(et-Ct)/(yt-Ct)+Rt&&(j=!j)}return j}},9855:function(At){At.exports=function(){"use strict";function gt(dt,R){if(!(dt instanceof R))throw new TypeError("Cannot call a class as a function")}function W(dt,R){for(var b=0;b<R.length;b++){var P=R[b];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(dt,P.key,P)}}function q(dt,R,b){return R&&W(dt.prototype,R),b&&W(dt,b),dt}var H=function dt(R,b){this.next=null,this.key=R,this.data=b,this.left=null,this.right=null};function rt(dt,R){return dt>R?1:dt<R?-1:0}function T(dt,R,b){for(var P=new H(null,null),$=P,ft=P;;){var wt=b(dt,R.key);if(wt<0){if(null===R.left)break;if(b(dt,R.left.key)<0&&(R.left=(Tt=R.left).right,Tt.right=R,null===(R=Tt).left))break;ft.left=R,ft=R,R=R.left}else{if(!(wt>0))break;if(null===R.right)break;var Tt;if(b(dt,R.right.key)>0&&(R.right=(Tt=R.right).left,Tt.left=R,null===(R=Tt).right))break;$.right=R,$=R,R=R.right}}return $.right=R.left,ft.left=R.right,R.left=P.right,R.right=P.left,R}function et(dt,R,b,P){var $=new H(dt,R);if(null===b)return $.left=$.right=null,$;var ft=P(dt,(b=T(dt,b,P)).key);return ft<0?($.left=b.left,$.right=b,b.left=null):ft>=0&&($.right=b.right,$.left=b,b.right=null),$}function j(dt,R,b){var P=null,$=null;if(R){var ft=b((R=T(dt,R,b)).key,dt);0===ft?(P=R.left,$=R.right):ft<0?($=R.right,R.right=null,P=R):(P=R.left,R.left=null,$=R)}return{left:P,right:$}}function mt(dt,R,b,P,$){if(dt){P(R+(b?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+$(dt)+"\n");var ft=R+(b?"    ":"\u2502   ");dt.left&&mt(dt.left,ft,!1,P,$),dt.right&&mt(dt.right,ft,!0,P,$)}}var Lt=function(){function dt(R){void 0===R&&(R=rt),this._root=null,this._size=0,this._comparator=R}return dt.prototype.insert=function(R,b){return this._size++,this._root=et(R,b,this._root,this._comparator)},dt.prototype.add=function(R,b){var P=new H(R,b);null===this._root&&(P.left=P.right=null,this._size++,this._root=P);var $=this._comparator,ft=T(R,this._root,$),wt=$(R,ft.key);return 0===wt?this._root=ft:(wt<0?(P.left=ft.left,P.right=ft,ft.left=null):wt>0&&(P.right=ft.right,P.left=ft,ft.right=null),this._size++,this._root=P),this._root},dt.prototype.remove=function(R){this._root=this._remove(R,this._root,this._comparator)},dt.prototype._remove=function(R,b,P){var $;return null===b?null:0===P(R,(b=T(R,b,P)).key)?(null===b.left?$=b.right:($=T(R,b.left,P)).right=b.right,this._size--,$):b},dt.prototype.pop=function(){var R=this._root;if(R){for(;R.left;)R=R.left;return this._root=T(R.key,this._root,this._comparator),this._root=this._remove(R.key,this._root,this._comparator),{key:R.key,data:R.data}}return null},dt.prototype.findStatic=function(R){for(var b=this._root,P=this._comparator;b;){var $=P(R,b.key);if(0===$)return b;b=$<0?b.left:b.right}return null},dt.prototype.find=function(R){return this._root&&(this._root=T(R,this._root,this._comparator),0!==this._comparator(R,this._root.key))?null:this._root},dt.prototype.contains=function(R){for(var b=this._root,P=this._comparator;b;){var $=P(R,b.key);if(0===$)return!0;b=$<0?b.left:b.right}return!1},dt.prototype.forEach=function(R,b){for(var P=this._root,$=[],ft=!1;!ft;)null!==P?($.push(P),P=P.left):0!==$.length?(P=$.pop(),R.call(b,P),P=P.right):ft=!0;return this},dt.prototype.range=function(R,b,P,$){for(var ft=[],wt=this._comparator,Tt=this._root;0!==ft.length||Tt;)if(Tt)ft.push(Tt),Tt=Tt.left;else{if(wt((Tt=ft.pop()).key,b)>0)break;if(wt(Tt.key,R)>=0&&P.call($,Tt))return this;Tt=Tt.right}return this},dt.prototype.keys=function(){var R=[];return this.forEach(function(b){return R.push(b.key)}),R},dt.prototype.values=function(){var R=[];return this.forEach(function(b){return R.push(b.data)}),R},dt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},dt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},dt.prototype.minNode=function(R){if(void 0===R&&(R=this._root),R)for(;R.left;)R=R.left;return R},dt.prototype.maxNode=function(R){if(void 0===R&&(R=this._root),R)for(;R.right;)R=R.right;return R},dt.prototype.at=function(R){for(var b=this._root,P=!1,$=0,ft=[];!P;)if(b)ft.push(b),b=b.left;else if(ft.length>0){if(b=ft.pop(),$===R)return b;$++,b=b.right}else P=!0;return null},dt.prototype.next=function(R){var b=this._root,P=null;if(R.right){for(P=R.right;P.left;)P=P.left;return P}for(var $=this._comparator;b;){var ft=$(R.key,b.key);if(0===ft)break;ft<0?(P=b,b=b.left):b=b.right}return P},dt.prototype.prev=function(R){var b=this._root,P=null;if(null!==R.left){for(P=R.left;P.right;)P=P.right;return P}for(var $=this._comparator;b;){var ft=$(R.key,b.key);if(0===ft)break;ft<0?b=b.left:(P=b,b=b.right)}return P},dt.prototype.clear=function(){return this._root=null,this._size=0,this},dt.prototype.toList=function(){return function it(dt){for(var R=dt,b=[],P=!1,$=new H(null,null),ft=$;!P;)R?(b.push(R),R=R.left):b.length>0?R=(R=ft=ft.next=b.pop()).right:P=!0;return ft.next=null,$.next}(this._root)},dt.prototype.load=function(R,b,P){void 0===b&&(b=[]),void 0===P&&(P=!1);var $=R.length,ft=this._comparator;if(P&&I(R,b,0,$-1,ft),null===this._root)this._root=Rt(R,b,0,$),this._size=$;else{var wt=function Dt(dt,R,b){for(var P=new H(null,null),$=P,ft=dt,wt=R;null!==ft&&null!==wt;)b(ft.key,wt.key)<0?($.next=ft,ft=ft.next):($.next=wt,wt=wt.next),$=$.next;return null!==ft?$.next=ft:null!==wt&&($.next=wt),P.next}(this.toList(),function Ct(dt,R){for(var b=new H(null,null),P=b,$=0;$<dt.length;$++)P=P.next=new H(dt[$],R[$]);return P.next=null,b.next}(R,b),ft);this._root=yt({head:wt},0,$=this._size+$)}return this},dt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(dt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),dt.prototype.toString=function(R){void 0===R&&(R=function($){return String($.key)});var b=[];return mt(this._root,"",!0,function(P){return b.push(P)},R),b.join("")},dt.prototype.update=function(R,b,P){var $=this._comparator,ft=j(R,this._root,$),wt=ft.left,Tt=ft.right;$(R,b)<0?Tt=et(b,P,Tt,$):wt=et(b,P,wt,$),this._root=function ut(dt,R,b){return null===R?dt:(null===dt||((R=T(dt.key,R,b)).left=dt),R)}(wt,Tt,$)},dt.prototype.split=function(R){return j(R,this._root,this._comparator)},dt}();function Rt(dt,R,b,P){var $=P-b;if($>0){var ft=b+Math.floor($/2),Ft=new H(dt[ft],R[ft]);return Ft.left=Rt(dt,R,b,ft),Ft.right=Rt(dt,R,ft+1,P),Ft}return null}function yt(dt,R,b){var P=b-R;if(P>0){var $=R+Math.floor(P/2),ft=yt(dt,R,$),wt=dt.head;return wt.left=ft,dt.head=dt.head.next,wt.right=yt(dt,$+1,b),wt}return null}function I(dt,R,b,P,$){if(!(b>=P)){for(var ft=dt[b+P>>1],wt=b-1,Tt=P+1;;){do{wt++}while($(dt[wt],ft)<0);do{Tt--}while($(dt[Tt],ft)>0);if(wt>=Tt)break;var Ft=dt[wt];dt[wt]=dt[Tt],dt[Tt]=Ft,Ft=R[wt],R[wt]=R[Tt],R[Tt]=Ft}I(dt,R,b,Tt,$),I(dt,R,Tt+1,P,$)}}var k=function(R,b){return R.ll.x<=b.x&&b.x<=R.ur.x&&R.ll.y<=b.y&&b.y<=R.ur.y},N=function(R,b){return b.ur.x<R.ll.x||R.ur.x<b.ll.x||b.ur.y<R.ll.y||R.ur.y<b.ll.y?null:{ll:{x:R.ll.x<b.ll.x?b.ll.x:R.ll.x,y:R.ll.y<b.ll.y?b.ll.y:R.ll.y},ur:{x:R.ur.x<b.ur.x?R.ur.x:b.ur.x,y:R.ur.y<b.ur.y?R.ur.y:b.ur.y}}},L=Number.EPSILON;void 0===L&&(L=Math.pow(2,-52));var M=L*L,U=function(R,b){if(-L<R&&R<L&&-L<b&&b<L)return 0;var P=R-b;return P*P<M*R*b?0:R<b?-1:1},C=function(){function dt(){gt(this,dt),this.reset()}return q(dt,[{key:"reset",value:function(){this.xRounder=new O,this.yRounder=new O}},{key:"round",value:function(b,P){return{x:this.xRounder.round(b),y:this.yRounder.round(P)}}}]),dt}(),O=function(){function dt(){gt(this,dt),this.tree=new Lt,this.round(0)}return q(dt,[{key:"round",value:function(b){var P=this.tree.add(b),$=this.tree.prev(P);if(null!==$&&0===U(P.key,$.key))return this.tree.remove(b),$.key;var ft=this.tree.next(P);return null!==ft&&0===U(P.key,ft.key)?(this.tree.remove(b),ft.key):b}}]),dt}(),G=new C,w=function(R,b){return R.x*b.y-R.y*b.x},ht=function(R,b){return R.x*b.x+R.y*b.y},K=function(R,b,P){var wt=w({x:b.x-R.x,y:b.y-R.y},{x:P.x-R.x,y:P.y-R.y});return U(wt,0)},Q=function(R){return Math.sqrt(ht(R,R))},A=function(R,b,P){var $={x:b.x-R.x,y:b.y-R.y},ft={x:P.x-R.x,y:P.y-R.y};return w(ft,$)/Q(ft)/Q($)},Ot=function(R,b,P){var $={x:b.x-R.x,y:b.y-R.y},ft={x:P.x-R.x,y:P.y-R.y};return ht(ft,$)/Q(ft)/Q($)},Pt=function(R,b,P){return 0===b.y?null:{x:R.x+b.x/b.y*(P-R.y),y:P}},X=function(R,b,P){return 0===b.x?null:{x:P,y:R.y+b.y/b.x*(P-R.x)}},J=function(){function dt(R,b){gt(this,dt),void 0===R.events?R.events=[this]:R.events.push(this),this.point=R,this.isLeft=b}return q(dt,null,[{key:"compare",value:function(b,P){var $=dt.comparePoints(b.point,P.point);return 0!==$?$:(b.point!==P.point&&b.link(P),b.isLeft!==P.isLeft?b.isLeft?1:-1:lt.compare(b.segment,P.segment))}},{key:"comparePoints",value:function(b,P){return b.x<P.x?-1:b.x>P.x?1:b.y<P.y?-1:b.y>P.y?1:0}}]),q(dt,[{key:"link",value:function(b){if(b.point===this.point)throw new Error("Tried to link already linked events");for(var P=b.point.events,$=0,ft=P.length;$<ft;$++){var wt=P[$];this.point.events.push(wt),wt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var b=this.point.events.length,P=0;P<b;P++){var $=this.point.events[P];if(void 0===$.segment.consumedBy)for(var ft=P+1;ft<b;ft++){var wt=this.point.events[ft];void 0===wt.consumedBy&&$.otherSE.point.events===wt.otherSE.point.events&&$.segment.consume(wt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var b=[],P=0,$=this.point.events.length;P<$;P++){var ft=this.point.events[P];ft!==this&&!ft.segment.ringOut&&ft.segment.isInResult()&&b.push(ft)}return b}},{key:"getLeftmostComparator",value:function(b){var P=this,$=new Map,ft=function(Tt){var Ft=Tt.otherSE;$.set(Tt,{sine:A(P.point,b.point,Ft.point),cosine:Ot(P.point,b.point,Ft.point)})};return function(wt,Tt){$.has(wt)||ft(wt),$.has(Tt)||ft(Tt);var Ft=$.get(wt),bt=Ft.sine,ce=Ft.cosine,me=$.get(Tt),zt=me.sine,pe=me.cosine;return bt>=0&&zt>=0?ce<pe?1:ce>pe?-1:0:bt<0&&zt<0?ce<pe?-1:ce>pe?1:0:zt<bt?-1:zt>bt?1:0}}}]),dt}(),ot=0,lt=function(){function dt(R,b,P,$){gt(this,dt),this.id=++ot,this.leftSE=R,R.segment=this,R.otherSE=b,this.rightSE=b,b.segment=this,b.otherSE=R,this.rings=P,this.windings=$}return q(dt,null,[{key:"compare",value:function(b,P){var $=b.leftSE.point.x,ft=P.leftSE.point.x,wt=b.rightSE.point.x,Tt=P.rightSE.point.x;if(Tt<$)return 1;if(wt<ft)return-1;var Ft=b.leftSE.point.y,bt=P.leftSE.point.y,ce=b.rightSE.point.y,me=P.rightSE.point.y;if($<ft){if(bt<Ft&&bt<ce)return 1;if(bt>Ft&&bt>ce)return-1;var zt=b.comparePoint(P.leftSE.point);if(zt<0)return 1;if(zt>0)return-1;var pe=P.comparePoint(b.rightSE.point);return 0!==pe?pe:-1}if($>ft){if(Ft<bt&&Ft<me)return-1;if(Ft>bt&&Ft>me)return 1;var _n=P.comparePoint(b.leftSE.point);if(0!==_n)return _n;var $t=b.comparePoint(P.rightSE.point);return $t<0?1:$t>0?-1:1}if(Ft<bt)return-1;if(Ft>bt)return 1;if(wt<Tt){var Ke=P.comparePoint(b.rightSE.point);if(0!==Ke)return Ke}if(wt>Tt){var xn=b.comparePoint(P.rightSE.point);if(xn<0)return 1;if(xn>0)return-1}if(wt!==Tt){var Rn=ce-Ft,Wn=wt-$,Cn=me-bt,fr=Tt-ft;if(Rn>Wn&&Cn<fr)return 1;if(Rn<Wn&&Cn>fr)return-1}return wt>Tt?1:wt<Tt||ce<me?-1:ce>me?1:b.id<P.id?-1:b.id>P.id?1:0}}]),q(dt,[{key:"replaceRightSE",value:function(b){this.rightSE=b,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var b=this.leftSE.point.y,P=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:b<P?b:P},ur:{x:this.rightSE.point.x,y:b>P?b:P}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(b){return b.x===this.leftSE.point.x&&b.y===this.leftSE.point.y||b.x===this.rightSE.point.x&&b.y===this.rightSE.point.y}},{key:"comparePoint",value:function(b){if(this.isAnEndpoint(b))return 0;var P=this.leftSE.point,$=this.rightSE.point,ft=this.vector();if(P.x===$.x)return b.x===P.x?0:b.x<P.x?1:-1;if(b.x===P.x+(b.y-P.y)/ft.y*ft.x)return 0;var bt=P.y+(b.x-P.x)/ft.x*ft.y;return b.y===bt?0:b.y<bt?-1:1}},{key:"getIntersection",value:function(b){var P=this.bbox(),$=b.bbox(),ft=N(P,$);if(null===ft)return null;var wt=this.leftSE.point,Tt=this.rightSE.point,Ft=b.leftSE.point,bt=b.rightSE.point,ce=k(P,Ft)&&0===this.comparePoint(Ft),me=k($,wt)&&0===b.comparePoint(wt),zt=k(P,bt)&&0===this.comparePoint(bt),pe=k($,Tt)&&0===b.comparePoint(Tt);if(me&&ce)return pe&&!zt?Tt:!pe&&zt?bt:null;if(me)return zt&&wt.x===bt.x&&wt.y===bt.y?null:wt;if(ce)return pe&&Tt.x===Ft.x&&Tt.y===Ft.y?null:Ft;if(pe&&zt)return null;if(pe)return Tt;if(zt)return bt;var _n=function(R,b,P,$){if(0===b.x)return X(P,$,R.x);if(0===$.x)return X(R,b,P.x);if(0===b.y)return Pt(P,$,R.y);if(0===$.y)return Pt(R,b,P.y);var ft=w(b,$);if(0==ft)return null;var wt={x:P.x-R.x,y:P.y-R.y},Tt=w(wt,b)/ft,Ft=w(wt,$)/ft;return{x:(R.x+Ft*b.x+(P.x+Tt*$.x))/2,y:(R.y+Ft*b.y+(P.y+Tt*$.y))/2}}(wt,this.vector(),Ft,b.vector());return null!==_n&&k(ft,_n)?G.round(_n.x,_n.y):null}},{key:"split",value:function(b){var P=[],$=void 0!==b.events,ft=new J(b,!0),wt=new J(b,!1),Tt=this.rightSE;this.replaceRightSE(wt),P.push(wt),P.push(ft);var Ft=new dt(ft,Tt,this.rings.slice(),this.windings.slice());return J.comparePoints(Ft.leftSE.point,Ft.rightSE.point)>0&&Ft.swapEvents(),J.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),$&&(ft.checkForConsuming(),wt.checkForConsuming()),P}},{key:"swapEvents",value:function(){var b=this.rightSE;this.rightSE=this.leftSE,this.leftSE=b,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var P=0,$=this.windings.length;P<$;P++)this.windings[P]*=-1}},{key:"consume",value:function(b){for(var P=this,$=b;P.consumedBy;)P=P.consumedBy;for(;$.consumedBy;)$=$.consumedBy;var ft=dt.compare(P,$);if(0!==ft){if(ft>0){var wt=P;P=$,$=wt}if(P.prev===$){var Tt=P;P=$,$=Tt}for(var Ft=0,bt=$.rings.length;Ft<bt;Ft++){var ce=$.rings[Ft],me=$.windings[Ft],zt=P.rings.indexOf(ce);-1===zt?(P.rings.push(ce),P.windings.push(me)):P.windings[zt]+=me}$.rings=null,$.windings=null,$.consumedBy=P,$.leftSE.consumedBy=P.leftSE,$.rightSE.consumedBy=P.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var b=this.beforeState();this._afterState={rings:b.rings.slice(0),windings:b.windings.slice(0),multiPolys:[]};for(var P=this._afterState.rings,$=this._afterState.windings,ft=this._afterState.multiPolys,wt=0,Tt=this.rings.length;wt<Tt;wt++){var Ft=this.rings[wt],bt=this.windings[wt],ce=P.indexOf(Ft);-1===ce?(P.push(Ft),$.push(bt)):$[ce]+=bt}for(var me=[],zt=[],pe=0,_n=P.length;pe<_n;pe++)if(0!==$[pe]){var $t=P[pe],Ke=$t.poly;if(-1===zt.indexOf(Ke))if($t.isExterior)me.push(Ke);else{-1===zt.indexOf(Ke)&&zt.push(Ke);var xn=me.indexOf($t.poly);-1!==xn&&me.splice(xn,1)}}for(var Rn=0,Wn=me.length;Rn<Wn;Rn++){var Cn=me[Rn].multiPoly;-1===ft.indexOf(Cn)&&ft.push(Cn)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var b=this.beforeState().multiPolys,P=this.afterState().multiPolys;switch(Bt.type){case"union":this._isInResult=0===b.length!=(0===P.length);break;case"intersection":var wt,Tt;b.length<P.length?(wt=b.length,Tt=P.length):(wt=P.length,Tt=b.length),this._isInResult=Tt===Bt.numMultiPolys&&wt<Tt;break;case"xor":var Ft=Math.abs(b.length-P.length);this._isInResult=Ft%2==1;break;case"difference":var bt=function(me){return 1===me.length&&me[0].isSubject};this._isInResult=bt(b)!==bt(P);break;default:throw new Error("Unrecognized operation type found ".concat(Bt.type))}return this._isInResult}}],[{key:"fromRing",value:function(b,P,$){var ft,wt,Tt,Ft=J.comparePoints(b,P);if(Ft<0)ft=b,wt=P,Tt=1;else{if(!(Ft>0))throw new Error("Tried to create degenerate segment at [".concat(b.x,", ").concat(b.y,"]"));ft=P,wt=b,Tt=-1}return new dt(new J(ft,!0),new J(wt,!1),[$],[Tt])}}]),dt}(),z=function(){function dt(R,b,P){if(gt(this,dt),!Array.isArray(R)||0===R.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=b,this.isExterior=P,this.segments=[],"number"!=typeof R[0][0]||"number"!=typeof R[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var $=G.round(R[0][0],R[0][1]);this.bbox={ll:{x:$.x,y:$.y},ur:{x:$.x,y:$.y}};for(var ft=$,wt=1,Tt=R.length;wt<Tt;wt++){if("number"!=typeof R[wt][0]||"number"!=typeof R[wt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Ft=G.round(R[wt][0],R[wt][1]);Ft.x===ft.x&&Ft.y===ft.y||(this.segments.push(lt.fromRing(ft,Ft,this)),Ft.x<this.bbox.ll.x&&(this.bbox.ll.x=Ft.x),Ft.y<this.bbox.ll.y&&(this.bbox.ll.y=Ft.y),Ft.x>this.bbox.ur.x&&(this.bbox.ur.x=Ft.x),Ft.y>this.bbox.ur.y&&(this.bbox.ur.y=Ft.y),ft=Ft)}($.x!==ft.x||$.y!==ft.y)&&this.segments.push(lt.fromRing(ft,$,this))}return q(dt,[{key:"getSweepEvents",value:function(){for(var b=[],P=0,$=this.segments.length;P<$;P++){var ft=this.segments[P];b.push(ft.leftSE),b.push(ft.rightSE)}return b}}]),dt}(),Nt=function(){function dt(R,b){if(gt(this,dt),!Array.isArray(R))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z(R[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var P=1,$=R.length;P<$;P++){var ft=new z(R[P],this,!1);ft.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ft.bbox.ll.x),ft.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ft.bbox.ll.y),ft.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ft.bbox.ur.x),ft.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ft.bbox.ur.y),this.interiorRings.push(ft)}this.multiPoly=b}return q(dt,[{key:"getSweepEvents",value:function(){for(var b=this.exteriorRing.getSweepEvents(),P=0,$=this.interiorRings.length;P<$;P++)for(var ft=this.interiorRings[P].getSweepEvents(),wt=0,Tt=ft.length;wt<Tt;wt++)b.push(ft[wt]);return b}}]),dt}(),Mt=function(){function dt(R,b){if(gt(this,dt),!Array.isArray(R))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof R[0][0][0]&&(R=[R])}catch(wt){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var P=0,$=R.length;P<$;P++){var ft=new Nt(R[P],this);ft.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ft.bbox.ll.x),ft.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ft.bbox.ll.y),ft.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ft.bbox.ur.x),ft.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ft.bbox.ur.y),this.polys.push(ft)}this.isSubject=b}return q(dt,[{key:"getSweepEvents",value:function(){for(var b=[],P=0,$=this.polys.length;P<$;P++)for(var ft=this.polys[P].getSweepEvents(),wt=0,Tt=ft.length;wt<Tt;wt++)b.push(ft[wt]);return b}}]),dt}(),qt=function(){function dt(R){gt(this,dt),this.events=R;for(var b=0,P=R.length;b<P;b++)R[b].segment.ringOut=this;this.poly=null}return q(dt,null,[{key:"factory",value:function(b){for(var P=[],$=0,ft=b.length;$<ft;$++){var wt=b[$];if(wt.isInResult()&&!wt.ringOut){for(var Tt=null,Ft=wt.leftSE,bt=wt.rightSE,ce=[Ft],me=Ft.point,zt=[];Tt=Ft,ce.push(Ft=bt),Ft.point!==me;)for(;;){var pe=Ft.getAvailableLinkedEvents();if(0===pe.length){var _n=ce[0].point,$t=ce[ce.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_n.x,",")+" ".concat(_n.y,"]. Last matching segment found ends at")+" [".concat($t.x,", ").concat($t.y,"]."))}if(1===pe.length){bt=pe[0].otherSE;break}for(var Ke=null,xn=0,Rn=zt.length;xn<Rn;xn++)if(zt[xn].point===Ft.point){Ke=xn;break}if(null===Ke){zt.push({index:ce.length,point:Ft.point});var fr=Ft.getLeftmostComparator(Tt);bt=pe.sort(fr)[0].otherSE;break}var Wn=zt.splice(Ke)[0],Cn=ce.splice(Wn.index);Cn.unshift(Cn[0].otherSE),P.push(new dt(Cn.reverse()))}P.push(new dt(ce))}}return P}}]),q(dt,[{key:"getGeom",value:function(){for(var b=this.events[0].point,P=[b],$=1,ft=this.events.length-1;$<ft;$++){var wt=this.events[$].point;0!==K(wt,b,this.events[$+1].point)&&(P.push(wt),b=wt)}if(1===P.length)return null;0===K(P[0],b,P[1])&&P.shift(),P.push(P[0]);for(var ce=this.isExteriorRing()?1:-1,me=this.isExteriorRing()?0:P.length-1,zt=this.isExteriorRing()?P.length:-1,pe=[],_n=me;_n!=zt;_n+=ce)pe.push([P[_n].x,P[_n].y]);return pe}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var b=this.enclosingRing();this._isExteriorRing=!b||!b.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var b=this.events[0],P=1,$=this.events.length;P<$;P++){var ft=this.events[P];J.compare(b,ft)>0&&(b=ft)}for(var wt=b.segment.prevInResult(),Tt=wt?wt.prevInResult():null;;){if(!wt)return null;if(!Tt)return wt.ringOut;if(Tt.ringOut!==wt.ringOut)return Tt.ringOut.enclosingRing()!==wt.ringOut?wt.ringOut:wt.ringOut.enclosingRing();wt=Tt.prevInResult(),Tt=wt?wt.prevInResult():null}}}]),dt}(),xt=function(){function dt(R){gt(this,dt),this.exteriorRing=R,R.poly=this,this.interiorRings=[]}return q(dt,[{key:"addInterior",value:function(b){this.interiorRings.push(b),b.poly=this}},{key:"getGeom",value:function(){var b=[this.exteriorRing.getGeom()];if(null===b[0])return null;for(var P=0,$=this.interiorRings.length;P<$;P++){var ft=this.interiorRings[P].getGeom();null!==ft&&b.push(ft)}return b}}]),dt}(),Qt=function(){function dt(R){gt(this,dt),this.rings=R,this.polys=this._composePolys(R)}return q(dt,[{key:"getGeom",value:function(){for(var b=[],P=0,$=this.polys.length;P<$;P++){var ft=this.polys[P].getGeom();null!==ft&&b.push(ft)}return b}},{key:"_composePolys",value:function(b){for(var P=[],$=0,ft=b.length;$<ft;$++){var wt=b[$];if(!wt.poly)if(wt.isExteriorRing())P.push(new xt(wt));else{var Tt=wt.enclosingRing();Tt.poly||P.push(new xt(Tt)),Tt.poly.addInterior(wt)}}return P}}]),dt}(),te=function(){function dt(R){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.compare;gt(this,dt),this.queue=R,this.tree=new Lt(b),this.segments=[]}return q(dt,[{key:"process",value:function(b){var P=b.segment,$=[];if(b.consumedBy)return b.isLeft?this.queue.remove(b.otherSE):this.tree.remove(P),$;var ft=b.isLeft?this.tree.insert(P):this.tree.find(P);if(!ft)throw new Error("Unable to find segment #".concat(P.id," ")+"[".concat(P.leftSE.point.x,", ").concat(P.leftSE.point.y,"] -> ")+"[".concat(P.rightSE.point.x,", ").concat(P.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var wt=ft,Tt=ft,Ft=void 0,bt=void 0;void 0===Ft;)null===(wt=this.tree.prev(wt))?Ft=null:void 0===wt.key.consumedBy&&(Ft=wt.key);for(;void 0===bt;)null===(Tt=this.tree.next(Tt))?bt=null:void 0===Tt.key.consumedBy&&(bt=Tt.key);if(b.isLeft){var ce=null;if(Ft){var me=Ft.getIntersection(P);if(null!==me&&(P.isAnEndpoint(me)||(ce=me),!Ft.isAnEndpoint(me)))for(var zt=this._splitSafely(Ft,me),pe=0,_n=zt.length;pe<_n;pe++)$.push(zt[pe])}var $t=null;if(bt){var Ke=bt.getIntersection(P);if(null!==Ke&&(P.isAnEndpoint(Ke)||($t=Ke),!bt.isAnEndpoint(Ke)))for(var xn=this._splitSafely(bt,Ke),Rn=0,Wn=xn.length;Rn<Wn;Rn++)$.push(xn[Rn])}if(null!==ce||null!==$t){var Cn;Cn=null===ce?$t:null===$t||J.comparePoints(ce,$t)<=0?ce:$t,this.queue.remove(P.rightSE),$.push(P.rightSE);for(var gn=P.split(Cn),Cr=0,qn=gn.length;Cr<qn;Cr++)$.push(gn[Cr])}$.length>0?(this.tree.remove(P),$.push(b)):(this.segments.push(P),P.prev=Ft)}else{if(Ft&&bt){var Gt=Ft.getIntersection(bt);if(null!==Gt){if(!Ft.isAnEndpoint(Gt))for(var uo=this._splitSafely(Ft,Gt),Tr=0,_e=uo.length;Tr<_e;Tr++)$.push(uo[Tr]);if(!bt.isAnEndpoint(Gt))for(var Gi=this._splitSafely(bt,Gt),Pi=0,li=Gi.length;Pi<li;Pi++)$.push(Gi[Pi])}}this.tree.remove(P)}return $}},{key:"_splitSafely",value:function(b,P){this.tree.remove(b);var $=b.rightSE;this.queue.remove($);var ft=b.split(P);return ft.push($),void 0===b.consumedBy&&this.tree.insert(b),ft}}]),dt}(),Jt=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ee=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Bt=new(function(){function dt(){gt(this,dt)}return q(dt,[{key:"run",value:function(b,P,$){Bt.type=b,G.reset();for(var ft=[new Mt(P,!0)],wt=0,Tt=$.length;wt<Tt;wt++)ft.push(new Mt($[wt],!1));if(Bt.numMultiPolys=ft.length,"difference"===Bt.type)for(var Ft=ft[0],bt=1;bt<ft.length;)null!==N(ft[bt].bbox,Ft.bbox)?bt++:ft.splice(bt,1);if("intersection"===Bt.type)for(var ce=0,me=ft.length;ce<me;ce++)for(var zt=ft[ce],pe=ce+1,_n=ft.length;pe<_n;pe++)if(null===N(zt.bbox,ft[pe].bbox))return[];for(var $t=new Lt(J.compare),Ke=0,xn=ft.length;Ke<xn;Ke++)for(var Rn=ft[Ke].getSweepEvents(),Wn=0,Cn=Rn.length;Wn<Cn;Wn++)if($t.insert(Rn[Wn]),$t.size>Jt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var fr=new te($t),gn=$t.size,Cr=$t.pop();Cr;){var qn=Cr.key;if($t.size===gn){var Gt=qn.segment;throw new Error("Unable to pop() ".concat(qn.isLeft?"left":"right"," SweepEvent ")+"[".concat(qn.point.x,", ").concat(qn.point.y,"] from segment #").concat(Gt.id," ")+"[".concat(Gt.leftSE.point.x,", ").concat(Gt.leftSE.point.y,"] -> ")+"[".concat(Gt.rightSE.point.x,", ").concat(Gt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if($t.size>Jt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(fr.segments.length>ee)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var uo=fr.process(qn),Tr=0,_e=uo.length;Tr<_e;Tr++){var Gi=uo[Tr];void 0===Gi.consumedBy&&$t.insert(Gi)}gn=$t.size,Cr=$t.pop()}G.reset();var Pi=qt.factory(fr.segments);return new Qt(Pi).getGeom()}}]),dt}());return{union:function(R){for(var b=arguments.length,P=new Array(b>1?b-1:0),$=1;$<b;$++)P[$-1]=arguments[$];return Bt.run("union",R,P)},intersection:function(R){for(var b=arguments.length,P=new Array(b>1?b-1:0),$=1;$<b;$++)P[$-1]=arguments[$];return Bt.run("intersection",R,P)},xor:function(R){for(var b=arguments.length,P=new Array(b>1?b-1:0),$=1;$<b;$++)P[$-1]=arguments[$];return Bt.run("xor",R,P)},difference:function(R){for(var b=arguments.length,P=new Array(b>1?b-1:0),$=1;$<b;$++)P[$-1]=arguments[$];return Bt.run("difference",R,P)}}}()},3544:(At,gt,W)=>{"use strict";At.exports=H,At.exports.default=H;var q=W(6709);function H(N,L){if(!(this instanceof H))return new H(N,L);this._maxEntries=Math.max(4,N||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),L&&this._initFormat(L),this.clear()}function rt(N,L,M){if(!M)return L.indexOf(N);for(var U=0;U<L.length;U++)if(M(N,L[U]))return U;return-1}function T(N,L){et(N,0,N.children.length,L,N)}function et(N,L,M,U,C){C||(C=I(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var G,O=L;O<M;O++)G=N.children[O],j(C,N.leaf?U(G):G);return C}function j(N,L){return N.minX=Math.min(N.minX,L.minX),N.minY=Math.min(N.minY,L.minY),N.maxX=Math.max(N.maxX,L.maxX),N.maxY=Math.max(N.maxY,L.maxY),N}function ut(N,L){return N.minX-L.minX}function mt(N,L){return N.minY-L.minY}function Lt(N){return(N.maxX-N.minX)*(N.maxY-N.minY)}function Rt(N){return N.maxX-N.minX+(N.maxY-N.minY)}function Ct(N,L){return(Math.max(L.maxX,N.maxX)-Math.min(L.minX,N.minX))*(Math.max(L.maxY,N.maxY)-Math.min(L.minY,N.minY))}function it(N,L){var M=Math.max(N.minX,L.minX),U=Math.max(N.minY,L.minY),C=Math.min(N.maxX,L.maxX),O=Math.min(N.maxY,L.maxY);return Math.max(0,C-M)*Math.max(0,O-U)}function yt(N,L){return N.minX<=L.minX&&N.minY<=L.minY&&L.maxX<=N.maxX&&L.maxY<=N.maxY}function Dt(N,L){return L.minX<=N.maxX&&L.minY<=N.maxY&&L.maxX>=N.minX&&L.maxY>=N.minY}function I(N){return{children:N,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function k(N,L,M,U,C){for(var G,O=[L,M];O.length;)!((M=O.pop())-(L=O.pop())<=U)&&(G=L+Math.ceil((M-L)/U/2)*U,q(N,G,L,M,C),O.push(L,G,G,M))}H.prototype={all:function(){return this._all(this.data,[])},search:function(N){var L=this.data,M=[],U=this.toBBox;if(!Dt(N,L))return M;for(var O,G,w,ht,C=[];L;){for(O=0,G=L.children.length;O<G;O++)w=L.children[O],Dt(N,ht=L.leaf?U(w):w)&&(L.leaf?M.push(w):yt(N,ht)?this._all(w,M):C.push(w));L=C.pop()}return M},collides:function(N){var L=this.data,M=this.toBBox;if(!Dt(N,L))return!1;for(var C,O,G,w,U=[];L;){for(C=0,O=L.children.length;C<O;C++)if(G=L.children[C],Dt(N,w=L.leaf?M(G):G)){if(L.leaf||yt(N,w))return!0;U.push(G)}L=U.pop()}return!1},load:function(N){if(!N||!N.length)return this;if(N.length<this._minEntries){for(var L=0,M=N.length;L<M;L++)this.insert(N[L]);return this}var U=this._build(N.slice(),0,N.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var C=this.data;this.data=U,U=C}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},insert:function(N){return N&&this._insert(N,this.data.height-1),this},clear:function(){return this.data=I([]),this},remove:function(N,L){if(!N)return this;for(var G,w,ht,K,M=this.data,U=this.toBBox(N),C=[],O=[];M||C.length;){if(M||(M=C.pop(),w=C[C.length-1],G=O.pop(),K=!0),M.leaf&&-1!==(ht=rt(N,M.children,L)))return M.children.splice(ht,1),C.push(M),this._condense(C),this;K||M.leaf||!yt(M,U)?w?(G++,M=w.children[G],K=!1):M=null:(C.push(M),O.push(G),G=0,w=M,M=M.children[0])}return this},toBBox:function(N){return N},compareMinX:ut,compareMinY:mt,toJSON:function(){return this.data},fromJSON:function(N){return this.data=N,this},_all:function(N,L){for(var M=[];N;)N.leaf?L.push.apply(L,N.children):M.push.apply(M,N.children),N=M.pop();return L},_build:function(N,L,M,U){var G,C=M-L+1,O=this._maxEntries;if(C<=O)return T(G=I(N.slice(L,M+1)),this.toBBox),G;U||(U=Math.ceil(Math.log(C)/Math.log(O)),O=Math.ceil(C/Math.pow(O,U-1))),(G=I([])).leaf=!1,G.height=U;var K,Q,A,Ot,w=Math.ceil(C/O),ht=w*Math.ceil(Math.sqrt(O));for(k(N,L,M,ht,this.compareMinX),K=L;K<=M;K+=ht)for(k(N,K,A=Math.min(K+ht-1,M),w,this.compareMinY),Q=K;Q<=A;Q+=w)Ot=Math.min(Q+w-1,A),G.children.push(this._build(N,Q,Ot,U-1));return T(G,this.toBBox),G},_chooseSubtree:function(N,L,M,U){for(var C,O,G,w,ht,K,Q,A;U.push(L),!L.leaf&&U.length-1!==M;){for(Q=A=1/0,C=0,O=L.children.length;C<O;C++)ht=Lt(G=L.children[C]),(K=Ct(N,G)-ht)<A?(A=K,Q=ht<Q?ht:Q,w=G):K===A&&ht<Q&&(Q=ht,w=G);L=w||L.children[0]}return L},_insert:function(N,L,M){var C=M?N:(0,this.toBBox)(N),O=[],G=this._chooseSubtree(C,this.data,L,O);for(G.children.push(N),j(G,C);L>=0&&O[L].children.length>this._maxEntries;)this._split(O,L),L--;this._adjustParentBBoxes(C,O,L)},_split:function(N,L){var M=N[L],U=M.children.length,C=this._minEntries;this._chooseSplitAxis(M,C,U);var O=this._chooseSplitIndex(M,C,U),G=I(M.children.splice(O,M.children.length-O));G.height=M.height,G.leaf=M.leaf,T(M,this.toBBox),T(G,this.toBBox),L?N[L-1].children.push(G):this._splitRoot(M,G)},_splitRoot:function(N,L){this.data=I([N,L]),this.data.height=N.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},_chooseSplitIndex:function(N,L,M){var U,C,O,G,w,ht,K,Q;for(ht=K=1/0,U=L;U<=M-L;U++)G=it(C=et(N,0,U,this.toBBox),O=et(N,U,M,this.toBBox)),w=Lt(C)+Lt(O),G<ht?(ht=G,Q=U,K=w<K?w:K):G===ht&&w<K&&(K=w,Q=U);return Q},_chooseSplitAxis:function(N,L,M){var U=N.leaf?this.compareMinX:ut,C=N.leaf?this.compareMinY:mt;this._allDistMargin(N,L,M,U)<this._allDistMargin(N,L,M,C)&&N.children.sort(U)},_allDistMargin:function(N,L,M,U){N.children.sort(U);var ht,K,C=this.toBBox,O=et(N,0,L,C),G=et(N,M-L,M,C),w=Rt(O)+Rt(G);for(ht=L;ht<M-L;ht++)K=N.children[ht],j(O,N.leaf?C(K):K),w+=Rt(O);for(ht=M-L-1;ht>=L;ht--)K=N.children[ht],j(G,N.leaf?C(K):K),w+=Rt(G);return w},_adjustParentBBoxes:function(N,L,M){for(var U=M;U>=0;U--)j(L[U],N)},_condense:function(N){for(var M,L=N.length-1;L>=0;L--)0===N[L].children.length?L>0?(M=N[L-1].children).splice(M.indexOf(N[L]),1):this.clear():T(N[L],this.toBBox)},_initFormat:function(N){var L=["return a"," - b",";"];this.compareMinX=new Function("a","b",L.join(N[0])),this.compareMinY=new Function("a","b",L.join(N[1])),this.toBBox=new Function("a","return {minX: a"+N[0]+", minY: a"+N[1]+", maxX: a"+N[2]+", maxY: a"+N[3]+"};")}}},6709:function(At){At.exports=function(){"use strict";function W(rt,T,et,j,ut){for(;j>et;){if(j-et>600){var mt=j-et+1,Lt=T-et+1,Rt=Math.log(mt),Ct=.5*Math.exp(2*Rt/3),it=.5*Math.sqrt(Rt*Ct*(mt-Ct)/mt)*(Lt-mt/2<0?-1:1);W(rt,T,Math.max(et,Math.floor(T-Lt*Ct/mt+it)),Math.min(j,Math.floor(T+(mt-Lt)*Ct/mt+it)),ut)}var I=rt[T],k=et,N=j;for(q(rt,et,T),ut(rt[j],I)>0&&q(rt,et,j);k<N;){for(q(rt,k,N),k++,N--;ut(rt[k],I)<0;)k++;for(;ut(rt[N],I)>0;)N--}0===ut(rt[et],I)?q(rt,et,N):q(rt,++N,j),N<=T&&(et=N+1),T<=N&&(j=N-1)}}function q(rt,T,et){var j=rt[T];rt[T]=rt[et],rt[et]=j}function H(rt,T){return rt<T?-1:rt>T?1:0}return function gt(rt,T,et,j,ut){W(rt,T,et||0,j||rt.length-1,ut||H)}}()},4468:(At,gt,W)=>{"use strict";var q=W(9582).functionsHaveConfigurableNames(),H=Object,rt=TypeError;At.exports=function(){if(null!=this&&this!==H(this))throw new rt("RegExp.prototype.flags getter called on non-object");var et="";return this.hasIndices&&(et+="d"),this.global&&(et+="g"),this.ignoreCase&&(et+="i"),this.multiline&&(et+="m"),this.dotAll&&(et+="s"),this.unicode&&(et+="u"),this.sticky&&(et+="y"),et},q&&Object.defineProperty&&Object.defineProperty(At.exports,"name",{value:"get flags"})},9235:(At,gt,W)=>{"use strict";var q=W(2358),H=W(5685),rt=W(4468),T=W(6343),et=W(1956),j=H(T());q(j,{getPolyfill:T,implementation:rt,shim:et}),At.exports=j},6343:(At,gt,W)=>{"use strict";var q=W(4468),H=W(2358).supportsDescriptors,rt=Object.getOwnPropertyDescriptor;At.exports=function(){if(H&&"gim"===/a/gim.flags){var et=rt(RegExp.prototype,"flags");if(et&&"function"==typeof et.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var j="",ut={};if(Object.defineProperty(ut,"hasIndices",{get:function(){j+="d"}}),Object.defineProperty(ut,"sticky",{get:function(){j+="y"}}),"dy"===j)return et.get}}return q}},1956:(At,gt,W)=>{"use strict";var q=W(2358).supportsDescriptors,H=W(6343),rt=Object.getOwnPropertyDescriptor,T=Object.defineProperty,et=TypeError,j=Object.getPrototypeOf,ut=/a/;At.exports=function(){if(!q||!j)throw new et("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var Lt=H(),Rt=j(ut),Ct=rt(Rt,"flags");return(!Ct||Ct.get!==Lt)&&T(Rt,"flags",{configurable:!0,enumerable:!1,get:Lt}),Lt}},7563:function(At,gt){!function(W){"use strict";function rt(yt,Dt,I,k,N){let L,M,U,C,O=Dt[0],G=k[0],w=0,ht=0;G>O==G>-O?(L=O,O=Dt[++w]):(L=G,G=k[++ht]);let K=0;if(w<yt&&ht<I)for(G>O==G>-O?(U=L-((M=O+L)-O),O=Dt[++w]):(U=L-((M=G+L)-G),G=k[++ht]),L=M,0!==U&&(N[K++]=U);w<yt&&ht<I;)G>O==G>-O?(U=L-((M=L+O)-(C=M-L))+(O-C),O=Dt[++w]):(U=L-((M=L+G)-(C=M-L))+(G-C),G=k[++ht]),L=M,0!==U&&(N[K++]=U);for(;w<yt;)U=L-((M=L+O)-(C=M-L))+(O-C),O=Dt[++w],L=M,0!==U&&(N[K++]=U);for(;ht<I;)U=L-((M=L+G)-(C=M-L))+(G-C),G=k[++ht],L=M,0!==U&&(N[K++]=U);return 0===L&&0!==K||(N[K++]=L),K}function T(yt){return new Float64Array(yt)}const mt=T(4),Lt=T(8),Rt=T(12),Ct=T(16),it=T(4);W.orient2d=function(yt,Dt,I,k,N,L){const M=(Dt-L)*(I-N),U=(yt-N)*(k-L),C=M-U;if(0===M||0===U||M>0!=U>0)return C;const O=Math.abs(M+U);return Math.abs(C)>=33306690738754716e-32*O?C:-function(G,w,ht,K,Q,A,Ot){let Pt,X,at,J,ot,lt,z,Nt,Mt,qt,xt,Qt,te,Jt,ee,Vt,Bt,hn;const sn=G-Q,pn=ht-Q,ie=w-A,fe=K-A;ot=(ee=(Nt=sn-(z=(lt=134217729*sn)-(lt-sn)))*(qt=fe-(Mt=(lt=134217729*fe)-(lt-fe)))-((Jt=sn*fe)-z*Mt-Nt*Mt-z*qt))-(xt=ee-(Bt=(Nt=ie-(z=(lt=134217729*ie)-(lt-ie)))*(qt=pn-(Mt=(lt=134217729*pn)-(lt-pn)))-((Vt=ie*pn)-z*Mt-Nt*Mt-z*qt))),mt[0]=ee-(xt+ot)+(ot-Bt),ot=(te=Jt-((Qt=Jt+xt)-(ot=Qt-Jt))+(xt-ot))-(xt=te-Vt),mt[1]=te-(xt+ot)+(ot-Vt),ot=(hn=Qt+xt)-Qt,mt[2]=Qt-(hn-ot)+(xt-ot),mt[3]=hn;let dt=function(ft,wt){let Tt=wt[0];for(let Ft=1;Ft<4;Ft++)Tt+=wt[Ft];return Tt}(0,mt),R=22204460492503146e-32*Ot;if(dt>=R||-dt>=R||(Pt=G-(sn+(ot=G-sn))+(ot-Q),at=ht-(pn+(ot=ht-pn))+(ot-Q),X=w-(ie+(ot=w-ie))+(ot-A),J=K-(fe+(ot=K-fe))+(ot-A),0===Pt&&0===X&&0===at&&0===J)||(R=11093356479670487e-47*Ot+33306690738754706e-32*Math.abs(dt),(dt+=sn*J+fe*Pt-(ie*at+pn*X))>=R||-dt>=R))return dt;ot=(ee=(Nt=Pt-(z=(lt=134217729*Pt)-(lt-Pt)))*(qt=fe-(Mt=(lt=134217729*fe)-(lt-fe)))-((Jt=Pt*fe)-z*Mt-Nt*Mt-z*qt))-(xt=ee-(Bt=(Nt=X-(z=(lt=134217729*X)-(lt-X)))*(qt=pn-(Mt=(lt=134217729*pn)-(lt-pn)))-((Vt=X*pn)-z*Mt-Nt*Mt-z*qt))),it[0]=ee-(xt+ot)+(ot-Bt),ot=(te=Jt-((Qt=Jt+xt)-(ot=Qt-Jt))+(xt-ot))-(xt=te-Vt),it[1]=te-(xt+ot)+(ot-Vt),ot=(hn=Qt+xt)-Qt,it[2]=Qt-(hn-ot)+(xt-ot),it[3]=hn;const b=rt(4,mt,4,it,Lt);ot=(ee=(Nt=sn-(z=(lt=134217729*sn)-(lt-sn)))*(qt=J-(Mt=(lt=134217729*J)-(lt-J)))-((Jt=sn*J)-z*Mt-Nt*Mt-z*qt))-(xt=ee-(Bt=(Nt=ie-(z=(lt=134217729*ie)-(lt-ie)))*(qt=at-(Mt=(lt=134217729*at)-(lt-at)))-((Vt=ie*at)-z*Mt-Nt*Mt-z*qt))),it[0]=ee-(xt+ot)+(ot-Bt),ot=(te=Jt-((Qt=Jt+xt)-(ot=Qt-Jt))+(xt-ot))-(xt=te-Vt),it[1]=te-(xt+ot)+(ot-Vt),ot=(hn=Qt+xt)-Qt,it[2]=Qt-(hn-ot)+(xt-ot),it[3]=hn;const P=rt(b,Lt,4,it,Rt);ot=(ee=(Nt=Pt-(z=(lt=134217729*Pt)-(lt-Pt)))*(qt=J-(Mt=(lt=134217729*J)-(lt-J)))-((Jt=Pt*J)-z*Mt-Nt*Mt-z*qt))-(xt=ee-(Bt=(Nt=X-(z=(lt=134217729*X)-(lt-X)))*(qt=at-(Mt=(lt=134217729*at)-(lt-at)))-((Vt=X*at)-z*Mt-Nt*Mt-z*qt))),it[0]=ee-(xt+ot)+(ot-Bt),ot=(te=Jt-((Qt=Jt+xt)-(ot=Qt-Jt))+(xt-ot))-(xt=te-Vt),it[1]=te-(xt+ot)+(ot-Vt),ot=(hn=Qt+xt)-Qt,it[2]=Qt-(hn-ot)+(xt-ot),it[3]=hn;const $=rt(P,Rt,4,it,Ct);return Ct[$-1]}(yt,Dt,I,k,N,L,O)},W.orient2dfast=function(yt,Dt,I,k,N,L){return(Dt-L)*(I-N)-(yt-N)*(k-L)},Object.defineProperty(W,"__esModule",{value:!0})}(gt)},9231:At=>{"use strict";At.exports={eudist:function(W,q,H){for(var rt=W.length,T=0,et=0;et<rt;et++){var j=(W[et]||0)-(q[et]||0);T+=j*j}return H?Math.sqrt(T):T},mandist:function(W,q,H){for(var rt=W.length,T=0,et=0;et<rt;et++)T+=Math.abs((W[et]||0)-(q[et]||0));return H?Math.sqrt(T):T},dist:function(W,q,H){var rt=Math.abs(W-q);return H?rt:rt*rt}}},5561:(At,gt,W)=>{"use strict";var q=W(9231),H=q.eudist,rt=q.dist;At.exports={kmrand:function(et,j){for(var ut={},mt=[],Lt=j<<2,Rt=et.length,Ct=et[0].length>0;mt.length<j&&Lt-- >0;){var it=et[Math.floor(Math.random()*Rt)],yt=Ct?it.join("_"):""+it;ut[yt]||(ut[yt]=!0,mt.push(it))}if(mt.length<j)throw new Error("Error initializating clusters");return mt},kmpp:function(et,j){var ut=et[0].length?H:rt,mt=[],Lt=et.length,Rt=et[0].length>0,it=et[Math.floor(Math.random()*Lt)];for(Rt&&it.join("_"),mt.push(it);mt.length<j;){for(var Dt=[],I=mt.length,k=0,N=[],L=0;L<Lt;L++){for(var M=1/0,U=0;U<I;U++){var C=ut(et[L],mt[U]);C<=M&&(M=C)}Dt[L]=M}for(var O=0;O<Lt;O++)k+=Dt[O];for(var G=0;G<Lt;G++)N[G]={i:G,v:et[G],pr:Dt[G]/k,cs:0};N.sort(function(Q,A){return Q.pr-A.pr}),N[0].cs=N[0].pr;for(var w=1;w<Lt;w++)N[w].cs=N[w-1].cs+N[w].pr;for(var ht=Math.random(),K=0;K<Lt-1&&N[K++].cs<ht;);mt.push(N[K-1].v)}return mt}}},9475:(At,gt,W)=>{"use strict";var q=W(9231),H=W(5561),rt=q.eudist,j=H.kmrand,ut=H.kmpp;function Lt(Ct,it,yt){yt=yt||[];for(var Dt=0;Dt<Ct;Dt++)yt[Dt]=it;return yt}At.exports=function Rt(Ct,it,yt,Dt){var I=[],k=[],N=[],L=[],M=!1,U=Dt||1e4,C=Ct.length,O=Ct[0].length,G=O>0,w=[];if(yt)I="kmrand"==yt?j(Ct,it):"kmpp"==yt?ut(Ct,it):yt;else for(var ht={};I.length<it;){var K=Math.floor(Math.random()*C);ht[K]||(ht[K]=!0,I.push(Ct[K]))}do{Lt(it,0,w);for(var Q=0;Q<C;Q++){for(var A=1/0,Ot=0,Pt=0;Pt<it;Pt++)(L=G?rt(Ct[Q],I[Pt]):Math.abs(Ct[Q]-I[Pt]))<=A&&(A=L,Ot=Pt);N[Q]=Ot,w[Ot]++}for(var X=[],J=(k=[],0);J<it;J++)X[J]=G?Lt(O,0,X[J]):0,k[J]=I[J];if(G){for(var ot=0;ot<it;ot++)I[ot]=[];for(var lt=0;lt<C;lt++)for(var Nt=X[N[lt]],Mt=Ct[lt],qt=0;qt<O;qt++)Nt[qt]+=Mt[qt];M=!0;for(var xt=0;xt<it;xt++){for(var Qt=I[xt],te=X[xt],Jt=k[xt],ee=w[xt],Vt=0;Vt<O;Vt++)Qt[Vt]=te[Vt]/ee||0;if(M)for(var Bt=0;Bt<O;Bt++)if(Jt[Bt]!=Qt[Bt]){M=!1;break}}}else{for(var hn=0;hn<C;hn++)X[N[hn]]+=Ct[hn];for(var pn=0;pn<it;pn++)I[pn]=X[pn]/w[pn]||0;M=!0;for(var ie=0;ie<it;ie++)if(k[ie]!=I[ie]){M=!1;break}}M=M||--U<=0}while(!M);return{it:1e4-U,k:it,idxs:N,centroids:I}}},7253:(At,gt,W)=>{"use strict";W.r(gt),W.d(gt,{default:()=>q});class q{constructor(T=[],et=H){if(this.data=T,this.length=this.data.length,this.compare=et,this.length>0)for(let j=(this.length>>1)-1;j>=0;j--)this._down(j)}push(T){this.data.push(T),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const T=this.data[0],et=this.data.pop();return this.length--,this.length>0&&(this.data[0]=et,this._down(0)),T}peek(){return this.data[0]}_up(T){const{data:et,compare:j}=this,ut=et[T];for(;T>0;){const mt=T-1>>1,Lt=et[mt];if(j(ut,Lt)>=0)break;et[T]=Lt,T=mt}et[T]=ut}_down(T){const{data:et,compare:j}=this,ut=this.length>>1,mt=et[T];for(;T<ut;){let Lt=1+(T<<1),Rt=et[Lt];const Ct=Lt+1;if(Ct<this.length&&j(et[Ct],Rt)<0&&(Lt=Ct,Rt=et[Ct]),j(Rt,mt)>=0)break;et[T]=Rt,T=Lt}et[T]=mt}}function H(rt,T){return rt<T?-1:rt>T?1:0}},770:function(At,gt){!function(W){"use strict";function q(){}function H(t){this.message=t||""}function rt(t){this.message=t||""}function T(t){this.message=t||""}function et(){}function j(t){return null===t?Ci:t.color}function ut(t){return null===t?null:t.parent}function mt(t,e){null!==t&&(t.color=e)}function Lt(t){return null===t?null:t.left}function Rt(t){return null===t?null:t.right}function Ct(){this.root_=null,this.size_=0}function it(){}function yt(){this.array_=[],arguments[0]instanceof gn&&this.addAll(arguments[0])}function Dt(){}function I(t){this.message=t||""}function k(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,s=1 in arguments&&parseInt(Number(arguments[1]),10)||0;s=s<0?Math.max(i+s,0):Math.min(s,i);var l=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(l=l<0?Math.max(i+arguments[2],0):Math.min(l,i);s<l;)e[s]=t,++s;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var N=function(){};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.prototype.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i};var L=function(t){function e(i){t.call(this,i),this.name="IllegalArgumentException",this.message=i,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),M=function(){},U={MAX_VALUE:{configurable:!0}};M.isNaN=function(t){return Number.isNaN(t)},M.doubleToLongBits=function(t){return t},M.longBitsToDouble=function(t){return t},M.isInfinite=function(t){return!Number.isFinite(t)},U.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(M,U);var C=function(){},O=function(){},G=function(){},w=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ht={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};w.prototype.setOrdinate=function(t,e){switch(t){case w.X:this.x=e;break;case w.Y:this.y=e;break;case w.Z:this.z=e;break;default:throw new L("Invalid ordinate index: "+t)}},w.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!N.equalsWithTolerance(this.x,e.x,i)&&!!N.equalsWithTolerance(this.y,e.y,i)}},w.prototype.getOrdinate=function(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.z}throw new L("Invalid ordinate index: "+t)},w.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||M.isNaN(this.z))&&M.isNaN(t.z)},w.prototype.equals=function(t){return t instanceof w&&this.equals2D(t)},w.prototype.equalInZ=function(t,e){return N.equalsWithTolerance(this.z,t.z,e)},w.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},w.prototype.clone=function(){},w.prototype.copy=function(){return new w(this)},w.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},w.prototype.distance3D=function(t){var e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return Math.sqrt(e*e+i*i+s*s)},w.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},w.prototype.hashCode=function(){var t=17;return 37*(t=37*t+w.hashCode(this.x))+w.hashCode(this.y)},w.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},w.prototype.interfaces_=function(){return[C,O,q]},w.prototype.getClass=function(){return w},w.hashCode=function(){if(1===arguments.length){var e=M.doubleToLongBits(arguments[0]);return Math.trunc((e^e)>>>32)}},ht.DimensionalComparator.get=function(){return K},ht.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ht.NULL_ORDINATE.get=function(){return M.NaN},ht.X.get=function(){return 0},ht.Y.get=function(){return 1},ht.Z.get=function(){return 2},Object.defineProperties(w,ht);var K=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new L("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};K.prototype.compare=function(t,e){var i=t,s=e,l=K.compare(i.x,s.x);if(0!==l)return l;var d=K.compare(i.y,s.y);return 0!==d?d:this._dimensionsToTest<=2?0:K.compare(i.z,s.z)},K.prototype.interfaces_=function(){return[G]},K.prototype.getClass=function(){return K},K.compare=function(t,e){return t<e?-1:t>e?1:M.isNaN(t)?M.isNaN(e)?0:-1:M.isNaN(e)?1:0};var Q=function(){};Q.prototype.create=function(){},Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q};var A=function(){},Ot={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.toLocationSymbol=function(t){switch(t){case A.EXTERIOR:return"e";case A.BOUNDARY:return"b";case A.INTERIOR:return"i";case A.NONE:return"-"}throw new L("Unknown location value: "+t)},Ot.INTERIOR.get=function(){return 0},Ot.BOUNDARY.get=function(){return 1},Ot.EXTERIOR.get=function(){return 2},Ot.NONE.get=function(){return-1},Object.defineProperties(A,Ot);var Pt=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},X=function(){},at={LOG_10:{configurable:!0}};X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.log10=function(t){var e=Math.log(t);return M.isInfinite(e)||M.isNaN(e)?e:e/X.LOG_10},X.min=function(t,e,i,s){var l=t;return e<l&&(l=e),i<l&&(l=i),s<l&&(l=s),l},X.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],l=arguments[1],d=arguments[2];return s<l?l:s>d?d:s}},X.wrap=function(t,e){return t<0?e- -t%e:t%e},X.max=function(){if(3===arguments.length){var e=arguments[1],i=arguments[2],s=arguments[0];return e>s&&(s=e),i>s&&(s=i),s}if(4===arguments.length){var d=arguments[1],_=arguments[2],E=arguments[3],B=arguments[0];return d>B&&(B=d),_>B&&(B=_),E>B&&(B=E),B}},X.average=function(t,e){return(t+e)/2},at.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(X,at);var J=function(t){this.str=t};J.prototype.append=function(t){this.str+=t},J.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},J.prototype.toString=function(t){return this.str};var ot=function(t){this.value=t};ot.prototype.intValue=function(){return this.value},ot.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ot.isNaN=function(t){return Number.isNaN(t)};var lt=function(){};lt.isWhitespace=function(t){return t<=32&&t>=0||127===t},lt.toUpperCase=function(t){return t.toUpperCase()};var z=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Nt={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};z.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},z.prototype.extractSignificantDigits=function(t,e){var i=this.abs(),s=z.magnitude(i._hi),l=z.TEN.pow(s);(i=i.divide(l)).gt(z.TEN)?(i=i.divide(z.TEN),s+=1):i.lt(z.ONE)&&(i=i.multiply(z.TEN),s-=1);for(var d=s+1,_=new J,E=z.MAX_PRINT_DIGITS-1,B=0;B<=E;B++){t&&B===d&&_.append(".");var nt=Math.trunc(i._hi);if(nt<0)break;var Et=!1,St=0;nt>9?(Et=!0,St="9"):St="0"+nt,_.append(St),i=i.subtract(z.valueOf(nt)).multiply(z.TEN),Et&&i.selfAdd(z.TEN);var Xt=!0,Ut=z.magnitude(i._hi);if(Ut<0&&Math.abs(Ut)>=E-B&&(Xt=!1),!Xt)break}return e[0]=s,_.toString()},z.prototype.sqr=function(){return this.multiply(this)},z.prototype.doubleValue=function(){return this._hi+this._lo},z.prototype.subtract=function(){return arguments[0]instanceof z?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},z.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},z.prototype.isZero=function(){return 0===this._hi&&0===this._lo},z.prototype.selfSubtract=function(){if(arguments[0]instanceof z){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},z.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},z.prototype.min=function(t){return this.le(t)?this:t},z.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var d,E,B,Et,i=arguments[0],l=null,_=null,nt=null,St=null;return this._hi=St=(B=this._hi/i)+(nt=(this._hi-(Et=B*i)-(St=(l=(nt=z.SPLIT*B)-(l=nt-B))*(_=(St=z.SPLIT*i)-(_=St-i))-Et+l*(E=i-_)+(d=B-l)*_+d*E)+this._lo-B*arguments[1])/i),this._lo=B-St+nt,this}},z.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},z.prototype.divide=function(){if(arguments[0]instanceof z){var i,l,d,E,t=arguments[0],e=null,s=null,_=null,B=null;return i=(d=this._hi/t._hi)-(e=(_=z.SPLIT*d)-(e=_-d)),B=e*(s=(B=z.SPLIT*t._hi)-(s=B-t._hi))-(E=d*t._hi)+e*(l=t._hi-s)+i*s+i*l,new z(B=d+(_=(this._hi-E-B+this._lo-d*t._lo)/t._hi),d-B+_)}if("number"==typeof arguments[0]){var nt=arguments[0];return M.isNaN(nt)?z.createNaN():z.copy(this).selfDivide(nt,0)}},z.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},z.prototype.pow=function(t){if(0===t)return z.valueOf(1);var e=new z(this),i=z.valueOf(1),s=Math.abs(t);if(s>1)for(;s>0;)s%2==1&&i.selfMultiply(e),(s/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i},z.prototype.ceil=function(){if(this.isNaN())return z.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new z(t,e)},z.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},z.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},z.prototype.setValue=function(){return arguments[0]instanceof z||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},z.prototype.max=function(t){return this.ge(t)?this:t},z.prototype.sqrt=function(){if(this.isZero())return z.valueOf(0);if(this.isNegative())return z.NaN;var t=1/Math.sqrt(this._hi),i=z.valueOf(this._hi*t),s=this.subtract(i.sqr())._hi*(.5*t);return i.add(s)},z.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var i,s,l,_,E,e=arguments[0];return this._hi=(i=(l=this._hi+e)+(E=e-(_=l-this._hi)+(this._hi-(l-_))+this._lo))+(s=E+(l-i)),this._lo=s+(i-this._hi),this}}else if(2===arguments.length){var Et,St,Ut,ge,B=arguments[0],nt=arguments[1],Xt=null,Ht=null,oe=null;Ht=(Ut=this._hi+B)-(oe=Ut-this._hi),Xt=(St=this._lo+nt)-(ge=St-this._lo);var on=(Et=Ut+(oe=(Ht=B-oe+(this._hi-Ht))+St))+(oe=(Xt=nt-ge+(this._lo-Xt))+(oe+(Ut-Et))),en=oe+(Et-on);return this._hi=on,this._lo=en,this}},z.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof z){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var d,E,i=arguments[0],l=null,_=null,B=null,nt=null;l=(B=z.SPLIT*this._hi)-this._hi,l=B-l;var Et=(B=this._hi*i)+(nt=l*(_=(nt=z.SPLIT*i)-(_=nt-i))-B+l*(E=i-_)+(d=this._hi-l)*_+d*E+(this._hi*arguments[1]+this._lo*i)),St=nt+(l=B-Et);return this._hi=Et,this._lo=St,this}},z.prototype.selfSqr=function(){return this.selfMultiply(this)},z.prototype.floor=function(){if(this.isNaN())return z.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new z(t,e)},z.prototype.negate=function(){return this.isNaN()?this:new z(-this._hi,-this._lo)},z.prototype.clone=function(){},z.prototype.multiply=function(){if(arguments[0]instanceof z){var t=arguments[0];return t.isNaN()?z.createNaN():z.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return M.isNaN(e)?z.createNaN():z.copy(this).selfMultiply(e,0)}},z.prototype.isNaN=function(){return M.isNaN(this._hi)},z.prototype.intValue=function(){return Math.trunc(this._hi)},z.prototype.toString=function(){var t=z.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},z.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),s=e[0]+1,l=i;return"."===i.charAt(0)?l="0"+i:s<0?l="0."+z.stringOfChar("0",-s)+i:-1===i.indexOf(".")&&(l=i+z.stringOfChar("0",s-i.length)+".0"),this.isNegative()?"-"+l:l},z.prototype.reciprocal=function(){var e,s,l,_,t=null,i=null,d=null,E=null;e=(l=1/this._hi)-(t=(d=z.SPLIT*l)-(t=d-l)),i=(E=z.SPLIT*this._hi)-this._hi;var B=l+(d=(1-(_=l*this._hi)-(E=t*(i=E-i)-_+t*(s=this._hi-i)+e*i+e*s)-l*this._lo)/this._hi);return new z(B,l-B+d)},z.prototype.toSciNotation=function(){if(this.isZero())return z.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),s=z.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new Error("Found leading zero: "+i);var l="";i.length>1&&(l=i.substring(1));var d=i.charAt(0)+"."+l;return this.isNegative()?"-"+d+s:d+s},z.prototype.abs=function(){return this.isNaN()?z.NaN:this.isNegative()?this.negate():new z(this)},z.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},z.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},z.prototype.add=function(){if(arguments[0]instanceof z){var t=arguments[0];return z.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return z.copy(this).selfAdd(e)}},z.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof z){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var s=arguments[1];this._hi=arguments[0],this._lo=s}},z.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},z.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},z.prototype.trunc=function(){return this.isNaN()?z.NaN:this.isPositive()?this.floor():this.ceil()},z.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},z.prototype.interfaces_=function(){return[q,C,O]},z.prototype.getClass=function(){return z},z.sqr=function(t){return z.valueOf(t).selfMultiply(t)},z.valueOf=function(){return"string"==typeof arguments[0]?z.parse(arguments[0]):"number"==typeof arguments[0]?new z(arguments[0]):void 0},z.sqrt=function(t){return z.valueOf(t).sqrt()},z.parse=function(t){for(var e=0,i=t.length;lt.isWhitespace(t.charAt(e));)e++;var s=!1;if(e<i){var l=t.charAt(e);"-"!==l&&"+"!==l||(e++,"-"===l&&(s=!0))}for(var d=new z,_=0,E=0,B=0;!(e>=i);){var nt=t.charAt(e);if(e++,lt.isDigit(nt)){var Et=nt-"0";d.selfMultiply(z.TEN),d.selfAdd(Et),_++}else{if("."!==nt){if("e"===nt||"E"===nt){var St=t.substring(e);try{B=ot.parseInt(St)}catch(ge){throw ge instanceof Error?new Error("Invalid exponent "+St+" in string "+t):ge}break}throw new Error("Unexpected character '"+nt+"' at position "+e+" in string "+t)}E=_}}var Xt=d,Ut=_-E-B;if(0===Ut)Xt=d;else if(Ut>0){var Ht=z.TEN.pow(Ut);Xt=d.divide(Ht)}else if(Ut<0){var oe=z.TEN.pow(-Ut);Xt=d.multiply(oe)}return s?Xt.negate():Xt},z.createNaN=function(){return new z(M.NaN,M.NaN)},z.copy=function(t){return new z(t)},z.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),s=Math.trunc(Math.floor(i));return 10*Math.pow(10,s)<=e&&(s+=1),s},z.stringOfChar=function(t,e){for(var i=new J,s=0;s<e;s++)i.append(t);return i.toString()},Nt.PI.get=function(){return new z(3.141592653589793,12246467991473532e-32)},Nt.TWO_PI.get=function(){return new z(6.283185307179586,24492935982947064e-32)},Nt.PI_2.get=function(){return new z(1.5707963267948966,6123233995736766e-32)},Nt.E.get=function(){return new z(2.718281828459045,14456468917292502e-32)},Nt.NaN.get=function(){return new z(M.NaN,M.NaN)},Nt.EPS.get=function(){return 123259516440783e-46},Nt.SPLIT.get=function(){return 134217729},Nt.MAX_PRINT_DIGITS.get=function(){return 32},Nt.TEN.get=function(){return z.valueOf(10)},Nt.ONE.get=function(){return z.valueOf(1)},Nt.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Nt.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(z,Nt);var Mt=function(){},qt={DP_SAFE_EPSILON:{configurable:!0}};Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.orientationIndex=function(t,e,i){var s=Mt.orientationIndexFilter(t,e,i);if(s<=1)return s;var l=z.valueOf(e.x).selfAdd(-t.x),d=z.valueOf(e.y).selfAdd(-t.y),_=z.valueOf(i.x).selfAdd(-e.x),E=z.valueOf(i.y).selfAdd(-e.y);return l.selfMultiply(E).selfSubtract(d.selfMultiply(_)).signum()},Mt.signOfDet2x2=function(t,e,i,s){return t.multiply(s).selfSubtract(e.multiply(i)).signum()},Mt.intersection=function(t,e,i,s){var l=z.valueOf(s.y).selfSubtract(i.y).selfMultiply(z.valueOf(e.x).selfSubtract(t.x)),d=z.valueOf(s.x).selfSubtract(i.x).selfMultiply(z.valueOf(e.y).selfSubtract(t.y)),_=l.subtract(d),E=z.valueOf(s.x).selfSubtract(i.x).selfMultiply(z.valueOf(t.y).selfSubtract(i.y)),B=z.valueOf(s.y).selfSubtract(i.y).selfMultiply(z.valueOf(t.x).selfSubtract(i.x)),nt=E.subtract(B).selfDivide(_).doubleValue(),Et=z.valueOf(t.x).selfAdd(z.valueOf(e.x).selfSubtract(t.x).selfMultiply(nt)).doubleValue(),St=z.valueOf(e.x).selfSubtract(t.x).selfMultiply(z.valueOf(t.y).selfSubtract(i.y)),Xt=z.valueOf(e.y).selfSubtract(t.y).selfMultiply(z.valueOf(t.x).selfSubtract(i.x)),Ut=St.subtract(Xt).selfDivide(_).doubleValue(),Ht=z.valueOf(i.y).selfAdd(z.valueOf(s.y).selfSubtract(i.y).selfMultiply(Ut)).doubleValue();return new w(Et,Ht)},Mt.orientationIndexFilter=function(t,e,i){var s=null,l=(t.x-i.x)*(e.y-i.y),d=(t.y-i.y)*(e.x-i.x),_=l-d;if(l>0){if(d<=0)return Mt.signum(_);s=l+d}else{if(!(l<0)||d>=0)return Mt.signum(_);s=-l-d}var E=Mt.DP_SAFE_EPSILON*s;return _>=E||-_>=E?Mt.signum(_):2},Mt.signum=function(t){return t>0?1:t<0?-1:0},qt.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Mt,qt);var xt=function(){},Qt={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Qt.X.get=function(){return 0},Qt.Y.get=function(){return 1},Qt.Z.get=function(){return 2},Qt.M.get=function(){return 3},xt.prototype.setOrdinate=function(t,e,i){},xt.prototype.size=function(){},xt.prototype.getOrdinate=function(t,e){},xt.prototype.getCoordinate=function(){},xt.prototype.getCoordinateCopy=function(t){},xt.prototype.getDimension=function(){},xt.prototype.getX=function(t){},xt.prototype.clone=function(){},xt.prototype.expandEnvelope=function(t){},xt.prototype.copy=function(){},xt.prototype.getY=function(t){},xt.prototype.toCoordinateArray=function(){},xt.prototype.interfaces_=function(){return[O]},xt.prototype.getClass=function(){return xt},Object.defineProperties(xt,Qt);var te=function(){},Jt=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(te),ee=function(){};ee.arraycopy=function(t,e,i,s,l){for(var d=0,_=e;_<e+l;_++)i[s+d]=t[_],d++},ee.getProperty=function(t){return{"line.separator":"\n"}[t]};var Vt=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var s=arguments[1];this.x=arguments[0],this.y=s,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var l=arguments[0],d=arguments[1];this.x=l.y*d.w-d.y*l.w,this.y=d.x*l.w-l.x*d.w,this.w=l.x*d.y-d.x*l.y}else if(arguments[0]instanceof w&&arguments[1]instanceof w){var _=arguments[0],E=arguments[1];this.x=_.y-E.y,this.y=E.x-_.x,this.w=_.x*E.y-E.x*_.y}}else if(3===arguments.length){var nt=arguments[1],Et=arguments[2];this.x=arguments[0],this.y=nt,this.w=Et}else if(4===arguments.length){var St=arguments[0],Xt=arguments[1],Ut=arguments[2],Ht=arguments[3],oe=St.y-Xt.y,ge=Xt.x-St.x,on=St.x*Xt.y-Xt.x*St.y,en=Ut.y-Ht.y,mn=Ht.x-Ut.x,xe=Ut.x*Ht.y-Ht.x*Ut.y;this.x=ge*xe-mn*on,this.y=en*on-oe*xe,this.w=oe*mn-en*ge}};Vt.prototype.getY=function(){var t=this.y/this.w;if(M.isNaN(t)||M.isInfinite(t))throw new Jt;return t},Vt.prototype.getX=function(){var t=this.x/this.w;if(M.isNaN(t)||M.isInfinite(t))throw new Jt;return t},Vt.prototype.getCoordinate=function(){var t=new w;return t.x=this.getX(),t.y=this.getY(),t},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.intersection=function(t,e,i,s){var l=t.y-e.y,d=e.x-t.x,_=t.x*e.y-e.x*t.y,E=i.y-s.y,B=s.x-i.x,nt=i.x*s.y-s.x*i.y,Et=l*B-E*d,St=(d*nt-B*_)/Et,Xt=(E*_-l*nt)/Et;if(M.isNaN(St)||M.isInfinite(St)||M.isNaN(Xt)||M.isInfinite(Xt))throw new Jt;return new w(St,Xt)};var Bt=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof w){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var s=arguments[0],l=arguments[1];this.init(s.x,l.x,s.y,l.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},hn={serialVersionUID:{configurable:!0}};Bt.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Bt.prototype.equals=function(t){if(!(t instanceof Bt))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Bt.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new Bt:new Bt(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},Bt.prototype.isNull=function(){return this._maxx<this._minx},Bt.prototype.getMaxX=function(){return this._maxx},Bt.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Bt){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],s=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&s>=this._miny&&s<=this._maxy}},Bt.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Bt){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof w){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],s=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||s>this._maxy||s<this._miny)}},Bt.prototype.getMinY=function(){return this._miny},Bt.prototype.getMinX=function(){return this._minx},Bt.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Bt){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var i=arguments[0],s=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=s,this._maxy=s):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),s<this._miny&&(this._miny=s),s>this._maxy&&(this._maxy=s))}},Bt.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Bt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Bt.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Bt.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Bt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Bt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Bt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Bt.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Bt.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Bt.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Bt)return this.covers(arguments[0]);if(arguments[0]instanceof w)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Bt.prototype.centre=function(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Bt.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Bt){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var i=arguments[0],s=arguments[1];this.init(i.x,s.x,i.y,s.y)}else if(4===arguments.length){var l=arguments[0],d=arguments[1],_=arguments[2],E=arguments[3];l<d?(this._minx=l,this._maxx=d):(this._minx=d,this._maxx=l),_<E?(this._miny=_,this._maxy=E):(this._miny=E,this._maxy=_)}},Bt.prototype.getMaxY=function(){return this._maxy},Bt.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},Bt.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+w.hashCode(this._minx))+w.hashCode(this._maxx))+w.hashCode(this._miny))+w.hashCode(this._maxy)},Bt.prototype.interfaces_=function(){return[C,q]},Bt.prototype.getClass=function(){return Bt},Bt.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var s=arguments[0],l=arguments[1],d=arguments[2],_=arguments[3],E=Math.min(d.x,_.x),B=Math.max(d.x,_.x),nt=Math.min(s.x,l.x),Et=Math.max(s.x,l.x);return!(nt>B||Et<E||(E=Math.min(d.y,_.y),B=Math.max(d.y,_.y),nt=Math.min(s.y,l.y),Et=Math.max(s.y,l.y),nt>B||Et<E))}},hn.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Bt,hn);var sn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},pn=function(t){this.geometryFactory=t||new we};pn.prototype.read=function(t){var e,i;t=t.replace(/[\n\r]/g," ");var l=sn.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((l=sn.emptyTypeStr.exec(t))[2]=void 0),l&&(i=l[1].toLowerCase(),fe[i]&&(e=fe[i].apply(this,[l[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},pn.prototype.write=function(t){return this.extractGeometry(t)},pn.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!ie[e])return null;var i=e.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+ie[e].apply(this,[t])+")"};var ie={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ie.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],i=0,s=t._geometries.length;i<s;++i)e.push("("+ie.point.apply(this,[t._geometries[i]])+")");return e.join(",")},linestring:function(t){for(var e=[],i=0,s=t._points._coordinates.length;i<s;++i)e.push(ie.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},linearring:function(t){for(var e=[],i=0,s=t._points._coordinates.length;i<s;++i)e.push(ie.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},multilinestring:function(t){for(var e=[],i=0,s=t._geometries.length;i<s;++i)e.push("("+ie.linestring.apply(this,[t._geometries[i]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+ie.linestring.apply(this,[t._shell])+")");for(var i=0,s=t._holes.length;i<s;++i)e.push("("+ie.linestring.apply(this,[t._holes[i]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],i=0,s=t._geometries.length;i<s;++i)e.push("("+ie.polygon.apply(this,[t._geometries[i]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,s=t._geometries.length;i<s;++i)e.push(this.extractGeometry(t._geometries[i]));return e.join(",")}},fe={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(sn.spaces);return this.geometryFactory.createPoint(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,i=t.trim().split(","),s=[],l=0,d=i.length;l<d;++l)e=i[l].replace(sn.trimParens,"$1"),s.push(fe.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(s)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,i=t.trim().split(","),s=[],l=0,d=i.length;l<d;++l)e=i[l].trim().split(sn.spaces),s.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(s)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,i=t.trim().split(","),s=[],l=0,d=i.length;l<d;++l)e=i[l].trim().split(sn.spaces),s.push(new w(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(s)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,i=t.trim().split(sn.parenComma),s=[],l=0,d=i.length;l<d;++l)e=i[l].replace(sn.trimParens,"$1"),s.push(fe.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(s)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,i,s,l,d=t.trim().split(sn.parenComma),_=[],E=0,B=d.length;E<B;++E)e=d[E].replace(sn.trimParens,"$1"),i=fe.linestring.apply(this,[e]),s=this.geometryFactory.createLinearRing(i._points),0===E?l=s:_.push(s);return this.geometryFactory.createPolygon(l,_)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,i=t.trim().split(sn.doubleParenComma),s=[],l=0,d=i.length;l<d;++l)e=i[l].replace(sn.trimParens,"$1"),s.push(fe.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(s)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],s=0,l=e.length;s<l;++s)i.push(this.read(e[s]));return this.geometryFactory.createGeometryCollection(i)}},dt=function(t){this.parser=new pn(t)};dt.prototype.write=function(t){return this.parser.write(t)},dt.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var R=function(t){function e(i){t.call(this,i),this.name="RuntimeException",this.message=i,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),b=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(R),P=function(){};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.shouldNeverReachHere=function(){if(0===arguments.length)P.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new b("Should never reach here"+(null!==t?": "+t:""))}},P.isTrue=function(){var e;if(1===arguments.length)P.isTrue(arguments[0],null);else if(2===arguments.length&&(e=arguments[1],!arguments[0]))throw null===e?new b:new b(e)},P.equals=function(){var t,e,i;if(2===arguments.length)P.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(i=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new b("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))};var $=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ft={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};$.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},$.prototype.getTopologySummary=function(){var t=new J;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},$.prototype.computeIntersection=function(t,e,i,s){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=s,this._result=this.computeIntersect(t,e,i,s)},$.prototype.getIntersectionNum=function(){return this._result},$.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},$.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},$.prototype.setPrecisionModel=function(t){this._precisionModel=t},$.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},$.prototype.getIntersection=function(t){return this._intPt[t]},$.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},$.prototype.hasIntersection=function(){return this._result!==$.NO_INTERSECTION},$.prototype.getEdgeDistance=function(t,e){return $.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},$.prototype.isCollinear=function(){return this._result===$.COLLINEAR_INTERSECTION},$.prototype.toString=function(){return dt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+dt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},$.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},$.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},$.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},$.prototype.interfaces_=function(){return[]},$.prototype.getClass=function(){return $},$.computeEdgeDistance=function(t,e,i){var s=Math.abs(i.x-e.x),l=Math.abs(i.y-e.y),d=-1;if(t.equals(e))d=0;else if(t.equals(i))d=s>l?s:l;else{var _=Math.abs(t.x-e.x),E=Math.abs(t.y-e.y);0!==(d=s>l?_:E)||t.equals(e)||(d=Math.max(_,E))}return P.isTrue(!(0===d&&!t.equals(e)),"Bad distance calculation"),d},$.nonRobustComputeEdgeDistance=function(t,e,i){var s=t.x-e.x,l=t.y-e.y,d=Math.sqrt(s*s+l*l);return P.isTrue(!(0===d&&!t.equals(e)),"Invalid distance calculation"),d},ft.DONT_INTERSECT.get=function(){return 0},ft.DO_INTERSECT.get=function(){return 1},ft.COLLINEAR.get=function(){return 2},ft.NO_INTERSECTION.get=function(){return 0},ft.POINT_INTERSECTION.get=function(){return 1},ft.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties($,ft);var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(i){var s=new Bt(this._inputLines[0][0],this._inputLines[0][1]),l=new Bt(this._inputLines[1][0],this._inputLines[1][1]);return s.contains(i)&&l.contains(i)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var i=arguments[0],s=arguments[1],l=arguments[2];if(this._isProper=!1,Bt.intersects(s,l,i)&&0===bt.orientationIndex(s,l,i)&&0===bt.orientationIndex(l,s,i))return this._isProper=!0,(i.equals(s)||i.equals(l))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(i,s,l,d,_){_.x=this.smallestInAbsValue(i.x,s.x,l.x,d.x),_.y=this.smallestInAbsValue(i.y,s.y,l.y,d.y),i.x-=_.x,i.y-=_.y,s.x-=_.x,s.y-=_.y,l.x-=_.x,l.y-=_.y,d.x-=_.x,d.y-=_.y},e.prototype.safeHCoordinateIntersection=function(i,s,l,d){var _=null;try{_=Vt.intersection(i,s,l,d)}catch(E){if(!(E instanceof Jt))throw E;_=e.nearestEndpoint(i,s,l,d)}return _},e.prototype.intersection=function(i,s,l,d){var _=this.intersectionWithNormalization(i,s,l,d);return this.isInSegmentEnvelopes(_)||(_=new w(e.nearestEndpoint(i,s,l,d))),null!==this._precisionModel&&this._precisionModel.makePrecise(_),_},e.prototype.smallestInAbsValue=function(i,s,l,d){var _=i,E=Math.abs(_);return Math.abs(s)<E&&(_=s,E=Math.abs(s)),Math.abs(l)<E&&(_=l,E=Math.abs(l)),Math.abs(d)<E&&(_=d),_},e.prototype.checkDD=function(i,s,l,d,_){var E=Mt.intersection(i,s,l,d),B=this.isInSegmentEnvelopes(E);ee.out.println("DD in env = "+B+"  --------------------- "+E),_.distance(E)>1e-4&&ee.out.println("Distance = "+_.distance(E))},e.prototype.intersectionWithNormalization=function(i,s,l,d){var _=new w(i),E=new w(s),B=new w(l),nt=new w(d),Et=new w;this.normalizeToEnvCentre(_,E,B,nt,Et);var St=this.safeHCoordinateIntersection(_,E,B,nt);return St.x+=Et.x,St.y+=Et.y,St},e.prototype.computeCollinearIntersection=function(i,s,l,d){var _=Bt.intersects(i,s,l),E=Bt.intersects(i,s,d),B=Bt.intersects(l,d,i),nt=Bt.intersects(l,d,s);return _&&E?(this._intPt[0]=l,this._intPt[1]=d,t.COLLINEAR_INTERSECTION):B&&nt?(this._intPt[0]=i,this._intPt[1]=s,t.COLLINEAR_INTERSECTION):_&&B?(this._intPt[0]=l,this._intPt[1]=i,!l.equals(i)||E||nt?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):_&&nt?(this._intPt[0]=l,this._intPt[1]=s,!l.equals(s)||E||B?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):E&&B?(this._intPt[0]=d,this._intPt[1]=i,!d.equals(i)||_||nt?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):E&&nt?(this._intPt[0]=d,this._intPt[1]=s,!d.equals(s)||_||B?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(i,s,l,d,_){var E=i.x<s.x?i.x:s.x,B=i.y<s.y?i.y:s.y,nt=i.x>s.x?i.x:s.x,Et=i.y>s.y?i.y:s.y,St=l.x<d.x?l.x:d.x,Xt=l.y<d.y?l.y:d.y,Ut=l.x>d.x?l.x:d.x,Ht=l.y>d.y?l.y:d.y,ge=((B>Xt?B:Xt)+(Et<Ht?Et:Ht))/2;_.x=((E>St?E:St)+(nt<Ut?nt:Ut))/2,_.y=ge,i.x-=_.x,i.y-=_.y,s.x-=_.x,s.y-=_.y,l.x-=_.x,l.y-=_.y,d.x-=_.x,d.y-=_.y},e.prototype.computeIntersect=function(i,s,l,d){if(this._isProper=!1,!Bt.intersects(i,s,l,d))return t.NO_INTERSECTION;var _=bt.orientationIndex(i,s,l),E=bt.orientationIndex(i,s,d);if(_>0&&E>0||_<0&&E<0)return t.NO_INTERSECTION;var B=bt.orientationIndex(l,d,i),nt=bt.orientationIndex(l,d,s);return B>0&&nt>0||B<0&&nt<0?t.NO_INTERSECTION:0===_&&0===E&&0===B&&0===nt?this.computeCollinearIntersection(i,s,l,d):(0===_||0===E||0===B||0===nt?(this._isProper=!1,i.equals2D(l)||i.equals2D(d)?this._intPt[0]=i:s.equals2D(l)||s.equals2D(d)?this._intPt[0]=s:0===_?this._intPt[0]=new w(l):0===E?this._intPt[0]=new w(d):0===B?this._intPt[0]=new w(i):0===nt&&(this._intPt[0]=new w(s))):(this._isProper=!0,this._intPt[0]=this.intersection(i,s,l,d)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(i,s,l,d){var _=i,E=bt.distancePointLine(i,l,d),B=bt.distancePointLine(s,l,d);return B<E&&(E=B,_=s),(B=bt.distancePointLine(l,i,s))<E&&(E=B,_=l),(B=bt.distancePointLine(d,i,s))<E&&(E=B,_=d),_},e}($),Tt=function(){};Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.orientationIndex=function(t,e,i){return Tt.signOfDet2x2(e.x-t.x,e.y-t.y,i.x-e.x,i.y-e.y)},Tt.signOfDet2x2=function(t,e,i,s){var l=null,d=null,_=null;if(l=1,0===t||0===s)return 0===e||0===i?0:e>0?i>0?-l:l:i>0?l:-l;if(0===e||0===i)return s>0?t>0?l:-l:t>0?-l:l;if(e>0?s>0?e<=s||(l=-l,d=t,t=i,i=d,d=e,e=s,s=d):e<=-s?(l=-l,i=-i,s=-s):(d=t,t=-i,i=d,d=e,e=-s,s=d):s>0?-e<=s?(l=-l,t=-t,e=-e):(d=-t,t=i,i=d,d=-e,e=s,s=d):e>=s?(t=-t,e=-e,i=-i,s=-s):(l=-l,d=-t,t=-i,i=d,d=-e,e=-s,s=d),t>0){if(!(i>0&&t<=i))return l}else{if(i>0||!(t>=i))return-l;l=-l,t=-t,i=-i}for(;;){if((s-=(_=Math.floor(i/t))*e)<0)return-l;if(s>e)return l;if(t>(i-=_*t)+i){if(e<s+s)return l}else{if(e>s+s)return-l;i=t-i,s=e-s,l=-l}if(0===s)return 0===i?0:-l;if(0===i||(t-=(_=Math.floor(t/i))*i,(e-=_*s)<0))return l;if(e>s)return-l;if(i>t+t){if(s<e+e)return-l}else{if(s>e+e)return l;t=i-t,e=s-e,l=-l}if(0===e)return 0===t?0:l;if(0===t)return-l}};var Ft=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Ft.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,s=e.x;return i>s&&(i=e.x,s=t.x),this._p.x>=i&&this._p.x<=s&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var d=t.y-this._p.y,E=e.y-this._p.y,B=Tt.signOfDet2x2(t.x-this._p.x,d,e.x-this._p.x,E);if(0===B)return this._isPointOnSegment=!0,null;E<d&&(B=-B),B>0&&this._crossingCount++}},Ft.prototype.isPointInPolygon=function(){return this.getLocation()!==A.EXTERIOR},Ft.prototype.getLocation=function(){return this._isPointOnSegment?A.BOUNDARY:this._crossingCount%2==1?A.INTERIOR:A.EXTERIOR},Ft.prototype.isOnSegment=function(){return this._isPointOnSegment},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.locatePointInRing=function(){if(arguments[0]instanceof w&&Pt(arguments[1],xt)){for(var e=arguments[1],i=new Ft(arguments[0]),s=new w,l=new w,d=1;d<e.size();d++)if(e.getCoordinate(d,s),e.getCoordinate(d-1,l),i.countSegment(s,l),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){for(var E=arguments[1],B=new Ft(arguments[0]),nt=1;nt<E.length;nt++)if(B.countSegment(E[nt],E[nt-1]),B.isOnSegment())return B.getLocation();return B.getLocation()}};var bt=function(){},ce={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.orientationIndex=function(t,e,i){return Mt.orientationIndex(t,e,i)},bt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,s=1;s<t.length-1;s++)e+=(t[s].x-i)*(t[s-1].y-t[s+1].y);return e/2}if(Pt(arguments[0],xt)){var _=arguments[0],E=_.size();if(E<3)return 0;var B=new w,nt=new w,Et=new w;_.getCoordinate(0,nt),_.getCoordinate(1,Et);var St=nt.x;Et.x-=St;for(var Xt=0,Ut=1;Ut<E-1;Ut++)B.y=nt.y,nt.x=Et.x,nt.y=Et.y,_.getCoordinate(Ut+1,Et),Et.x-=St,Xt+=nt.x*(B.y-Et.y);return Xt/2}},bt.distanceLineLine=function(t,e,i,s){if(t.equals(e))return bt.distancePointLine(t,i,s);if(i.equals(s))return bt.distancePointLine(s,t,e);var l=!1;if(Bt.intersects(t,e,i,s)){var d=(e.x-t.x)*(s.y-i.y)-(e.y-t.y)*(s.x-i.x);if(0===d)l=!0;else{var E=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/d,B=((t.y-i.y)*(s.x-i.x)-(t.x-i.x)*(s.y-i.y))/d;(B<0||B>1||E<0||E>1)&&(l=!0)}}else l=!0;return l?X.min(bt.distancePointLine(t,i,s),bt.distancePointLine(e,i,s),bt.distancePointLine(i,t,e),bt.distancePointLine(s,t,e)):0},bt.isPointInRing=function(t,e){return bt.locatePointInRing(t,e)!==A.EXTERIOR},bt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var i=0,s=new w;t.getCoordinate(0,s);for(var l=s.x,d=s.y,_=1;_<e;_++){t.getCoordinate(_,s);var E=s.x,B=s.y,nt=E-l,Et=B-d;i+=Math.sqrt(nt*nt+Et*Et),l=E,d=B}return i},bt.isCCW=function(t){var e=t.length-1;if(e<3)throw new L("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],s=0,l=1;l<=e;l++){var d=t[l];d.y>i.y&&(i=d,s=l)}var _=s;do{(_-=1)<0&&(_=e)}while(t[_].equals2D(i)&&_!==s);var E=s;do{E=(E+1)%e}while(t[E].equals2D(i)&&E!==s);var B=t[_],nt=t[E];if(B.equals2D(i)||nt.equals2D(i)||B.equals2D(nt))return!1;var Et=bt.computeOrientation(B,i,nt);return 0===Et?B.x>nt.x:Et>0},bt.locatePointInRing=function(t,e){return Ft.locatePointInRing(t,e)},bt.distancePointLinePerpendicular=function(t,e,i){var s=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y);return Math.abs(((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/s)*Math.sqrt(s)},bt.computeOrientation=function(t,e,i){return bt.orientationIndex(t,e,i)},bt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new L("Line array must contain at least one vertex");for(var i=t.distance(e[0]),s=0;s<e.length-1;s++){var l=bt.distancePointLine(t,e[s],e[s+1]);l<i&&(i=l)}return i}if(3===arguments.length){var d=arguments[0],_=arguments[1],E=arguments[2];if(_.x===E.x&&_.y===E.y)return d.distance(_);var B=(E.x-_.x)*(E.x-_.x)+(E.y-_.y)*(E.y-_.y),nt=((d.x-_.x)*(E.x-_.x)+(d.y-_.y)*(E.y-_.y))/B;return nt<=0?d.distance(_):nt>=1?d.distance(E):Math.abs(((_.y-d.y)*(E.x-_.x)-(_.x-d.x)*(E.y-_.y))/B)*Math.sqrt(B)}},bt.isOnLine=function(t,e){for(var i=new wt,s=1;s<e.length;s++)if(i.computeIntersection(t,e[s-1],e[s]),i.hasIntersection())return!0;return!1},ce.CLOCKWISE.get=function(){return-1},ce.RIGHT.get=function(){return bt.CLOCKWISE},ce.COUNTERCLOCKWISE.get=function(){return 1},ce.LEFT.get=function(){return bt.COUNTERCLOCKWISE},ce.COLLINEAR.get=function(){return 0},ce.STRAIGHT.get=function(){return bt.COLLINEAR},Object.defineProperties(bt,ce);var me=function(){};me.prototype.filter=function(t){},me.prototype.interfaces_=function(){return[]},me.prototype.getClass=function(){return me};var zt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},pe={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};zt.prototype.isGeometryCollection=function(){return this.getSortIndex()===zt.SORTINDEX_GEOMETRYCOLLECTION},zt.prototype.getFactory=function(){return this._factory},zt.prototype.getGeometryN=function(t){return this},zt.prototype.getArea=function(){return 0},zt.prototype.isRectangle=function(){return!1},zt.prototype.equals=function(){if(arguments[0]instanceof zt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof zt&&this.equalsExact(e)}},zt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},zt.prototype.geometryChanged=function(){this.apply(zt.geometryChangedFilter)},zt.prototype.geometryChangedAction=function(){this._envelope=null},zt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},zt.prototype.getLength=function(){return 0},zt.prototype.getNumGeometries=function(){return 1},zt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],s=arguments[1];return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,s)}},zt.prototype.getUserData=function(){return this._userData},zt.prototype.getSRID=function(){return this._SRID},zt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},zt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===zt.SORTINDEX_GEOMETRYCOLLECTION)throw new L("This method does not support GeometryCollection arguments")},zt.prototype.equal=function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},zt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},zt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},zt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Bt(this._envelope)},zt.prototype.setSRID=function(t){this._SRID=t},zt.prototype.setUserData=function(t){this._userData=t},zt.prototype.compare=function(t,e){for(var i=t.iterator(),s=e.iterator();i.hasNext()&&s.hasNext();){var l=i.next(),d=s.next(),_=l.compareTo(d);if(0!==_)return _}return i.hasNext()?1:s.hasNext()?-1:0},zt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},zt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===zt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===zt.SORTINDEX_MULTIPOINT||this.getSortIndex()===zt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===zt.SORTINDEX_MULTIPOLYGON},zt.prototype.interfaces_=function(){return[O,C,q]},zt.prototype.getClass=function(){return zt},zt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},zt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pe.serialVersionUID.get=function(){return 0x799ea46522854c00},pe.SORTINDEX_POINT.get=function(){return 0},pe.SORTINDEX_MULTIPOINT.get=function(){return 1},pe.SORTINDEX_LINESTRING.get=function(){return 2},pe.SORTINDEX_LINEARRING.get=function(){return 3},pe.SORTINDEX_MULTILINESTRING.get=function(){return 4},pe.SORTINDEX_POLYGON.get=function(){return 5},pe.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pe.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pe.geometryChangedFilter.get=function(){return _n},Object.defineProperties(zt,pe);var _n=function(){};_n.interfaces_=function(){return[me]},_n.filter=function(t){t.geometryChangedAction()};var $t=function(){};$t.prototype.filter=function(t){},$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Ke=function(){},xn={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Ke.prototype.isInBoundary=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke},xn.Mod2BoundaryNodeRule.get=function(){return Rn},xn.EndPointBoundaryNodeRule.get=function(){return Wn},xn.MultiValentEndPointBoundaryNodeRule.get=function(){return Cn},xn.MonoValentEndPointBoundaryNodeRule.get=function(){return fr},xn.MOD2_BOUNDARY_RULE.get=function(){return new Rn},xn.ENDPOINT_BOUNDARY_RULE.get=function(){return new Wn},xn.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Cn},xn.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new fr},xn.OGC_SFS_BOUNDARY_RULE.get=function(){return Ke.MOD2_BOUNDARY_RULE},Object.defineProperties(Ke,xn);var Rn=function(){};Rn.prototype.isInBoundary=function(t){return t%2==1},Rn.prototype.interfaces_=function(){return[Ke]},Rn.prototype.getClass=function(){return Rn};var Wn=function(){};Wn.prototype.isInBoundary=function(t){return t>0},Wn.prototype.interfaces_=function(){return[Ke]},Wn.prototype.getClass=function(){return Wn};var Cn=function(){};Cn.prototype.isInBoundary=function(t){return t>1},Cn.prototype.interfaces_=function(){return[Ke]},Cn.prototype.getClass=function(){return Cn};var fr=function(){};fr.prototype.isInBoundary=function(t){return 1===t},fr.prototype.interfaces_=function(){return[Ke]},fr.prototype.getClass=function(){return fr};var gn=function(){};gn.prototype.add=function(){},gn.prototype.addAll=function(){},gn.prototype.isEmpty=function(){},gn.prototype.iterator=function(){},gn.prototype.size=function(){},gn.prototype.toArray=function(){},gn.prototype.remove=function(){},(H.prototype=new Error).name="IndexOutOfBoundsException";var Cr=function(){};Cr.prototype.hasNext=function(){},Cr.prototype.next=function(){},Cr.prototype.remove=function(){};var qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(gn);(rt.prototype=new Error).name="NoSuchElementException";var Gt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gn&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,gn]},e.prototype.add=function(i){return 1===arguments.length?this.array_.push(i):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(i){for(var s=i.iterator();s.hasNext();)this.add(s.next());return!0},e.prototype.set=function(i,s){var l=this.array_[i];return this.array_[i]=s,l},e.prototype.iterator=function(){return new uo(this)},e.prototype.get=function(i){if(i<0||i>=this.size())throw new H;return this.array_[i]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var i=[],s=0,l=this.array_.length;s<l;s++)i.push(this.array_[s]);return i},e.prototype.remove=function(i){for(var s=!1,l=0,d=this.array_.length;l<d;l++)if(this.array_[l]===i){this.array_.splice(l,1),s=!0;break}return s},e}(qn),uo=function(t){function e(i){t.call(this),this.arrayList_=i,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new rt;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(i){return this.arrayList_.set(this.position_-1,i)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Cr),Tr=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var s=arguments[0];this.ensureCapacity(s.length),this.add(s,!0)}else if(2===arguments.length){var l=arguments[0],d=arguments[1];this.ensureCapacity(l.length),this.add(l,d)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={coordArrayType:{configurable:!0}};return i.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(s){return this.get(s)},e.prototype.addAll=function(){if(2===arguments.length){for(var l=arguments[1],d=!1,_=arguments[0].iterator();_.hasNext();)this.add(_.next(),l),d=!0;return d}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var s=t.prototype.clone.call(this),l=0;l<this.size();l++)s.add(l,this.get(l).copy());return s},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){var _=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(_))return null;t.prototype.add.call(this,_)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var nt=arguments[0],Et=arguments[1];if(arguments[2])for(var St=0;St<nt.length;St++)this.add(nt[St],Et);else for(var Xt=nt.length-1;Xt>=0;Xt--)this.add(nt[Xt],Et);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){var Ut=arguments[0],Ht=arguments[1];if(!arguments[2]){var oe=this.size();if(oe>0&&(Ut>0&&this.get(Ut-1).equals2D(Ht)||Ut<oe&&this.get(Ut).equals2D(Ht)))return null}t.prototype.add.call(this,Ut,Ht)}}else if(4===arguments.length){var ge=arguments[0],on=arguments[1],en=arguments[2],mn=arguments[3],xe=1;en>mn&&(xe=-1);for(var Pe=en;Pe!==mn;Pe+=xe)this.add(ge[Pe],on);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new w(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,i),e}(Gt),_e=function(){},Gi={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Gi.ForwardComparator.get=function(){return Pi},Gi.BidirectionalComparator.get=function(){return li},Gi.coordArrayType.get=function(){return new Array(0).fill(null)},_e.prototype.interfaces_=function(){return[]},_e.prototype.getClass=function(){return _e},_e.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},_e.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var s=t[i];if(_e.indexOf(s,e)<0)return s}return null},_e.scroll=function(t,e){var i=_e.indexOf(e,t);if(i<0)return null;var s=new Array(t.length).fill(null);ee.arraycopy(t,i,s,0,t.length-i),ee.arraycopy(t,0,s,t.length-i,i),ee.arraycopy(s,0,t,0,t.length)},_e.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){var s=arguments[0],l=arguments[1],d=arguments[2];if(s===l)return!0;if(null===s||null===l||s.length!==l.length)return!1;for(var _=0;_<s.length;_++)if(0!==d.compare(s[_],l[_]))return!1;return!0}},_e.intersection=function(t,e){for(var i=new Tr,s=0;s<t.length;s++)e.intersects(t[s])&&i.add(t[s],!0);return i.toCoordinateArray()},_e.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},_e.removeRepeatedPoints=function(t){return _e.hasRepeatedPoints(t)?new Tr(t,!1).toCoordinateArray():t},_e.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),s=0;s<=i;s++){var l=t[s];t[s]=t[e-s],t[e-s]=l}},_e.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var s=new Array(e).fill(null);if(0===e)return s;for(var l=0,d=0;d<t.length;d++)null!==t[d]&&(s[l++]=t[d]);return s},_e.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new w(t[i]);return e}if(5===arguments.length)for(var s=arguments[0],l=arguments[1],d=arguments[2],_=arguments[3],E=arguments[4],B=0;B<E;B++)d[_+B]=new w(s[l+B])},_e.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++)if(0!==t[i].compareTo(e[t.length-i-1]))return!1;return!0},_e.envelope=function(t){for(var e=new Bt,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e},_e.toCoordinateArray=function(t){return t.toArray(_e.coordArrayType)},_e.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},_e.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1},_e.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var s=t[e].compareTo(t[t.length-1-e]);if(0!==s)return s}return 1},_e.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var s=t[i].compareTo(e[i]);if(0!==s)return s;i++}return i<e.length?-1:i<t.length?1:0},_e.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e},_e.extract=function(t,e,i){e=X.clamp(e,0,t.length);var s=(i=X.clamp(i,-1,t.length))-e+1;i<0&&(s=0),e>=t.length&&(s=0),i<e&&(s=0);var l=new Array(s).fill(null);if(0===s)return l;for(var d=0,_=e;_<=i;_++)l[d++]=t[_];return l},Object.defineProperties(_e,Gi);var Pi=function(){};Pi.prototype.compare=function(t,e){return _e.compare(t,e)},Pi.prototype.interfaces_=function(){return[G]},Pi.prototype.getClass=function(){return Pi};var li=function(){};li.prototype.compare=function(t,e){var i=t,s=e;if(i.length<s.length)return-1;if(i.length>s.length)return 1;if(0===i.length)return 0;var l=_e.compare(i,s);return _e.isEqualReversed(i,s)?0:l},li.prototype.OLDcompare=function(t,e){var i=t,s=e;if(i.length<s.length)return-1;if(i.length>s.length)return 1;if(0===i.length)return 0;for(var l=_e.increasingDirection(i),d=_e.increasingDirection(s),_=l>0?0:i.length-1,E=d>0?0:i.length-1,B=0;B<i.length;B++){var nt=i[_].compareTo(s[E]);if(0!==nt)return nt;_+=l,E+=d}return 0},li.prototype.interfaces_=function(){return[G]},li.prototype.getClass=function(){return li};var Ui=function(){};Ui.prototype.get=function(){},Ui.prototype.put=function(){},Ui.prototype.size=function(){},Ui.prototype.values=function(){},Ui.prototype.entrySet=function(){};var Va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ui);(T.prototype=new Error).name="OperationNotSupported",(et.prototype=new gn).contains=function(){};var Js=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gn&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(i){for(var s=0,l=this.array_.length;s<l;s++)if(this.array_[s]===i)return!0;return!1},e.prototype.add=function(i){return!this.contains(i)&&(this.array_.push(i),!0)},e.prototype.addAll=function(i){for(var s=i.iterator();s.hasNext();)this.add(s.next());return!0},e.prototype.remove=function(i){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var i=[],s=0,l=this.array_.length;s<l;s++)i.push(this.array_[s]);return i},e.prototype.iterator=function(){return new ul(this)},e}(et),ul=function(t){function e(i){t.call(this),this.hashSet_=i,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new rt;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new T},e}(Cr),Ci=0;(Ct.prototype=new Va).get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null},Ct.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ci,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,s,l=this.root_;do{if(i=l,(s=t.compareTo(l.key))<0)l=l.left;else{if(!(s>0)){var d=l.value;return l.value=e,d}l=l.right}}while(null!==l);var _={key:t,left:null,right:null,value:e,parent:i,color:Ci,getValue:function(){return this.value},getKey:function(){return this.key}};return s<0?i.left=_:i.right=_,this.fixAfterInsertion(_),this.size_++,null},Ct.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(ut(t)===Lt(ut(ut(t)))){var e=Rt(ut(ut(t)));1===j(e)?(mt(ut(t),Ci),mt(e,Ci),mt(ut(ut(t)),1),t=ut(ut(t))):(t===Rt(ut(t))&&(t=ut(t),this.rotateLeft(t)),mt(ut(t),Ci),mt(ut(ut(t)),1),this.rotateRight(ut(ut(t))))}else{var i=Lt(ut(ut(t)));1===j(i)?(mt(ut(t),Ci),mt(i,Ci),mt(ut(ut(t)),1),t=ut(ut(t))):(t===Lt(ut(t))&&(t=ut(t),this.rotateRight(t)),mt(ut(t),Ci),mt(ut(ut(t)),1),this.rotateLeft(ut(ut(t))))}this.root_.color=Ci},Ct.prototype.values=function(){var t=new Gt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ct.successor(e));)t.add(e.value);return t},Ct.prototype.entrySet=function(){var t=new Js,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ct.successor(e));)t.add(e);return t},Ct.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ct.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ct.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ct.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var i=t.parent,s=t;null!==i&&s===i.right;)s=i,i=i.parent;return i},Ct.prototype.size=function(){return this.size_};var qo=function(){};qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo},it.prototype=new et,(yt.prototype=new it).contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},yt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},yt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},yt.prototype.remove=function(t){throw new T},yt.prototype.size=function(){return this.array_.length},yt.prototype.isEmpty=function(){return 0===this.array_.length},yt.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},yt.prototype.iterator=function(){return new Cs(this)};var Cs=function(t){this.treeSet_=t,this.position_=0};Cs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new rt;return this.treeSet_.array_[this.position_++]},Cs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Cs.prototype.remove=function(){throw new T};var ki=function(){};ki.sort=function(){var t,e,i,l=arguments[0];if(1===arguments.length)l.sort(function(_,E){return _.compareTo(E)});else if(2===arguments.length)i=arguments[1],l.sort(function(_,E){return i.compare(_,E)});else if(3===arguments.length){(e=l.slice(arguments[1],arguments[2])).sort();var d=l.slice(0,arguments[1]).concat(e,l.slice(arguments[2],l.length));for(l.splice(0,l.length),t=0;t<d.length;t++)l.push(d[t])}else if(4===arguments.length)for(e=l.slice(arguments[1],arguments[2]),i=arguments[3],e.sort(function(_,E){return i.compare(_,E)}),d=l.slice(0,arguments[1]).concat(e,l.slice(arguments[2],l.length)),l.splice(0,l.length),t=0;t<d.length;t++)l.push(d[t])},ki.asList=function(t){for(var e=new Gt,i=0,s=t.length;i<s;i++)e.add(t[i]);return e};var Se=function(){},Dr={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Dr.P.get=function(){return 0},Dr.L.get=function(){return 1},Dr.A.get=function(){return 2},Dr.FALSE.get=function(){return-1},Dr.TRUE.get=function(){return-2},Dr.DONTCARE.get=function(){return-3},Dr.SYM_FALSE.get=function(){return"F"},Dr.SYM_TRUE.get=function(){return"T"},Dr.SYM_DONTCARE.get=function(){return"*"},Dr.SYM_P.get=function(){return"0"},Dr.SYM_L.get=function(){return"1"},Dr.SYM_A.get=function(){return"2"},Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.toDimensionSymbol=function(t){switch(t){case Se.FALSE:return Se.SYM_FALSE;case Se.TRUE:return Se.SYM_TRUE;case Se.DONTCARE:return Se.SYM_DONTCARE;case Se.P:return Se.SYM_P;case Se.L:return Se.SYM_L;case Se.A:return Se.SYM_A}throw new L("Unknown dimension value: "+t)},Se.toDimensionValue=function(t){switch(lt.toUpperCase(t)){case Se.SYM_FALSE:return Se.FALSE;case Se.SYM_TRUE:return Se.TRUE;case Se.SYM_DONTCARE:return Se.DONTCARE;case Se.SYM_P:return Se.P;case Se.SYM_L:return Se.L;case Se.SYM_A:return Se.A}throw new L("Unknown dimension symbol: "+t)},Object.defineProperties(Se,Dr);var Zr=function(){};Zr.prototype.filter=function(t){},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr};var Vr=function(){};Vr.prototype.filter=function(t,e){},Vr.prototype.isDone=function(){},Vr.prototype.isGeometryChanged=function(){},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr};var zn=function(t){function e(s,l){if(t.call(this,l),this._geometries=s||[],t.hasNullElements(this._geometries))throw new L("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var s=new Bt,l=0;l<this._geometries.length;l++)s.expandToInclude(this._geometries[l].getEnvelopeInternal());return s},e.prototype.getGeometryN=function(s){return this._geometries[s]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var s=new Array(this.getNumPoints()).fill(null),l=-1,d=0;d<this._geometries.length;d++)for(var _=this._geometries[d].getCoordinates(),E=0;E<_.length;E++)s[++l]=_[E];return s},e.prototype.getArea=function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getArea();return s},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var d=s;if(this._geometries.length!==d._geometries.length)return!1;for(var _=0;_<this._geometries.length;_++)if(!this._geometries[_].equalsExact(d._geometries[_],l))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var s=0;s<this._geometries.length;s++)this._geometries[s].normalize();ki.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var s=Se.FALSE,l=0;l<this._geometries.length;l++)s=Math.max(s,this._geometries[l].getBoundaryDimension());return s},e.prototype.getDimension=function(){for(var s=Se.FALSE,l=0;l<this._geometries.length;l++)s=Math.max(s,this._geometries[l].getDimension());return s},e.prototype.getLength=function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getLength();return s},e.prototype.getNumPoints=function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getNumPoints();return s},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var l=new Array(this._geometries.length).fill(null),d=0;d<this._geometries.length;d++)l[d]=this._geometries[d].reverse();return this.getFactory().createGeometryCollection(l)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var s=arguments[0],l=new yt(ki.asList(this._geometries)),d=new yt(ki.asList(s._geometries));return this.compare(l,d)}if(2===arguments.length){for(var E=arguments[1],B=arguments[0],nt=this.getNumGeometries(),Et=B.getNumGeometries(),St=0;St<nt&&St<Et;){var Xt=this.getGeometryN(St),Ut=B.getGeometryN(St),Ht=Xt.compareToSameClass(Ut,E);if(0!==Ht)return Ht;St++}return St<nt?1:St<Et?-1:0}},e.prototype.apply=function(){if(Pt(arguments[0],$t))for(var s=arguments[0],l=0;l<this._geometries.length;l++)this._geometries[l].apply(s);else if(Pt(arguments[0],Vr)){var d=arguments[0];if(0===this._geometries.length)return null;for(var _=0;_<this._geometries.length&&(this._geometries[_].apply(d),!d.isDone());_++);d.isGeometryChanged()&&this.geometryChanged()}else if(Pt(arguments[0],Zr)){var E=arguments[0];E.filter(this);for(var B=0;B<this._geometries.length;B++)this._geometries[B].apply(E)}else if(Pt(arguments[0],me)){var nt=arguments[0];nt.filter(this);for(var Et=0;Et<this._geometries.length;Et++)this._geometries[Et].apply(nt)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),P.shouldNeverReachHere(),null},e.prototype.clone=function(){var s=t.prototype.clone.call(this);s._geometries=new Array(this._geometries.length).fill(null);for(var l=0;l<this._geometries.length;l++)s._geometries[l]=this._geometries[l].clone();return s},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new e(s,this._factory)},e.prototype.isEmpty=function(){for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,i),e}(zt),Yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return zt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&t.prototype.equalsExact.call(this,s,l)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Se.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var s=this._geometries.length,l=new Array(s).fill(null),d=0;d<this._geometries.length;d++)l[s-1-d]=this._geometries[d].reverse();return this.getFactory().createMultiLineString(l)},e.prototype.getBoundary=function(){return new Fr(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new e(s,this._factory)},e.prototype.interfaces_=function(){return[qo]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,i),e}(zn),Fr=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Ke.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var i=arguments[0],s=arguments[1];this._geom=i,this._geomFact=i.getFactory(),this._bnRule=s}};Fr.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Fr.prototype.getBoundary=function(){return this._geom instanceof dn?this.boundaryLineString(this._geom):this._geom instanceof Yi?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Fr.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Fr.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Fr.prototype.computeBoundaryCoordinates=function(t){var e=new Gt;this._endpointMap=new Ct;for(var i=0;i<t.getNumGeometries();i++){var s=t.getGeometryN(i);0!==s.getNumPoints()&&(this.addEndpoint(s.getCoordinateN(0)),this.addEndpoint(s.getCoordinateN(s.getNumPoints()-1)))}for(var l=this._endpointMap.entrySet().iterator();l.hasNext();){var d=l.next(),_=d.getValue().count;this._bnRule.isInBoundary(_)&&e.add(d.getKey())}return _e.toCoordinateArray(e)},Fr.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ss,this._endpointMap.put(t,e)),e.count++},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},Fr.getBoundary=function(){return 1===arguments.length?new Fr(arguments[0]).getBoundary():2===arguments.length?new Fr(arguments[0],arguments[1]).getBoundary():void 0};var Ss=function(){this.count=null};Ss.prototype.interfaces_=function(){return[]},Ss.prototype.getClass=function(){return Ss};var Br=function(){},Qo={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.chars=function(t,e){for(var i=new Array(e).fill(null),s=0;s<e;s++)i[s]=t;return String(i)},Br.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},i=new function(){}(e);return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var l=arguments[1],d="",_=new function(){}(new function(){}(Br.getStackTrace(arguments[0]))),E=0;E<l;E++)try{d+=_.readLine()+Br.NEWLINE}catch(B){if(!(B instanceof Dt))throw B;P.shouldNeverReachHere()}return d}},Br.split=function(t,e){for(var i=e.length,s=new Gt,l=""+t,d=l.indexOf(e);d>=0;){var _=l.substring(0,d);s.add(_),d=(l=l.substring(d+i)).indexOf(e)}l.length>0&&s.add(l);for(var E=new Array(s.size()).fill(null),B=0;B<E.length;B++)E[B]=s.get(B);return E},Br.toString=function(){if(1===arguments.length)return Br.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Br.spaces=function(t){return Br.chars(" ",t)},Qo.NEWLINE.get=function(){return ee.getProperty("line.separator")},Qo.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Br,Qo);var En=function(){};En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.copyCoord=function(t,e,i,s){for(var l=Math.min(t.getDimension(),i.getDimension()),d=0;d<l;d++)i.setOrdinate(s,d,t.getOrdinate(e,d))},En.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,xt.X)===t.getOrdinate(e-1,xt.X)&&t.getOrdinate(0,xt.Y)===t.getOrdinate(e-1,xt.Y)},En.isEqual=function(t,e){var i=t.size();if(i!==e.size())return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),l=0;l<i;l++)for(var d=0;d<s;d++){var _=t.getOrdinate(l,d),E=e.getOrdinate(l,d);if(!(t.getOrdinate(l,d)===e.getOrdinate(l,d)||M.isNaN(_)&&M.isNaN(E)))return!1}return!0},En.extend=function(t,e,i){var s=t.create(i,e.getDimension()),l=e.size();if(En.copy(e,0,s,0,l),l>0)for(var d=l;d<i;d++)En.copy(e,l-1,s,d,1);return s},En.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),s=0;s<=i;s++)En.swap(t,s,e-s)},En.swap=function(t,e,i){if(e===i)return null;for(var s=0;s<t.getDimension();s++){var l=t.getOrdinate(e,s);t.setOrdinate(e,s,t.getOrdinate(i,s)),t.setOrdinate(i,s,l)}},En.copy=function(t,e,i,s,l){for(var d=0;d<l;d++)En.copyCoord(t,e+d,i,s+d)},En.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var i=t.getDimension(),s=new J;s.append("(");for(var l=0;l<e;l++){l>0&&s.append(" ");for(var d=0;d<i;d++)d>0&&s.append(","),s.append(Br.toString(t.getOrdinate(l,d)))}return s.append(")"),s.toString()}},En.ensureValidRing=function(t,e){var i=e.size();return 0===i?e:i<=3?En.createClosedRing(t,e,4):e.getOrdinate(0,xt.X)===e.getOrdinate(i-1,xt.X)&&e.getOrdinate(0,xt.Y)===e.getOrdinate(i-1,xt.Y)?e:En.createClosedRing(t,e,i+1)},En.createClosedRing=function(t,e,i){var s=t.create(i,e.getDimension()),l=e.size();En.copy(e,0,s,0,l);for(var d=l;d<i;d++)En.copy(e,0,s,d,1);return s};var dn=function(t){function e(s,l){t.call(this,l),this._points=null,this.init(s)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Bt:this._points.expandEnvelope(new Bt)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var d=s;if(this._points.size()!==d._points.size())return!1;for(var _=0;_<this._points.size();_++)if(!this.equal(this._points.getCoordinate(_),d._points.getCoordinate(_),l))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var s=0;s<Math.trunc(this._points.size()/2);s++){var l=this._points.size()-1-s;if(!this._points.getCoordinate(s).equals(this._points.getCoordinate(l)))return this._points.getCoordinate(s).compareTo(this._points.getCoordinate(l))>0&&En.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Se.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return bt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var s=this._points.copy();return En.reverse(s),this.getFactory().createLineString(s)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var s=arguments[0],l=0,d=0;l<this._points.size()&&d<s._points.size();){var _=this._points.getCoordinate(l).compareTo(s._points.getCoordinate(d));if(0!==_)return _;l++,d++}return l<this._points.size()?1:d<s._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(Pt(arguments[0],$t))for(var s=arguments[0],l=0;l<this._points.size();l++)s.filter(this._points.getCoordinate(l));else if(Pt(arguments[0],Vr)){var d=arguments[0];if(0===this._points.size())return null;for(var _=0;_<this._points.size()&&(d.filter(this._points,_),!d.isDone());_++);d.isGeometryChanged()&&this.geometryChanged()}else(Pt(arguments[0],Zr)||Pt(arguments[0],me))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Fr(this).getBoundary()},e.prototype.isEquivalentClass=function(s){return s instanceof e},e.prototype.clone=function(){var s=t.prototype.clone.call(this);return s._points=this._points.clone(),s},e.prototype.getCoordinateN=function(s){return this._points.getCoordinate(s)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(s){if(null===s&&(s=this.getFactory().getCoordinateSequenceFactory().create([])),1===s.size())throw new L("Invalid number of points in LineString (found "+s.size()+" - must be 0 or >= 2)");this._points=s},e.prototype.isCoordinate=function(s){for(var l=0;l<this._points.size();l++)if(this._points.getCoordinate(l).equals(s))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(s){return this.getFactory().createPoint(this._points.getCoordinate(s))},e.prototype.interfaces_=function(){return[qo]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,i),e}(zt),ts=function(){};ts.prototype.interfaces_=function(){return[]},ts.prototype.getClass=function(){return ts};var Ir=function(t){function e(s,l){t.call(this,l),this._coordinates=s||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Bt;var s=new Bt;return s.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),s},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&(!(!this.isEmpty()||!s.isEmpty())||this.isEmpty()===s.isEmpty()&&this.equal(s.getCoordinate(),this.getCoordinate(),l))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Se.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var s=arguments[0];return this.getCoordinate().compareTo(s.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(Pt(arguments[0],$t)){var s=arguments[0];if(this.isEmpty())return null;s.filter(this.getCoordinate())}else if(Pt(arguments[0],Vr)){var l=arguments[0];if(this.isEmpty())return null;l.filter(this._coordinates,0),l.isGeometryChanged()&&this.geometryChanged()}else(Pt(arguments[0],Zr)||Pt(arguments[0],me))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var s=t.prototype.clone.call(this);return s._coordinates=this._coordinates.clone(),s},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(s){null===s&&(s=this.getFactory().getCoordinateSequenceFactory().create([])),P.isTrue(s.size()<=1),this._coordinates=s},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[ts]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,i),e}(zt),Hi=function(){};Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var An=function(t){function e(s,l,d){if(t.call(this,d),this._shell=null,this._holes=null,null===s&&(s=this.getFactory().createLinearRing()),null===l&&(l=[]),t.hasNullElements(l))throw new L("holes must not contain null elements");if(s.isEmpty()&&t.hasNonEmptyElements(l))throw new L("shell is empty but holes are not");this._shell=s,this._holes=l}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var s=new Array(this.getNumPoints()).fill(null),l=-1,d=this._shell.getCoordinates(),_=0;_<d.length;_++)s[++l]=d[_];for(var E=0;E<this._holes.length;E++)for(var B=this._holes[E].getCoordinates(),nt=0;nt<B.length;nt++)s[++l]=B[nt];return s},e.prototype.getArea=function(){var s=0;s+=Math.abs(bt.signedArea(this._shell.getCoordinateSequence()));for(var l=0;l<this._holes.length;l++)s-=Math.abs(bt.signedArea(this._holes[l].getCoordinateSequence()));return s},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var s=this._shell.getCoordinateSequence(),l=this.getEnvelopeInternal(),d=0;d<5;d++){var _=s.getX(d);if(_!==l.getMinX()&&_!==l.getMaxX())return!1;var E=s.getY(d);if(E!==l.getMinY()&&E!==l.getMaxY())return!1}for(var B=s.getX(0),nt=s.getY(0),Et=1;Et<=4;Et++){var St=s.getX(Et),Xt=s.getY(Et);if(St!==B==(Xt!==nt))return!1;B=St,nt=Xt}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var d=s;if(!this._shell.equalsExact(d._shell,l)||this._holes.length!==d._holes.length)return!1;for(var B=0;B<this._holes.length;B++)if(!this._holes[B].equalsExact(d._holes[B],l))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var s=0;s<this._holes.length;s++)this.normalize(this._holes[s],!1);ki.sort(this._holes)}else if(2===arguments.length){var l=arguments[0],d=arguments[1];if(l.isEmpty())return null;var _=new Array(l.getCoordinates().length-1).fill(null);ee.arraycopy(l.getCoordinates(),0,_,0,_.length);var E=_e.minCoordinate(l.getCoordinates());_e.scroll(_,E),ee.arraycopy(_,0,l.getCoordinates(),0,_.length),l.getCoordinates()[_.length]=_[0],bt.isCCW(l.getCoordinates())===d&&_e.reverse(l.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var s=0;s+=this._shell.getLength();for(var l=0;l<this._holes.length;l++)s+=this._holes[l].getLength();return s},e.prototype.getNumPoints=function(){for(var s=this._shell.getNumPoints(),l=0;l<this._holes.length;l++)s+=this._holes[l].getNumPoints();return s},e.prototype.reverse=function(){var s=this.copy();s._shell=this._shell.copy().reverse(),s._holes=new Array(this._holes.length).fill(null);for(var l=0;l<this._holes.length;l++)s._holes[l]=this._holes[l].copy().reverse();return s},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var E=arguments[1],B=arguments[0],St=this._shell.compareToSameClass(B._shell,E);if(0!==St)return St;for(var Xt=this.getNumInteriorRing(),Ut=B.getNumInteriorRing(),Ht=0;Ht<Xt&&Ht<Ut;){var oe=this.getInteriorRingN(Ht),ge=B.getInteriorRingN(Ht),on=oe.compareToSameClass(ge,E);if(0!==on)return on;Ht++}return Ht<Xt?1:Ht<Ut?-1:0}},e.prototype.apply=function(s){if(Pt(s,$t)){this._shell.apply(s);for(var l=0;l<this._holes.length;l++)this._holes[l].apply(s)}else if(Pt(s,Vr)){if(this._shell.apply(s),!s.isDone())for(var d=0;d<this._holes.length&&(this._holes[d].apply(s),!s.isDone());d++);s.isGeometryChanged()&&this.geometryChanged()}else if(Pt(s,Zr))s.filter(this);else if(Pt(s,me)){s.filter(this),this._shell.apply(s);for(var _=0;_<this._holes.length;_++)this._holes[_].apply(s)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var s=new Array(this._holes.length+1).fill(null);s[0]=this._shell;for(var l=0;l<this._holes.length;l++)s[l+1]=this._holes[l];return s.length<=1?this.getFactory().createLinearRing(s[0].getCoordinateSequence()):this.getFactory().createMultiLineString(s)},e.prototype.clone=function(){var s=t.prototype.clone.call(this);s._shell=this._shell.clone(),s._holes=new Array(this._holes.length).fill(null);for(var l=0;l<this._holes.length;l++)s._holes[l]=this._holes[l].clone();return s},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var s=this._shell.copy(),l=new Array(this._holes.length).fill(null),d=0;d<l.length;d++)l[d]=this._holes[d].copy();return new e(s,l,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(s){return this._holes[s]},e.prototype.interfaces_=function(){return[Hi]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,i),e}(zt),Wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return zt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&t.prototype.equalsExact.call(this,s,l)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Se.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new e(s,this._factory)},e.prototype.interfaces_=function(){return[ts]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,i),e}(zn),Si=function(t){function e(s,l){s instanceof w&&l instanceof we&&(s=l.getCoordinateSequenceFactory().create(s)),t.call(this,s,l),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return zt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Se.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var s=this._points.copy();return En.reverse(s),this.getFactory().createLinearRing(s)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new L("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new L("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,i),e}(dn),Ni=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return zt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&t.prototype.equalsExact.call(this,s,l)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var l=new Array(this._geometries.length).fill(null),d=0;d<this._geometries.length;d++)l[d]=this._geometries[d].reverse();return this.getFactory().createMultiPolygon(l)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var s=new Gt,l=0;l<this._geometries.length;l++)for(var d=this._geometries[l].getBoundary(),_=0;_<d.getNumGeometries();_++)s.add(d.getGeometryN(_));var E=new Array(s.size()).fill(null);return this.getFactory().createMultiLineString(s.toArray(E))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new e(s,this._factory)},e.prototype.interfaces_=function(){return[Hi]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,i),e}(zn),Gr=function(t){this._factory=t||null,this._isUserDataCopied=!1},Ns={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Gr.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Gr.prototype.edit=function(t,e){if(null===t)return null;var i=this.editInternal(t,e);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},Gr.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zn?this.editGeometryCollection(t,e):t instanceof An?this.editPolygon(t,e):t instanceof Ir||t instanceof dn?e.edit(t,this._factory):(P.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Gr.prototype.editGeometryCollection=function(t,e){for(var i=e.edit(t,this._factory),s=new Gt,l=0;l<i.getNumGeometries();l++){var d=this.edit(i.getGeometryN(l),e);null===d||d.isEmpty()||s.add(d)}return i.getClass()===Wi?this._factory.createMultiPoint(s.toArray([])):i.getClass()===Yi?this._factory.createMultiLineString(s.toArray([])):i.getClass()===Ni?this._factory.createMultiPolygon(s.toArray([])):this._factory.createGeometryCollection(s.toArray([]))},Gr.prototype.editPolygon=function(t,e){var i=e.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var s=this.edit(i.getExteriorRing(),e);if(null===s||s.isEmpty())return this._factory.createPolygon();for(var l=new Gt,d=0;d<i.getNumInteriorRing();d++){var _=this.edit(i.getInteriorRingN(d),e);null===_||_.isEmpty()||l.add(_)}return this._factory.createPolygon(s,l.toArray([]))},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.GeometryEditorOperation=function(){},Ns.NoOpGeometryOperation.get=function(){return zo},Ns.CoordinateOperation.get=function(){return Xo},Ns.CoordinateSequenceOperation.get=function(){return es},Object.defineProperties(Gr,Ns);var zo=function(){};zo.prototype.edit=function(t,e){return t},zo.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},zo.prototype.getClass=function(){return zo};var Xo=function(){};Xo.prototype.edit=function(t,e){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof Si?e.createLinearRing(i):t instanceof dn?e.createLineString(i):t instanceof Ir?i.length>0?e.createPoint(i[0]):e.createPoint():t},Xo.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},Xo.prototype.getClass=function(){return Xo};var es=function(){};es.prototype.edit=function(t,e){return t instanceof Si?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof dn?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ir?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},es.prototype.interfaces_=function(){return[Gr.GeometryEditorOperation]},es.prototype.getClass=function(){return es};var Mn=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new w}else if(Pt(arguments[0],xt)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=i.getCoordinateCopy(s)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var l=arguments[0],d=arguments[1];this._coordinates=l,this._dimension=d,null===l&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var _=arguments[0],E=arguments[1];this._coordinates=new Array(_).fill(null),this._dimension=E;for(var B=0;B<_;B++)this._coordinates[B]=new w}},$s={serialVersionUID:{configurable:!0}};Mn.prototype.setOrdinate=function(t,e,i){switch(e){case xt.X:this._coordinates[t].x=i;break;case xt.Y:this._coordinates[t].y=i;break;case xt.Z:this._coordinates[t].z=i;break;default:throw new L("invalid ordinateIndex")}},Mn.prototype.size=function(){return this._coordinates.length},Mn.prototype.getOrdinate=function(t,e){switch(e){case xt.X:return this._coordinates[t].x;case xt.Y:return this._coordinates[t].y;case xt.Z:return this._coordinates[t].z}return M.NaN},Mn.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var e=arguments[0],i=arguments[1];i.x=this._coordinates[e].x,i.y=this._coordinates[e].y,i.z=this._coordinates[e].z}},Mn.prototype.getCoordinateCopy=function(t){return new w(this._coordinates[t])},Mn.prototype.getDimension=function(){return this._dimension},Mn.prototype.getX=function(t){return this._coordinates[t].x},Mn.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Mn(t,this._dimension)},Mn.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Mn.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Mn(t,this._dimension)},Mn.prototype.toString=function(){if(this._coordinates.length>0){var t=new J(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Mn.prototype.getY=function(t){return this._coordinates[t].y},Mn.prototype.toCoordinateArray=function(){return this._coordinates},Mn.prototype.interfaces_=function(){return[xt,q]},Mn.prototype.getClass=function(){return Mn},$s.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Mn,$s);var Mi=function(){},Ks={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Mi.prototype.readResolve=function(){return Mi.instance()},Mi.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Mn(arguments[0]);if(Pt(arguments[0],xt))return new Mn(arguments[0])}else if(2===arguments.length){var i=arguments[0],s=arguments[1];return s>3&&(s=3),s<2?new Mn(i):new Mn(i,s)}},Mi.prototype.interfaces_=function(){return[Q,q]},Mi.prototype.getClass=function(){return Mi},Mi.instance=function(){return Mi.instanceObject},Ks.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Ks.instanceObject.get=function(){return new Mi},Object.defineProperties(Mi,Ks);var Qs=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return this.map_.get(i)||null},e.prototype.put=function(i,s){return this.map_.set(i,s),s},e.prototype.values=function(){for(var i=new Gt,s=this.map_.values(),l=s.next();!l.done;)i.add(l.value),l=s.next();return i},e.prototype.entrySet=function(){var i=new Js;return this.map_.entries().forEach(function(s){return i.add(s)}),i},e.prototype.size=function(){return this.map_.size()},e}(Ui),Qe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof fi){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var s=arguments[0];this._modelType=s._modelType,this._scale=s._scale}},ta={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Qe.prototype.equals=function(t){return t instanceof Qe&&this._modelType===t._modelType&&this._scale===t._scale},Qe.prototype.compareTo=function(t){var e=t,i=this.getMaximumSignificantDigits(),s=e.getMaximumSignificantDigits();return new ot(i).compareTo(new ot(s))},Qe.prototype.getScale=function(){return this._scale},Qe.prototype.isFloating=function(){return this._modelType===Qe.FLOATING||this._modelType===Qe.FLOATING_SINGLE},Qe.prototype.getType=function(){return this._modelType},Qe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Qe.FLOATING?t="Floating":this._modelType===Qe.FLOATING_SINGLE?t="Floating-Single":this._modelType===Qe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Qe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return M.isNaN(t)||this._modelType===Qe.FLOATING_SINGLE?t:this._modelType===Qe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof w){var e=arguments[0];if(this._modelType===Qe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Qe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Qe.FLOATING?t=16:this._modelType===Qe.FLOATING_SINGLE?t=6:this._modelType===Qe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Qe.prototype.setScale=function(t){this._scale=Math.abs(t)},Qe.prototype.interfaces_=function(){return[q,C]},Qe.prototype.getClass=function(){return Qe},Qe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ta.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ta.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Qe,ta);var fi=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ea={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};fi.prototype.readResolve=function(){return fi.nameToTypeMap.get(this._name)},fi.prototype.toString=function(){return this._name},fi.prototype.interfaces_=function(){return[q]},fi.prototype.getClass=function(){return fi},ea.serialVersionUID.get=function(){return-552860263173159e4},ea.nameToTypeMap.get=function(){return new Qs},Object.defineProperties(fi,ea),Qe.Type=fi,Qe.FIXED=new fi("FIXED"),Qe.FLOATING=new fi("FLOATING"),Qe.FLOATING_SINGLE=new fi("FLOATING SINGLE");var we=function t(){this._precisionModel=new Qe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Pt(arguments[0],Q)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Qe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ja={serialVersionUID:{configurable:!0}};we.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new w(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new w(t.getMinX(),t.getMinY()),new w(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new w(t.getMinX(),t.getMinY()),new w(t.getMinX(),t.getMaxY()),new w(t.getMaxX(),t.getMaxY()),new w(t.getMaxX(),t.getMinY()),new w(t.getMinX(),t.getMinY())]),null)},we.prototype.createLineString=function(t){return t?t instanceof Array?new dn(this.getCoordinateSequenceFactory().create(t),this):Pt(t,xt)?new dn(t,this):void 0:new dn(this.getCoordinateSequenceFactory().create([]),this)},we.prototype.createMultiLineString=function(){return 0===arguments.length?new Yi(null,this):1===arguments.length?new Yi(arguments[0],this):void 0},we.prototype.buildGeometry=function(t){for(var e=null,i=!1,s=!1,l=t.iterator();l.hasNext();){var d=l.next(),_=d.getClass();null===e&&(e=_),_!==e&&(i=!0),d.isGeometryCollectionOrDerived()&&(s=!0)}if(null===e)return this.createGeometryCollection();if(i||s)return this.createGeometryCollection(we.toGeometryArray(t));var E=t.iterator().next();if(t.size()>1){if(E instanceof An)return this.createMultiPolygon(we.toPolygonArray(t));if(E instanceof dn)return this.createMultiLineString(we.toLineStringArray(t));if(E instanceof Ir)return this.createMultiPoint(we.toPointArray(t));P.shouldNeverReachHere("Unhandled class: "+E.getClass().getName())}return E},we.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},we.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Pt(arguments[0],xt))return new Ir(arguments[0],this)}},we.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},we.prototype.createPolygon=function(){if(0===arguments.length)return new An(null,null,this);if(1===arguments.length){if(Pt(arguments[0],xt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Si)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new An(arguments[0],arguments[1],this)},we.prototype.getSRID=function(){return this._SRID},we.prototype.createGeometryCollection=function(){return 0===arguments.length?new zn(null,this):1===arguments.length?new zn(arguments[0],this):void 0},we.prototype.createGeometry=function(t){return new Gr(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},we.prototype.getPrecisionModel=function(){return this._precisionModel},we.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Pt(arguments[0],xt))return new Si(arguments[0],this)}},we.prototype.createMultiPolygon=function(){return 0===arguments.length?new Ni(null,this):1===arguments.length?new Ni(arguments[0],this):void 0},we.prototype.createMultiPoint=function(){if(0===arguments.length)return new Wi(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Wi(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Pt(arguments[0],xt)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var s=new Array(i.size()).fill(null),l=0;l<i.size();l++){var d=this.getCoordinateSequenceFactory().create(1,i.getDimension());En.copy(i,l,d,0,1),s[l]=this.createPoint(d)}return this.createMultiPoint(s)}}},we.prototype.interfaces_=function(){return[q]},we.prototype.getClass=function(){return we},we.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},we.getDefaultCoordinateSequenceFactory=function(){return Mi.instance()},we.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},we.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ja.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(we,ja);var ll=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Po=function(t){this.geometryFactory=t||new we};Po.prototype.read=function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!kr[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ll.indexOf(i)?kr[i].apply(this,[e.coordinates]):kr[i].apply(this,"GeometryCollection"===i?[e.geometries]:[e])},Po.prototype.write=function(t){var e=t.getGeometryType();if(!ci[e])throw new Error("Geometry is not supported");return ci[e].apply(this,[t])};var kr={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){if(!kr[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=kr.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var s=t[i];e.push(new w(s[0],s[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new w(t[0],t[1]),new w(t[2],t[1]),new w(t[2],t[3]),new w(t[0],t[3]),new w(t[0],t[1])])},Point:function(t){var e=new w(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(kr.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=kr.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(kr.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=kr.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),s=[],l=1;l<t.length;++l){var _=kr.coordinates.apply(this,[t[l]]),E=this.geometryFactory.createLinearRing(_);s.push(E)}return this.geometryFactory.createPolygon(i,s)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i)e.push(kr.Polygon.apply(this,[t[i]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i)e.push(this.read(t[i]));return this.geometryFactory.createGeometryCollection(e)}},ci={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ci.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var l=ci.Point.apply(this,[t._geometries[i]]);e.push(l.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),s=0;s<i.length;++s)e.push(ci.coordinate.apply(this,[i[s]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var l=ci.LineString.apply(this,[t._geometries[i]]);e.push(l.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=ci.LineString.apply(this,[t._shell]);e.push(i.coordinates);for(var s=0;s<t._holes.length;++s){var d=ci.LineString.apply(this,[t._holes[s]]);e.push(d.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var l=ci.Polygon.apply(this,[t._geometries[i]]);e.push(l.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var s=t._geometries[i],l=s.getGeometryType();e.push(ci[l].apply(this,[s]))}return{type:"GeometryCollection",geometries:e}}},na=function(t){this.geometryFactory=t||new we,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Po(this.geometryFactory)};na.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Qe.FIXED&&this.reducePrecision(e),e},na.prototype.reducePrecision=function(t){var e,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])};var ra=function(){this.parser=new Po(this.geometryFactory)};ra.prototype.write=function(t){return this.parser.write(t)};var kt=function(){},ns={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.opposite=function(t){return t===kt.LEFT?kt.RIGHT:t===kt.RIGHT?kt.LEFT:t},ns.ON.get=function(){return 0},ns.LEFT.get=function(){return 1},ns.RIGHT.get=function(){return 2},Object.defineProperties(kt,ns),(I.prototype=new Error).name="EmptyStackException",(k.prototype=new qn).add=function(t){return this.array_.push(t),!0},k.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},k.prototype.push=function(t){return this.array_.push(t),t},k.prototype.pop=function(t){if(0===this.array_.length)throw new I;return this.array_.pop()},k.prototype.peek=function(){if(0===this.array_.length)throw new I;return this.array_[this.array_.length-1]},k.prototype.empty=function(){return 0===this.array_.length},k.prototype.isEmpty=function(){return this.empty()},k.prototype.search=function(t){return this.array_.indexOf(t)},k.prototype.size=function(){return this.array_.length},k.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t};var Sr=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Sr.prototype.getCoordinate=function(){return this._minCoord},Sr.prototype.getRightmostSide=function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Sr.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();P.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],i=t[this._minIndex+1],s=bt.computeOrientation(this._minCoord,i,e),l=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&s===bt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&s===bt.CLOCKWISE)&&(l=!0),l&&(this._minIndex=this._minIndex-1)},Sr.prototype.getRightmostSideOfSegment=function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length||i[e].y===i[e+1].y)return-1;var s=kt.LEFT;return i[e].y<i[e+1].y&&(s=kt.RIGHT),s},Sr.prototype.getEdge=function(){return this._orientedDe},Sr.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])},Sr.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Sr.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}P.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===kt.LEFT&&(this._orientedDe=this._minDe.getSym())},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var bi=function(t){function e(i,s){t.call(this,e.msgWithCoord(i,s)),this.pt=s?new w(s):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(i,s){return s?i:i+" [ "+s+" ]"},e}(R),Co=function(){this.array_=[]};Co.prototype.addLast=function(t){this.array_.push(t)},Co.prototype.removeFirst=function(){return this.array_.shift()},Co.prototype.isEmpty=function(){return 0===this.array_.length};var cr=function(){this._finder=null,this._dirEdgeList=new Gt,this._nodes=new Gt,this._rightMostCoord=null,this._env=null,this._finder=new Sr};cr.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},cr.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},cr.prototype.computeNodeDepth=function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var s=i.next();if(s.isVisited()||s.getSym().isVisited()){e=s;break}}if(null===e)throw new bi("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var l=t.getEdges().iterator();l.hasNext();){var d=l.next();d.setVisited(!0),this.copySymDepths(d)}},cr.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(kt.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},cr.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},cr.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(kt.RIGHT)>=1&&e.getDepth(kt.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},cr.prototype.computeDepths=function(t){var e=new Js,i=new Co,s=t.getNode();for(i.addLast(s),e.add(s),t.setVisited(!0);!i.isEmpty();){var l=i.removeFirst();e.add(l),this.computeNodeDepth(l);for(var d=l.getEdges().iterator();d.hasNext();){var _=d.next().getSym();if(!_.isVisited()){var E=_.getNode();e.contains(E)||(i.addLast(E),e.add(E))}}}},cr.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},cr.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Bt,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),s=0;s<i.length-1;s++)t.expandToInclude(i[s]);this._env=t}return this._env},cr.prototype.addReachable=function(t){var e=new k;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}},cr.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(kt.LEFT,t.getDepth(kt.RIGHT)),e.setDepth(kt.RIGHT,t.getDepth(kt.LEFT))},cr.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var s=i.next();this._dirEdgeList.add(s);var l=s.getSym().getNode();l.isVisited()||e.push(l)}},cr.prototype.getNodes=function(){return this._nodes},cr.prototype.getDirectedEdges=function(){return this._dirEdgeList},cr.prototype.interfaces_=function(){return[C]},cr.prototype.getClass=function(){return cr};var fn=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[kt.ON]=i}else if(arguments[0]instanceof t){var s=arguments[0];if(this.init(s.location.length),null!==s)for(var l=0;l<this.location.length;l++)this.location[l]=s.location[l]}}else if(3===arguments.length){var d=arguments[0],_=arguments[1],E=arguments[2];this.init(3),this.location[kt.ON]=d,this.location[kt.LEFT]=_,this.location[kt.RIGHT]=E}};fn.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},fn.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==A.NONE)return!1;return!0},fn.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===A.NONE&&(this.location[e]=t)},fn.prototype.isLine=function(){return 1===this.location.length},fn.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[kt.ON]=this.location[kt.ON],e[kt.LEFT]=A.NONE,e[kt.RIGHT]=A.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===A.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},fn.prototype.getLocations=function(){return this.location},fn.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[kt.LEFT];this.location[kt.LEFT]=this.location[kt.RIGHT],this.location[kt.RIGHT]=t},fn.prototype.toString=function(){var t=new J;return this.location.length>1&&t.append(A.toLocationSymbol(this.location[kt.LEFT])),t.append(A.toLocationSymbol(this.location[kt.ON])),this.location.length>1&&t.append(A.toLocationSymbol(this.location[kt.RIGHT])),t.toString()},fn.prototype.setLocations=function(t,e,i){this.location[kt.ON]=t,this.location[kt.LEFT]=e,this.location[kt.RIGHT]=i},fn.prototype.get=function(t){return t<this.location.length?this.location[t]:A.NONE},fn.prototype.isArea=function(){return this.location.length>1},fn.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===A.NONE)return!0;return!1},fn.prototype.setLocation=function(){1===arguments.length?this.setLocation(kt.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},fn.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(A.NONE)},fn.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},fn.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var tn=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new fn(e),this.elt[1]=new fn(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.elt[0]=new fn(i.elt[0]),this.elt[1]=new fn(i.elt[1])}}else if(2===arguments.length){var s=arguments[0],l=arguments[1];this.elt[0]=new fn(A.NONE),this.elt[1]=new fn(A.NONE),this.elt[s].setLocation(l)}else if(3===arguments.length){var d=arguments[0],_=arguments[1],E=arguments[2];this.elt[0]=new fn(d,_,E),this.elt[1]=new fn(d,_,E)}else if(4===arguments.length){var B=arguments[0],nt=arguments[1],Et=arguments[2],St=arguments[3];this.elt[0]=new fn(A.NONE,A.NONE,A.NONE),this.elt[1]=new fn(A.NONE,A.NONE,A.NONE),this.elt[B].setLocations(nt,Et,St)}};tn.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},tn.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},tn.prototype.isNull=function(t){return this.elt[t].isNull()},tn.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},tn.prototype.isLine=function(t){return this.elt[t].isLine()},tn.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new fn(t.elt[e]):this.elt[e].merge(t.elt[e])},tn.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},tn.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(kt.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},tn.prototype.toString=function(){var t=new J;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},tn.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},tn.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},tn.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(kt.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},tn.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},tn.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},tn.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new fn(this.elt[t].location[0]))},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.toLineLabel=function(t){for(var e=new tn(A.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e};var Sn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Gt,this._pts=new Gt,this._label=new tn(A.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Gt,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};Sn.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=bt.isCCW(this._ring.getCoordinates())},Sn.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Sn.prototype.computePoints=function(t){this._startDe=t;var e=t,i=!0;do{if(null===e)throw new bi("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new bi("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var s=e.getLabel();P.isTrue(s.isArea()),this.mergeLabel(s),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Sn.prototype.getLinearRing=function(){return this._ring},Sn.prototype.getCoordinate=function(t){return this._pts.get(t)},Sn.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Sn.prototype.addPoints=function(t,e,i){var s=t.getCoordinates();if(e){var l=1;i&&(l=0);for(var d=l;d<s.length;d++)this._pts.add(s[d])}else{var _=s.length-2;i&&(_=s.length-1);for(var E=_;E>=0;E--)this._pts.add(s[E])}},Sn.prototype.isHole=function(){return this._isHole},Sn.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Sn.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!bt.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},Sn.prototype.addHole=function(t){this._holes.add(t)},Sn.prototype.isShell=function(){return null===this._shell},Sn.prototype.getLabel=function(){return this._label},Sn.prototype.getEdges=function(){return this._edges},Sn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Sn.prototype.getShell=function(){return this._shell},Sn.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var i=arguments[1],s=arguments[0].getLocation(i,kt.RIGHT);if(s===A.NONE)return null;if(this._label.getLocation(i)===A.NONE)return this._label.setLocation(i,s),null}},Sn.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Sn.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn};var Ja=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(i,s){i.setMinEdgeRing(s)},e.prototype.getNext=function(i){return i.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sn),fl=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var i=new Gt,s=this._startDe;do{if(null===s.getMinEdgeRing()){var l=new Ja(s,this._geometryFactory);i.add(l)}s=s.getNext()}while(s!==this._startDe);return i},e.prototype.setEdgeRing=function(i,s){i.setEdgeRing(s)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var i=this._startDe;do{i.getNode().getEdges().linkMinimalDirectedEdges(this),i=i.getNext()}while(i!==this._startDe)},e.prototype.getNext=function(i){return i.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sn),Nr=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};Nr.prototype.setVisited=function(t){this._isVisited=t},Nr.prototype.setInResult=function(t){this._isInResult=t},Nr.prototype.isCovered=function(){return this._isCovered},Nr.prototype.isCoveredSet=function(){return this._isCoveredSet},Nr.prototype.setLabel=function(t){this._label=t},Nr.prototype.getLabel=function(){return this._label},Nr.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Nr.prototype.updateIM=function(t){P.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Nr.prototype.isInResult=function(){return this._isInResult},Nr.prototype.isVisited=function(){return this._isVisited},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var Ms=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var s=arguments[1];this._coord=arguments[0],this._edges=s,this._label=new tn(0,A.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var i=this.getEdges().getEdges().iterator();i.hasNext();)if(i.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(i){i.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(i){},e.prototype.computeMergedLocation=function(i,s){var l=A.NONE;if(l=this._label.getLocation(s),!i.isNull(s)){var d=i.getLocation(s);l!==A.BOUNDARY&&(l=d)}return l},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var i=arguments[0],s=arguments[1];null===this._label?this._label=new tn(i,s):this._label.setLocation(i,s)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof tn)for(var s=arguments[0],l=0;l<2;l++){var d=this.computeMergedLocation(s,l);this._label.getLocation(l)===A.NONE&&this._label.setLocation(l,d)}},e.prototype.add=function(i){this._edges.insert(i),i.setNode(this)},e.prototype.setLabelBoundary=function(i){if(null===this._label)return null;var s=A.NONE;null!==this._label&&(s=this._label.getLocation(i)),this._label.setLocation(i,s===A.BOUNDARY?A.INTERIOR:A.BOUNDARY)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nr),jr=function(){this.nodeMap=new Ct,this.nodeFact=null,this.nodeFact=arguments[0]};jr.prototype.find=function(t){return this.nodeMap.get(t)},jr.prototype.addNode=function(){if(arguments[0]instanceof w){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Ms){var i=arguments[0],s=this.nodeMap.get(i.getCoordinate());return null===s?(this.nodeMap.put(i.getCoordinate(),i),i):(s.mergeLabel(i),s)}},jr.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},jr.prototype.iterator=function(){return this.nodeMap.values().iterator()},jr.prototype.values=function(){return this.nodeMap.values()},jr.prototype.getBoundaryNodes=function(t){for(var e=new Gt,i=this.iterator();i.hasNext();){var s=i.next();s.getLabel().getLocation(t)===A.BOUNDARY&&e.add(s)}return e},jr.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};var an=function(){},rs={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},an.isNorthern=function(t){return t===an.NE||t===an.NW},an.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},an.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i},an.isInHalfPlane=function(t,e){return e===an.SE?t===an.SE||t===an.SW:t===e||t===e+1},an.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new L("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?an.NE:an.SE:e>=0?an.NW:an.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){var i=arguments[0],s=arguments[1];if(s.x===i.x&&s.y===i.y)throw new L("Cannot compute the quadrant for two identical points "+i);return s.x>=i.x?s.y>=i.y?an.NE:an.SE:s.y>=i.y?an.NW:an.SW}},rs.NE.get=function(){return 0},rs.NW.get=function(){return 1},rs.SW.get=function(){return 2},rs.SE.get=function(){return 3},Object.defineProperties(an,rs);var ir=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var i=arguments[1],s=arguments[2];this._edge=arguments[0],this.init(i,s),this._label=null}else if(4===arguments.length){var d=arguments[1],_=arguments[2],E=arguments[3];this._edge=arguments[0],this.init(d,_),this._label=E}};ir.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:bt.computeOrientation(t._p0,t._p1,this._p1)},ir.prototype.getDy=function(){return this._dy},ir.prototype.getCoordinate=function(){return this._p0},ir.prototype.setNode=function(t){this._node=t},ir.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),s=i.lastIndexOf("."),l=i.substring(s+1);t.print("  "+l+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},ir.prototype.compareTo=function(t){return this.compareDirection(t)},ir.prototype.getDirectedCoordinate=function(){return this._p1},ir.prototype.getDx=function(){return this._dx},ir.prototype.getLabel=function(){return this._label},ir.prototype.getEdge=function(){return this._edge},ir.prototype.getQuadrant=function(){return this._quadrant},ir.prototype.getNode=function(){return this._node},ir.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},ir.prototype.computeLabel=function(t){},ir.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=an.quadrant(this._dx,this._dy),P.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},ir.prototype.interfaces_=function(){return[C]},ir.prototype.getClass=function(){return ir};var ia=function(t){function e(){var i=arguments[0],s=arguments[1];if(t.call(this,i),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=s,s)this.init(i.getCoordinate(0),i.getCoordinate(1));else{var l=i.getNumPoints()-1;this.init(i.getCoordinate(l),i.getCoordinate(l-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(i){return this._depth[i]},e.prototype.setVisited=function(i){this._isVisited=i},e.prototype.computeDirectedLabel=function(){this._label=new tn(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(i,s){if(-999!==this._depth[i]&&this._depth[i]!==s)throw new bi("assigned depths do not match",this.getCoordinate());this._depth[i]=s},e.prototype.isInteriorAreaEdge=function(){for(var i=!0,s=0;s<2;s++)this._label.isArea(s)&&this._label.getLocation(s,kt.LEFT)===A.INTERIOR&&this._label.getLocation(s,kt.RIGHT)===A.INTERIOR||(i=!1);return i},e.prototype.setNextMin=function(i){this._nextMin=i},e.prototype.print=function(i){t.prototype.print.call(this,i),i.print(" "+this._depth[kt.LEFT]+"/"+this._depth[kt.RIGHT]),i.print(" ("+this.getDepthDelta()+")"),this._isInResult&&i.print(" inResult")},e.prototype.setMinEdgeRing=function(i){this._minEdgeRing=i},e.prototype.isLineEdge=function(){var i=this._label.isLine(0)||this._label.isLine(1),s=!this._label.isArea(0)||this._label.allPositionsEqual(0,A.EXTERIOR),l=!this._label.isArea(1)||this._label.allPositionsEqual(1,A.EXTERIOR);return i&&s&&l},e.prototype.setEdgeRing=function(i){this._edgeRing=i},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var i=this._edge.getDepthDelta();return this._isForward||(i=-i),i},e.prototype.setInResult=function(i){this._isInResult=i},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(i){this.print(i),i.print(" "),this._isForward?this._edge.print(i):this._edge.printReverse(i)},e.prototype.setSym=function(i){this._sym=i},e.prototype.setVisitedEdge=function(i){this.setVisited(i),this._sym.setVisited(i)},e.prototype.setEdgeDepths=function(i,s){var l=this.getEdge().getDepthDelta();this._isForward||(l=-l);var d=1;i===kt.LEFT&&(d=-1);var _=kt.opposite(i),E=s+l*d;this.setDepth(i,s),this.setDepth(_,E)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(i){this._next=i},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(i,s){return i===A.EXTERIOR&&s===A.INTERIOR?1:i===A.INTERIOR&&s===A.EXTERIOR?-1:0},e}(ir),Uo=function(){};Uo.prototype.createNode=function(t){return new Ms(t,null)},Uo.prototype.interfaces_=function(){return[]},Uo.prototype.getClass=function(){return Uo};var wn=function(){this._edges=new Gt,this._nodes=null,this._edgeEndList=new Gt,0===arguments.length?this._nodes=new jr(new Uo):1===arguments.length&&(this._nodes=new jr(arguments[0]))};wn.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var i=this._edges.get(e);i.print(t),i.eiList.print(t)}},wn.prototype.find=function(t){return this._nodes.find(t)},wn.prototype.addNode=function(){return arguments[0]instanceof Ms||arguments[0]instanceof w?this._nodes.addNode(arguments[0]):void 0},wn.prototype.getNodeIterator=function(){return this._nodes.iterator()},wn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},wn.prototype.debugPrintln=function(t){ee.out.println(t)},wn.prototype.isBoundaryNode=function(t,e){var i=this._nodes.find(e);if(null===i)return!1;var s=i.getLabel();return null!==s&&s.getLocation(t)===A.BOUNDARY},wn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},wn.prototype.matchInSameDirection=function(t,e,i,s){return!!t.equals(i)&&bt.computeOrientation(t,e,s)===bt.COLLINEAR&&an.quadrant(t,e)===an.quadrant(i,s)},wn.prototype.getEdgeEnds=function(){return this._edgeEndList},wn.prototype.debugPrint=function(t){ee.out.print(t)},wn.prototype.getEdgeIterator=function(){return this._edges.iterator()},wn.prototype.findEdgeInSameDirection=function(t,e){for(var i=0;i<this._edges.size();i++){var s=this._edges.get(i),l=s.getCoordinates();if(this.matchInSameDirection(t,e,l[0],l[1])||this.matchInSameDirection(t,e,l[l.length-1],l[l.length-2]))return s}return null},wn.prototype.insertEdge=function(t){this._edges.add(t)},wn.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null},wn.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this._edges.add(i);var s=new ia(i,!0),l=new ia(i,!1);s.setSym(l),l.setSym(s),this.add(s),this.add(l)}},wn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},wn.prototype.getNodes=function(){return this._nodes.values()},wn.prototype.findEdge=function(t,e){for(var i=0;i<this._edges.size();i++){var s=this._edges.get(i),l=s.getCoordinates();if(t.equals(l[0])&&e.equals(l[1]))return s}return null},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var dr=function(){this._geometryFactory=null,this._shellList=new Gt,this._geometryFactory=arguments[0]};dr.prototype.sortShellsAndHoles=function(t,e,i){for(var s=t.iterator();s.hasNext();){var l=s.next();l.isHole()?i.add(l):e.add(l)}},dr.prototype.computePolygons=function(t){for(var e=new Gt,i=t.iterator();i.hasNext();){var s=i.next().toPolygon(this._geometryFactory);e.add(s)}return e},dr.prototype.placeFreeHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var s=i.next();if(null===s.getShell()){var l=this.findEdgeRingContaining(s,t);if(null===l)throw new bi("unable to assign hole to a shell",s.getCoordinate(0));s.setShell(l)}}},dr.prototype.buildMinimalEdgeRings=function(t,e,i){for(var s=new Gt,l=t.iterator();l.hasNext();){var d=l.next();if(d.getMaxNodeDegree()>2){d.linkDirectedEdgesForMinimalEdgeRings();var _=d.buildMinimalRings(),E=this.findShell(_);null!==E?(this.placePolygonHoles(E,_),e.add(E)):i.addAll(_)}else s.add(d)}return s},dr.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},dr.prototype.buildMaximalEdgeRings=function(t){for(var e=new Gt,i=t.iterator();i.hasNext();){var s=i.next();if(s.isInResult()&&s.getLabel().isArea()&&null===s.getEdgeRing()){var l=new fl(s,this._geometryFactory);e.add(l),l.setInResult()}}return e},dr.prototype.placePolygonHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var s=i.next();s.isHole()&&s.setShell(t)}},dr.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},dr.prototype.findEdgeRingContaining=function(t,e){for(var i=t.getLinearRing(),s=i.getEnvelopeInternal(),l=i.getCoordinateN(0),d=null,_=null,E=e.iterator();E.hasNext();){var B=E.next(),nt=B.getLinearRing(),Et=nt.getEnvelopeInternal();null!==d&&(_=d.getLinearRing().getEnvelopeInternal());var St=!1;Et.contains(s)&&bt.isPointInRing(l,nt.getCoordinates())&&(St=!0),St&&(null===d||_.contains(Et))&&(d=B)}return d},dr.prototype.findShell=function(t){for(var e=0,i=null,s=t.iterator();s.hasNext();){var l=s.next();l.isHole()||(i=l,e++)}return P.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},dr.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];wn.linkResultDirectedEdges(arguments[1]);var s=this.buildMaximalEdgeRings(e),l=new Gt,d=this.buildMinimalEdgeRings(s,this._shellList,l);this.sortShellsAndHoles(d,this._shellList,l),this.placeFreeHoles(this._shellList,l)}},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr};var Yo=function(){};Yo.prototype.getBounds=function(){},Yo.prototype.interfaces_=function(){return[]},Yo.prototype.getClass=function(){return Yo};var qr=function(){this._bounds=null,this._item=null;var e=arguments[1];this._bounds=arguments[0],this._item=e};qr.prototype.getItem=function(){return this._item},qr.prototype.getBounds=function(){return this._bounds},qr.prototype.interfaces_=function(){return[Yo,q]},qr.prototype.getClass=function(){return qr};var Li=function(){this._size=null,this._items=null,this._size=0,this._items=new Gt,this._items.add(null)};Li.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Li.prototype.size=function(){return this._size},Li.prototype.reorder=function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)},Li.prototype.clear=function(){this._size=0,this._items.clear()},Li.prototype.isEmpty=function(){return 0===this._size},Li.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var qi=function(){};qi.prototype.visitItem=function(t){},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var So=function(){};So.prototype.insert=function(t,e){},So.prototype.remove=function(t,e){},So.prototype.query=function(){},So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So};var Fn=function(){this._childBoundables=new Gt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},$a={serialVersionUID:{configurable:!0}};Fn.prototype.getLevel=function(){return this._level},Fn.prototype.size=function(){return this._childBoundables.size()},Fn.prototype.getChildBoundables=function(){return this._childBoundables},Fn.prototype.addChildBoundable=function(t){P.isTrue(null===this._bounds),this._childBoundables.add(t)},Fn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Fn.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Fn.prototype.interfaces_=function(){return[Yo,q]},Fn.prototype.getClass=function(){return Fn},$a.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Fn,$a);var Jr=function(){};Jr.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Jr.min=function(t){return Jr.sort(t),t.get(0)},Jr.sort=function(t,e){var i=t.toArray();e?ki.sort(i,e):ki.sort(i);for(var s=t.iterator(),l=0,d=i.length;l<d;l++)s.next(),s.set(i[l])},Jr.singletonList=function(t){var e=new Gt;return e.add(t),e};var Tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],i=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=i,this._distance=this.distance()};Tn.prototype.expandToQueue=function(t,e){var i=Tn.isComposite(this._boundable1),s=Tn.isComposite(this._boundable2);if(i&&s)return Tn.area(this._boundable1)>Tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,t,e),null;if(s)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new L("neither boundable is composite")},Tn.prototype.isLeaves=function(){return!(Tn.isComposite(this._boundable1)||Tn.isComposite(this._boundable2))},Tn.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Tn.prototype.expand=function(t,e,i,s){for(var l=t.getChildBoundables().iterator();l.hasNext();){var d=l.next(),_=new Tn(d,e,this._itemDistance);_.getDistance()<s&&i.add(_)}},Tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Tn.prototype.getDistance=function(){return this._distance},Tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Tn.prototype.interfaces_=function(){return[C]},Tn.prototype.getClass=function(){return Tn},Tn.area=function(t){return t.getBounds().getArea()},Tn.isComposite=function(t){return t instanceof Fn};var Xn=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Gt,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var i=arguments[0];P.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}},is={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Xn.prototype.getNodeCapacity=function(){return this._nodeCapacity},Xn.prototype.lastNode=function(t){return t.get(t.size()-1)},Xn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Fn?t+=this.size(i):i instanceof qr&&(t+=1)}return t}},Xn.prototype.removeItem=function(t,e){for(var i=null,s=t.getChildBoundables().iterator();s.hasNext();){var l=s.next();l instanceof qr&&l.getItem()===e&&(i=l)}return null!==i&&(t.getChildBoundables().remove(i),!0)},Xn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Gt:t}if(1===arguments.length){for(var e=arguments[0],i=new Gt,s=e.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(l instanceof Fn){var d=this.itemsTree(l);null!==d&&i.add(d)}else l instanceof qr?i.add(l.getItem()):P.shouldNeverReachHere()}return i.size()<=0?null:i}},Xn.prototype.insert=function(t,e){P.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new qr(t,e))},Xn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Gt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var i=arguments[0],s=arguments[1],l=arguments[2];if(P.isTrue(i>-2),s.getLevel()===i)return l.add(s),null;for(var d=s.getChildBoundables().iterator();d.hasNext();){var _=d.next();_ instanceof Fn?this.boundablesAtLevel(i,_,l):(P.isTrue(_ instanceof qr),-1===i&&l.add(_))}return null}},Xn.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Gt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var i=arguments[0],s=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,s)}else if(3===arguments.length)if(Pt(arguments[2],qi)&&arguments[0]instanceof Object&&arguments[1]instanceof Fn)for(var l=arguments[0],_=arguments[2],E=arguments[1].getChildBoundables(),B=0;B<E.size();B++){var nt=E.get(B);this.getIntersectsOp().intersects(nt.getBounds(),l)&&(nt instanceof Fn?this.query(l,nt,_):nt instanceof qr?_.visitItem(nt.getItem()):P.shouldNeverReachHere())}else if(Pt(arguments[2],qn)&&arguments[0]instanceof Object&&arguments[1]instanceof Fn)for(var Et=arguments[0],Xt=arguments[2],Ut=arguments[1].getChildBoundables(),Ht=0;Ht<Ut.size();Ht++){var oe=Ut.get(Ht);this.getIntersectsOp().intersects(oe.getBounds(),Et)&&(oe instanceof Fn?this.query(Et,oe,Xt):oe instanceof qr?Xt.add(oe.getItem()):P.shouldNeverReachHere())}},Xn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Xn.prototype.getRoot=function(){return this.build(),this._root},Xn.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var i=arguments[0],s=arguments[1],l=arguments[2],d=this.removeItem(s,l);if(d)return!0;for(var _=null,E=s.getChildBoundables().iterator();E.hasNext();){var B=E.next();if(this.getIntersectsOp().intersects(B.getBounds(),i)&&B instanceof Fn&&(d=this.remove(i,B,l))){_=B;break}}return null!==_&&_.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(_),d}},Xn.prototype.createHigherLevels=function(t,e){P.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},Xn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Fn){var s=this.depth(i);s>t&&(t=s)}}return t+1}},Xn.prototype.createParentBoundables=function(t,e){P.isTrue(!t.isEmpty());var i=new Gt;i.add(this.createNode(e));var s=new Gt(t);Jr.sort(s,this.getComparator());for(var l=s.iterator();l.hasNext();){var d=l.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(d)}return i},Xn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Xn.prototype.interfaces_=function(){return[q]},Xn.prototype.getClass=function(){return Xn},Xn.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},is.IntersectsOp.get=function(){return cl},is.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},is.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Xn,is);var cl=function(){},Ho=function(){};Ho.prototype.distance=function(t,e){},Ho.prototype.interfaces_=function(){return[]},Ho.prototype.getClass=function(){return Ho};var Ka=function(t){function e(s){t.call(this,s=s||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(s,l){P.isTrue(s.length>0);for(var d=new Gt,_=0;_<s.length;_++)d.addAll(this.createParentBoundablesFromVerticalSlice(s[_],l));return d},e.prototype.createNode=function(s){return new Qa(s)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var s=arguments[0],l=arguments[1];if(s.isNull())return null;t.prototype.insert.call(this,s,l)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(s,l){for(var d=Math.trunc(Math.ceil(s.size()/l)),_=new Array(l).fill(null),E=s.iterator(),B=0;B<l;B++){_[B]=new Gt;for(var nt=0;E.hasNext()&&nt<d;){var Et=E.next();_[B].add(Et),nt++}}return _},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Pt(arguments[2],qi)&&arguments[0]instanceof Object&&arguments[1]instanceof Fn||Pt(arguments[2],qn)&&arguments[0]instanceof Object&&arguments[1]instanceof Fn)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(s,l){return t.prototype.createParentBoundables.call(this,s,l)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(s,l){P.isTrue(!s.isEmpty());var d=Math.trunc(Math.ceil(s.size()/this.getNodeCapacity())),_=new Gt(s);Jr.sort(_,e.xComparator);var E=this.verticalSlices(_,Math.trunc(Math.ceil(Math.sqrt(d))));return this.createParentBoundablesFromVerticalSlices(E,l)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Pt(arguments[0],Ho)){var s=arguments[0],l=new Tn(this.getRoot(),this.getRoot(),s);return this.nearestNeighbour(l)}if(arguments[0]instanceof Tn)return this.nearestNeighbour(arguments[0],M.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&Pt(arguments[1],Ho)){var _=arguments[0],E=arguments[1],B=new Tn(this.getRoot(),_.getRoot(),E);return this.nearestNeighbour(B)}if(arguments[0]instanceof Tn&&"number"==typeof arguments[1]){var nt=arguments[0],Et=arguments[1],St=null,Xt=new Li;for(Xt.add(nt);!Xt.isEmpty()&&Et>0;){var Ut=Xt.poll(),Ht=Ut.getDistance();if(Ht>=Et)break;Ut.isLeaves()?(Et=Ht,St=Ut):Ut.expandToQueue(Xt,Et)}return[St.getBoundable(0).getItem(),St.getBoundable(1).getItem()]}}else if(3===arguments.length){var on=arguments[2],en=new qr(arguments[0],arguments[1]),mn=new Tn(this.getRoot(),en,on);return this.nearestNeighbour(mn)[0]}},e.prototype.interfaces_=function(){return[So,q]},e.prototype.getClass=function(){return e},e.centreX=function(s){return e.avg(s.getMinX(),s.getMaxX())},e.avg=function(s,l){return(s+l)/2},e.centreY=function(s){return e.avg(s.getMinY(),s.getMaxY())},i.STRtreeNode.get=function(){return Qa},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[G]},compare:function(s,l){return t.compareDoubles(e.centreX(s.getBounds()),e.centreX(l.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[G]},compare:function(s,l){return t.compareDoubles(e.centreY(s.getBounds()),e.centreY(l.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(s,l){return s.intersects(l)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,i),e}(Xn),Qa=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var i=null,s=this.getChildBoundables().iterator();s.hasNext();){var l=s.next();null===i?i=new Bt(l.getBounds()):i.expandToInclude(l.getBounds())}return i},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fn),yr=function(){};yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},yr.relativeSign=function(t,e){return t<e?-1:t>e?1:0},yr.compare=function(t,e,i){if(e.equals2D(i))return 0;var s=yr.relativeSign(e.x,i.x),l=yr.relativeSign(e.y,i.y);switch(t){case 0:return yr.compareValue(s,l);case 1:return yr.compareValue(l,s);case 2:return yr.compareValue(l,-s);case 3:return yr.compareValue(-s,l);case 4:return yr.compareValue(-s,-l);case 5:return yr.compareValue(-l,-s);case 6:return yr.compareValue(-l,s);case 7:return yr.compareValue(s,-l)}return P.shouldNeverReachHere("invalid octant value"),0},yr.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Zi=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],s=arguments[3];this._segString=t,this.coord=new w(e),this.segmentIndex=i,this._segmentOctant=s,this._isInterior=!e.equals2D(t.getCoordinate(i))};Zi.prototype.getCoordinate=function(){return this.coord},Zi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Zi.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:yr.compare(this._segmentOctant,this.coord,e.coord)},Zi.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Zi.prototype.isInterior=function(){return this._isInterior},Zi.prototype.interfaces_=function(){return[C]},Zi.prototype.getClass=function(){return Zi};var or=function(){this._nodeMap=new Ct,this._edge=null,this._edge=arguments[0]};or.prototype.getSplitCoordinates=function(){var t=new Tr;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var s=e.next();this.addEdgeCoordinates(i,s,t),i=s}return t.toCoordinateArray()},or.prototype.addCollapsedNodes=function(){var t=new Gt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this._edge.getCoordinate(i),i)}},or.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},or.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e),s=this._edge.getCoordinate(e+2);i.equals2D(s)&&t.add(new ot(e+1))}},or.prototype.addEdgeCoordinates=function(t,e,i){var s=this._edge.getCoordinate(e.segmentIndex),l=e.isInterior()||!e.coord.equals2D(s);i.add(new w(t.coord),!1);for(var d=t.segmentIndex+1;d<=e.segmentIndex;d++)i.add(this._edge.getCoordinate(d));l&&i.add(new w(e.coord))},or.prototype.iterator=function(){return this._nodeMap.values().iterator()},or.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var s=e.next(),l=this.createSplitEdge(i,s);t.add(l),i=s}},or.prototype.findCollapseIndex=function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var s=e.segmentIndex-t.segmentIndex;return e.isInterior()||s--,1===s&&(i[0]=t.segmentIndex+1,!0)},or.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),i=this.iterator(),s=i.next();i.hasNext();){var l=i.next();this.findCollapseIndex(s,l,e)&&t.add(new ot(e[0])),s=l}},or.prototype.getEdge=function(){return this._edge},or.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},or.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,s=this._edge.getCoordinate(e.segmentIndex),l=e.isInterior()||!e.coord.equals2D(s);l||i--;var d=new Array(i).fill(null),_=0;d[_++]=new w(t.coord);for(var E=t.segmentIndex+1;E<=e.segmentIndex;E++)d[_++]=this._edge.getCoordinate(E);return l&&(d[_]=new w(e.coord)),new bn(d,this._edge.getData())},or.prototype.add=function(t,e){var i=new Zi(this._edge,t,e,this._edge.getSegmentOctant(e)),s=this._nodeMap.get(i);return null!==s?(P.isTrue(s.coord.equals2D(t),"Found equal nodes with different coordinates"),s):(this._nodeMap.put(i,i),i)},or.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new R("bad split edge start point at "+i);var s=t.get(t.size()-1).getCoordinates(),l=s[s.length-1];if(!l.equals2D(e[e.length-1]))throw new R("bad split edge end point at "+l)},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or};var No=function(){};No.prototype.interfaces_=function(){return[]},No.prototype.getClass=function(){return No},No.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new L("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),s=Math.abs(e);return t>=0?e>=0?i>=s?0:1:i>=s?7:6:e>=0?i>=s?3:2:i>=s?4:5}if(arguments[0]instanceof w&&arguments[1]instanceof w){var l=arguments[0],d=arguments[1],_=d.x-l.x,E=d.y-l.y;if(0===_&&0===E)throw new L("Cannot compute the octant for two identical points "+l);return No.octant(_,E)}};var Oi=function(){};Oi.prototype.getCoordinates=function(){},Oi.prototype.size=function(){},Oi.prototype.getCoordinate=function(t){},Oi.prototype.isClosed=function(){},Oi.prototype.setData=function(t){},Oi.prototype.getData=function(){},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi};var os=function(){};os.prototype.addIntersection=function(t,e){},os.prototype.interfaces_=function(){return[Oi]},os.prototype.getClass=function(){return os};var bn=function(){this._nodeList=new or(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};bn.prototype.getCoordinates=function(){return this._pts},bn.prototype.size=function(){return this._pts.length},bn.prototype.getCoordinate=function(t){return this._pts[t]},bn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},bn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},bn.prototype.setData=function(t){this._data=t},bn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:No.octant(t,e)},bn.prototype.getData=function(){return this._data},bn.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var s=arguments[1],d=new w(arguments[0].getIntersection(arguments[3]));this.addIntersection(d,s)}},bn.prototype.toString=function(){return dt.toLineString(new Mn(this._pts))},bn.prototype.getNodeList=function(){return this._nodeList},bn.prototype.addIntersectionNode=function(t,e){var i=e,s=i+1;return s<this._pts.length&&t.equals2D(this._pts[s])&&(i=s),this._nodeList.add(t,i)},bn.prototype.addIntersections=function(t,e,i){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,e,i,s)},bn.prototype.interfaces_=function(){return[os]},bn.prototype.getClass=function(){return bn},bn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Gt;return bn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var s=arguments[1],l=arguments[0].iterator();l.hasNext();)l.next().getNodeList().addSplitEdges(s)};var ne=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new w,this.p1=new w;else if(1===arguments.length){var t=arguments[0];this.p0=new w(t.p0),this.p1=new w(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var s=arguments[2],l=arguments[3];this.p0=new w(arguments[0],arguments[1]),this.p1=new w(s,l)}},tu={serialVersionUID:{configurable:!0}};ne.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ne.prototype.orientationIndex=function(){if(arguments[0]instanceof ne){var t=arguments[0],e=bt.orientationIndex(this.p0,this.p1,t.p0),i=bt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof w)return bt.orientationIndex(this.p0,this.p1,arguments[0])},ne.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},ne.prototype.isVertical=function(){return this.p0.x===this.p1.x},ne.prototype.equals=function(t){if(!(t instanceof ne))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},ne.prototype.intersection=function(t){var e=new wt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},ne.prototype.project=function(){if(arguments[0]instanceof w){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new w(t);var e=this.projectionFactor(t),i=new w;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof ne){var s=arguments[0],l=this.projectionFactor(s.p0),d=this.projectionFactor(s.p1);if(l>=1&&d>=1||l<=0&&d<=0)return null;var _=this.project(s.p0);l<0&&(_=this.p0),l>1&&(_=this.p1);var E=this.project(s.p1);return d<0&&(E=this.p0),d>1&&(E=this.p1),new ne(_,E)}},ne.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ne.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ne.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},ne.prototype.distancePerpendicular=function(t){return bt.distancePointLinePerpendicular(t,this.p0,this.p1)},ne.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ne.prototype.midPoint=function(){return ne.midPoint(this.p0,this.p1)},ne.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,s=e*e+i*i;return s<=0?M.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/s},ne.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=new Array(2).fill(null),s=M.MAX_VALUE,l=null,d=this.closestPoint(t.p0);s=d.distance(t.p0),i[0]=d,i[1]=t.p0;var _=this.closestPoint(t.p1);(l=_.distance(t.p1))<s&&(s=l,i[0]=_,i[1]=t.p1);var E=t.closestPoint(this.p0);(l=E.distance(this.p0))<s&&(s=l,i[0]=this.p0,i[1]=E);var B=t.closestPoint(this.p1);return(l=B.distance(this.p1))<s&&(s=l,i[0]=this.p1,i[1]=B),i},ne.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},ne.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ne.prototype.getLength=function(){return this.p0.distance(this.p1)},ne.prototype.compareTo=function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)},ne.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},ne.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},ne.prototype.lineIntersection=function(t){try{return Vt.intersection(this.p0,this.p1,t.p0,t.p1)}catch(e){if(!(e instanceof Jt))throw e}return null},ne.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ne.prototype.pointAlongOffset=function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),s=this.p0.y+t*(this.p1.y-this.p0.y),l=this.p1.x-this.p0.x,d=this.p1.y-this.p0.y,_=Math.sqrt(l*l+d*d),E=0,B=0;if(0!==e){if(_<=0)throw new Error("Cannot compute offset from zero-length line segment");E=e*l/_,B=e*d/_}return new w(i-B,s+E)},ne.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},ne.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||M.isNaN(e))&&(e=1),e},ne.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ne.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ne.prototype.distance=function(){if(arguments[0]instanceof ne){var t=arguments[0];return bt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof w)return bt.distancePointLine(arguments[0],this.p0,this.p1)},ne.prototype.pointAlong=function(t){var e=new w;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},ne.prototype.hashCode=function(){var t=M.doubleToLongBits(this.p0.x);t^=31*M.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=M.doubleToLongBits(this.p1.x);return i^=31*M.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},ne.prototype.interfaces_=function(){return[C,q]},ne.prototype.getClass=function(){return ne},ne.midPoint=function(t,e){return new w((t.x+e.x)/2,(t.y+e.y)/2)},tu.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ne,tu);var ss=function(){this.tempEnv1=new Bt,this.tempEnv2=new Bt,this._overlapSeg1=new ne,this._overlapSeg2=new ne};ss.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var i=arguments[2],s=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),i.getLineSegment(s,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss};var hr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[1],i=arguments[2],s=arguments[3];this._pts=arguments[0],this._start=e,this._end=i,this._context=s};hr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},hr.prototype.computeSelect=function(t,e,i,s){if(s.tempEnv1.init(this._pts[e],this._pts[i]),i-e==1)return s.select(this,e),null;if(!t.intersects(s.tempEnv1))return null;var _=Math.trunc((e+i)/2);e<_&&this.computeSelect(t,e,_,s),_<i&&this.computeSelect(t,_,i,s)},hr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t},hr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},hr.prototype.setId=function(t){this._id=t},hr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},hr.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Bt(this._pts[this._start],this._pts[this._end])),this._env},hr.prototype.getEndIndex=function(){return this._end},hr.prototype.getStartIndex=function(){return this._start},hr.prototype.getContext=function(){return this._context},hr.prototype.getId=function(){return this._id},hr.prototype.computeOverlapsInternal=function(t,e,i,s,l,d){var _=this._pts[t],E=this._pts[e],B=i._pts[s],nt=i._pts[l];if(e-t==1&&l-s==1)return d.overlap(this,t,i,s),null;if(d.tempEnv1.init(_,E),d.tempEnv2.init(B,nt),!d.tempEnv1.intersects(d.tempEnv2))return null;var Et=Math.trunc((t+e)/2),St=Math.trunc((s+l)/2);t<Et&&(s<St&&this.computeOverlapsInternal(t,Et,i,s,St,d),St<l&&this.computeOverlapsInternal(t,Et,i,St,l,d)),Et<e&&(s<St&&this.computeOverlapsInternal(Et,e,i,s,St,d),St<l&&this.computeOverlapsInternal(Et,e,i,St,l,d))},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var $r=function(){};$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getChainStartIndices=function(t){var e=0,i=new Gt;i.add(new ot(e));do{var s=$r.findChainEnd(t,e);i.add(new ot(s)),e=s}while(e<t.length-1);return $r.toIntArray(i)},$r.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var s=an.quadrant(t[i],t[i+1]),l=e+1;l<t.length&&(t[l-1].equals2D(t[l])||an.quadrant(t[l-1],t[l])===s);)l++;return l-1},$r.getChains=function(){if(1===arguments.length)return $r.getChains(arguments[0],null);if(2===arguments.length){for(var e=arguments[0],i=arguments[1],s=new Gt,l=$r.getChainStartIndices(e),d=0;d<l.length-1;d++){var _=new hr(e,l[d],l[d+1],i);s.add(_)}return s}},$r.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var lo=function(){};lo.prototype.computeNodes=function(t){},lo.prototype.getNodedSubstrings=function(){},lo.prototype.interfaces_=function(){return[]},lo.prototype.getClass=function(){return lo};var as=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};as.prototype.setSegmentIntersector=function(t){this._segInt=t},as.prototype.interfaces_=function(){return[lo]},as.prototype.getClass=function(){return as};var oa=function(t){function e(s){s?t.call(this,s):t.call(this),this._monoChains=new Gt,this._index=new Ka,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return bn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(s){for(var l=$r.getChains(s.getCoordinates(),s).iterator();l.hasNext();){var d=l.next();d.setId(this._idCounter++),this._index.insert(d.getEnvelope(),d),this._monoChains.add(d)}},e.prototype.computeNodes=function(s){this._nodedSegStrings=s;for(var l=s.iterator();l.hasNext();)this.add(l.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var s=new eu(this._segInt),l=this._monoChains.iterator();l.hasNext();)for(var d=l.next(),_=this._index.query(d.getEnvelope()).iterator();_.hasNext();){var E=_.next();if(E.getId()>d.getId()&&(d.computeOverlaps(E,s),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.SegmentOverlapAction.get=function(){return eu},Object.defineProperties(e,i),e}(as),eu=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var s=arguments[1],l=arguments[2],d=arguments[3],_=arguments[0].getContext(),E=l.getContext();this._si.processIntersections(_,s,E,d)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ss),Ne=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var s=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(s)}else if(4===arguments.length){var d=arguments[1],_=arguments[2],E=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(d),this.setJoinStyle(_),this.setMitreLimit(E)}},Ri={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ne.prototype.getEndCapStyle=function(){return this._endCapStyle},Ne.prototype.isSingleSided=function(){return this._isSingleSided},Ne.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ne.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ne.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ne.JOIN_ROUND&&(this._quadrantSegments=Ne.DEFAULT_QUADRANT_SEGMENTS)},Ne.prototype.getJoinStyle=function(){return this._joinStyle},Ne.prototype.setJoinStyle=function(t){this._joinStyle=t},Ne.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ne.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ne.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ne.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ne.prototype.getMitreLimit=function(){return this._mitreLimit},Ne.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ne.prototype.setSingleSided=function(t){this._isSingleSided=t},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Ri.CAP_ROUND.get=function(){return 1},Ri.CAP_FLAT.get=function(){return 2},Ri.CAP_SQUARE.get=function(){return 3},Ri.JOIN_ROUND.get=function(){return 1},Ri.JOIN_MITRE.get=function(){return 2},Ri.JOIN_BEVEL.get=function(){return 3},Ri.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ri.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ri.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ne,Ri);var In=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=bt.COUNTERCLOCKWISE,this._inputLine=t||null},us={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};In.prototype.isDeletable=function(t,e,i,s){var l=this._inputLine[t],d=this._inputLine[e],_=this._inputLine[i];return!!this.isConcave(l,d,_)&&!!this.isShallow(l,d,_,s)&&this.isShallowSampled(l,d,t,i,s)},In.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),s=!1;i<this._inputLine.length;){var l=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=In.DELETE,l=!0,s=!0),e=this.findNextNonDeletedIndex(t=l?i:e),i=this.findNextNonDeletedIndex(e)}return s},In.prototype.isShallowConcavity=function(t,e,i,s){return bt.computeOrientation(t,e,i)===this._angleOrientation&&bt.distancePointLine(e,t,i)<s},In.prototype.isShallowSampled=function(t,e,i,s,l){var d=Math.trunc((s-i)/In.NUM_PTS_TO_CHECK);d<=0&&(d=1);for(var _=i;_<s;_+=d)if(!this.isShallow(t,e,this._inputLine[_],l))return!1;return!0},In.prototype.isConcave=function(t,e,i){return bt.computeOrientation(t,e,i)===this._angleOrientation},In.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=bt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},In.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===In.DELETE;)e++;return e},In.prototype.isShallow=function(t,e,i,s){return bt.distancePointLine(e,t,i)<s},In.prototype.collapseLine=function(){for(var t=new Tr,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==In.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.simplify=function(t,e){return new In(t).simplify(e)},us.INIT.get=function(){return 0},us.DELETE.get=function(){return 1},us.KEEP.get=function(){return 1},us.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(In,us);var Mr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Gt},nu={COORDINATE_ARRAY_TYPE:{configurable:!0}};Mr.prototype.getCoordinates=function(){return this._ptList.toArray(Mr.COORDINATE_ARRAY_TYPE)},Mr.prototype.setPrecisionModel=function(t){this._precisionModel=t},Mr.prototype.addPt=function(t){var e=new w(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Mr.prototype.revere=function(){},Mr.prototype.addPts=function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var s=t.length-1;s>=0;s--)this.addPt(t[s])},Mr.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Mr.prototype.toString=function(){return(new we).createLineString(this.getCoordinates()).toString()},Mr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new w(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Mr.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},nu.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Mr,nu);var Ie=function(){},Mo={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.toDegrees=function(t){return 180*t/Math.PI},Ie.normalize=function(t){for(;t>Math.PI;)t-=Ie.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ie.PI_TIMES_2;return t},Ie.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return Math.atan2(i.y-e.y,i.x-e.x)}},Ie.isAcute=function(t,e,i){return(t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y)>0},Ie.isObtuse=function(t,e,i){return(t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y)<0},Ie.interiorAngle=function(t,e,i){var s=Ie.angle(e,t),l=Ie.angle(e,i);return Math.abs(l-s)},Ie.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ie.PI_TIMES_2;t>=Ie.PI_TIMES_2&&(t=0)}else{for(;t>=Ie.PI_TIMES_2;)t-=Ie.PI_TIMES_2;t<0&&(t=0)}return t},Ie.angleBetween=function(t,e,i){var s=Ie.angle(e,t),l=Ie.angle(e,i);return Ie.diff(s,l)},Ie.diff=function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},Ie.toRadians=function(t){return t*Math.PI/180},Ie.getTurn=function(t,e){var i=Math.sin(e-t);return i>0?Ie.COUNTERCLOCKWISE:i<0?Ie.CLOCKWISE:Ie.NONE},Ie.angleBetweenOriented=function(t,e,i){var s=Ie.angle(e,t),l=Ie.angle(e,i)-s;return l<=-Math.PI?l+Ie.PI_TIMES_2:l>Math.PI?l-Ie.PI_TIMES_2:l},Mo.PI_TIMES_2.get=function(){return 2*Math.PI},Mo.PI_OVER_2.get=function(){return Math.PI/2},Mo.PI_OVER_4.get=function(){return Math.PI/4},Mo.COUNTERCLOCKWISE.get=function(){return bt.COUNTERCLOCKWISE},Mo.CLOCKWISE.get=function(){return bt.CLOCKWISE},Mo.NONE.get=function(){return bt.COLLINEAR},Object.defineProperties(Ie,Mo);var vn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ne,this._seg1=new ne,this._offset0=new ne,this._offset1=new ne,this._side=0,this._hasNarrowConcaveAngle=!1;var i=arguments[1],s=arguments[2];this._precisionModel=arguments[0],this._bufParams=i,this._li=new wt,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===Ne.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(s)},ls={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};vn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=bt.computeOrientation(this._s0,this._s1,this._s2),s=i===bt.CLOCKWISE&&this._side===kt.LEFT||i===bt.COUNTERCLOCKWISE&&this._side===kt.RIGHT;0===i?this.addCollinear(e):s?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},vn.prototype.addLineEndCap=function(t,e){var i=new ne(t,e),s=new ne;this.computeOffsetSegment(i,kt.LEFT,this._distance,s);var l=new ne;this.computeOffsetSegment(i,kt.RIGHT,this._distance,l);var E=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Ne.CAP_ROUND:this._segList.addPt(s.p1),this.addFilletArc(e,E+Math.PI/2,E-Math.PI/2,bt.CLOCKWISE,this._distance),this._segList.addPt(l.p1);break;case Ne.CAP_FLAT:this._segList.addPt(s.p1),this._segList.addPt(l.p1);break;case Ne.CAP_SQUARE:var B=new w;B.x=Math.abs(this._distance)*Math.cos(E),B.y=Math.abs(this._distance)*Math.sin(E);var nt=new w(s.p1.x+B.x,s.p1.y+B.y),Et=new w(l.p1.x+B.x,l.p1.y+B.y);this._segList.addPt(nt),this._segList.addPt(Et)}},vn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},vn.prototype.addMitreJoin=function(t,e,i,s){var l=!0,d=null;try{d=Vt.intersection(e.p0,e.p1,i.p0,i.p1),(s<=0?1:d.distance(t)/Math.abs(s))>this._bufParams.getMitreLimit()&&(l=!1)}catch(_){if(!(_ instanceof Jt))throw _;d=new w(0,0),l=!1}l?this._segList.addPt(d):this.addLimitedMitreJoin(e,i,s,this._bufParams.getMitreLimit())},vn.prototype.addFilletCorner=function(t,e,i,s,l){var E=Math.atan2(e.y-t.y,e.x-t.x),Et=Math.atan2(i.y-t.y,i.x-t.x);s===bt.CLOCKWISE?E<=Et&&(E+=2*Math.PI):E>=Et&&(E-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,E,Et,s,l),this._segList.addPt(i)},vn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*vn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ne.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ne.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},vn.prototype.createSquare=function(t){this._segList.addPt(new w(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new w(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new w(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},vn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},vn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},vn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},vn.prototype.initSideSegments=function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},vn.prototype.addLimitedMitreJoin=function(t,e,i,s){var l=this._seg0.p1,d=Ie.angle(l,this._seg0.p0),_=Ie.angleBetweenOriented(this._seg0.p0,l,this._seg1.p1)/2,E=Ie.normalize(d+_),B=Ie.normalize(E+Math.PI),nt=s*i,Et=i-nt*Math.abs(Math.sin(_)),St=l.x+nt*Math.cos(B),Xt=l.y+nt*Math.sin(B),Ut=new w(St,Xt),Ht=new ne(l,Ut),oe=Ht.pointAlongOffset(1,Et),ge=Ht.pointAlongOffset(1,-Et);this._side===kt.LEFT?(this._segList.addPt(oe),this._segList.addPt(ge)):(this._segList.addPt(ge),this._segList.addPt(oe))},vn.prototype.computeOffsetSegment=function(t,e,i,s){var l=e===kt.LEFT?1:-1,d=t.p1.x-t.p0.x,_=t.p1.y-t.p0.y,E=Math.sqrt(d*d+_*_),B=l*i*d/E,nt=l*i*_/E;s.p0.x=t.p0.x-nt,s.p0.y=t.p0.y+B,s.p1.x=t.p1.x-nt,s.p1.y=t.p1.y+B},vn.prototype.addFilletArc=function(t,e,i,s,l){var d=s===bt.CLOCKWISE?-1:1,_=Math.abs(e-i),E=Math.trunc(_/this._filletAngleQuantum+.5);if(E<1)return null;for(var B=_/E,nt=0,Et=new w;nt<_;){var St=e+d*nt;Et.x=t.x+l*Math.cos(St),Et.y=t.y+l*Math.sin(St),this._segList.addPt(Et),nt+=B}},vn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*vn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new w((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var s=new w((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(s)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},vn.prototype.createCircle=function(t){var e=new w(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},vn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},vn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Mr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*vn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},vn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ne.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ne.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,bt.CLOCKWISE,this._distance))},vn.prototype.closeRing=function(){this._segList.closeRing()},vn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},ls.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},ls.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},ls.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ls.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(vn,ls);var vr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e};vr.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var i=e<0,s=Math.abs(e),l=this.getSegGen(s);t.length<=1?this.computePointCurve(t[0],l):this.computeOffsetCurve(t,i,l);var d=l.getCoordinates();return i&&_e.reverse(d),d},vr.prototype.computeSingleSidedBufferCurve=function(t,e,i){var s=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var l=In.simplify(t,-s),d=l.length-1;i.initSideSegments(l[d],l[d-1],kt.LEFT),i.addFirstSegment();for(var _=d-2;_>=0;_--)i.addNextSegment(l[_],!0)}else{i.addSegments(t,!1);var E=In.simplify(t,s),B=E.length-1;i.initSideSegments(E[0],E[1],kt.LEFT),i.addFirstSegment();for(var nt=2;nt<=B;nt++)i.addNextSegment(E[nt],!0)}i.addLastSegment(),i.closeRing()},vr.prototype.computeRingBufferCurve=function(t,e,i){var s=this.simplifyTolerance(this._distance);e===kt.RIGHT&&(s=-s);var l=In.simplify(t,s),d=l.length-1;i.initSideSegments(l[d-1],l[0],e);for(var _=1;_<=d;_++)i.addNextSegment(l[_],1!==_);i.closeRing()},vr.prototype.computeLineBufferCurve=function(t,e){var i=this.simplifyTolerance(this._distance),s=In.simplify(t,i),l=s.length-1;e.initSideSegments(s[0],s[1],kt.LEFT);for(var d=2;d<=l;d++)e.addNextSegment(s[d],!0);e.addLastSegment(),e.addLineEndCap(s[l-1],s[l]);var _=In.simplify(t,-i),E=_.length-1;e.initSideSegments(_[E],_[E-1],kt.LEFT);for(var B=E-2;B>=0;B--)e.addNextSegment(_[B],!0);e.addLastSegment(),e.addLineEndCap(_[1],_[0]),e.closeRing()},vr.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ne.CAP_ROUND:e.createCircle(t);break;case Ne.CAP_SQUARE:e.createSquare(t)}},vr.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var i=Math.abs(e),s=this.getSegGen(i);return t.length<=1?this.computePointCurve(t[0],s):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,s):this.computeLineBufferCurve(t,s),s.getCoordinates()},vr.prototype.getBufferParameters=function(){return this._bufParams},vr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},vr.prototype.getRingCurve=function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return vr.copyCoordinates(t);var s=this.getSegGen(i);return this.computeRingBufferCurve(t,e,s),s.getCoordinates()},vr.prototype.computeOffsetCurve=function(t,e,i){var s=this.simplifyTolerance(this._distance);if(e){var l=In.simplify(t,-s),d=l.length-1;i.initSideSegments(l[d],l[d-1],kt.LEFT),i.addFirstSegment();for(var _=d-2;_>=0;_--)i.addNextSegment(l[_],!0)}else{var E=In.simplify(t,s),B=E.length-1;i.initSideSegments(E[0],E[1],kt.LEFT),i.addFirstSegment();for(var nt=2;nt<=B;nt++)i.addNextSegment(E[nt],!0)}i.addLastSegment()},vr.prototype.getSegGen=function(t){return new vn(this._precisionModel,this._bufParams,t)},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new w(t[i]);return e};var fo=function(){this._subgraphs=null,this._seg=new ne,this._cga=new bt,this._subgraphs=arguments[0]},ru={DepthSegment:{configurable:!0}};fo.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Gt,i=this._subgraphs.iterator();i.hasNext();){var s=i.next(),l=s.getEnvelope();t.y<l.getMinY()||t.y>l.getMaxY()||this.findStabbedSegments(t,s.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Pt(arguments[2],qn)&&arguments[0]instanceof w&&arguments[1]instanceof ia){for(var d=arguments[0],_=arguments[1],E=arguments[2],B=_.getEdge().getCoordinates(),nt=0;nt<B.length-1;nt++)if(this._seg.p0=B[nt],this._seg.p1=B[nt+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<d.x||this._seg.isHorizontal()||d.y<this._seg.p0.y||d.y>this._seg.p1.y||bt.computeOrientation(this._seg.p0,this._seg.p1,d)===bt.RIGHT)){var Et=_.getDepth(kt.LEFT);this._seg.p0.equals(B[nt])||(Et=_.getDepth(kt.RIGHT));var St=new co(this._seg,Et);E.add(St)}}else if(Pt(arguments[2],qn)&&arguments[0]instanceof w&&Pt(arguments[1],qn))for(var Xt=arguments[0],Ht=arguments[2],oe=arguments[1].iterator();oe.hasNext();){var ge=oe.next();ge.isForward()&&this.findStabbedSegments(Xt,ge,Ht)}},fo.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Jr.min(e)._leftDepth},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},ru.DepthSegment.get=function(){return co},Object.defineProperties(fo,ru);var co=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[1];this._upwardSeg=new ne(arguments[0]),this._leftDepth=e};co.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)},co.prototype.compareX=function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)},co.prototype.toString=function(){return this._upwardSeg.toString()},co.prototype.interfaces_=function(){return[C]},co.prototype.getClass=function(){return co};var Me=function(t,e,i){this.p0=t||null,this.p1=e||null,this.p2=i||null};Me.prototype.area=function(){return Me.area(this.p0,this.p1,this.p2)},Me.prototype.signedArea=function(){return Me.signedArea(this.p0,this.p1,this.p2)},Me.prototype.interpolateZ=function(t){if(null===t)throw new L("Supplied point is null.");return Me.interpolateZ(t,this.p0,this.p1,this.p2)},Me.prototype.longestSideLength=function(){return Me.longestSideLength(this.p0,this.p1,this.p2)},Me.prototype.isAcute=function(){return Me.isAcute(this.p0,this.p1,this.p2)},Me.prototype.circumcentre=function(){return Me.circumcentre(this.p0,this.p1,this.p2)},Me.prototype.area3D=function(){return Me.area3D(this.p0,this.p1,this.p2)},Me.prototype.centroid=function(){return Me.centroid(this.p0,this.p1,this.p2)},Me.prototype.inCentre=function(){return Me.inCentre(this.p0,this.p1,this.p2)},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},Me.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},Me.det=function(t,e,i,s){return t*s-e*i},Me.interpolateZ=function(t,e,i,s){var l=e.x,d=e.y,_=i.x-l,E=s.x-l,B=i.y-d,nt=s.y-d,Et=_*nt-E*B,St=t.x-l,Xt=t.y-d;return e.z+(nt*St-E*Xt)/Et*(i.z-e.z)+(-B*St+_*Xt)/Et*(s.z-e.z)},Me.longestSideLength=function(t,e,i){var s=t.distance(e),l=e.distance(i),d=i.distance(t),_=s;return l>_&&(_=l),d>_&&(_=d),_},Me.isAcute=function(t,e,i){return!!Ie.isAcute(t,e,i)&&!!Ie.isAcute(e,i,t)&&!!Ie.isAcute(i,t,e)},Me.circumcentre=function(t,e,i){var s=i.x,l=i.y,d=t.x-s,_=t.y-l,E=e.x-s,B=e.y-l,nt=2*Me.det(d,_,E,B),Et=Me.det(_,d*d+_*_,B,E*E+B*B),St=Me.det(d,d*d+_*_,E,E*E+B*B);return new w(s-Et/nt,l+St/nt)},Me.perpendicularBisector=function(t,e){var i=e.x-t.x,s=e.y-t.y,l=new Vt(t.x+i/2,t.y+s/2,1),d=new Vt(t.x-s+i/2,t.y+i+s/2,1);return new Vt(l,d)},Me.angleBisector=function(t,e,i){var s=e.distance(t),l=s/(s+e.distance(i));return new w(t.x+l*(i.x-t.x),t.y+l*(i.y-t.y))},Me.area3D=function(t,e,i){var s=e.x-t.x,l=e.y-t.y,d=e.z-t.z,_=i.x-t.x,E=i.y-t.y,B=i.z-t.z,nt=l*B-d*E,Et=d*_-s*B,St=s*E-l*_;return Math.sqrt(nt*nt+Et*Et+St*St)/2},Me.centroid=function(t,e,i){return new w((t.x+e.x+i.x)/3,(t.y+e.y+i.y)/3)},Me.inCentre=function(t,e,i){var s=e.distance(i),l=t.distance(i),d=t.distance(e),_=s+l+d;return new w((s*t.x+l*e.x+d*i.x)/_,(s*t.y+l*e.y+d*i.y)/_)};var Pr=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Gt;var e=arguments[1],i=arguments[2];this._inputGeom=arguments[0],this._distance=e,this._curveBuilder=i};Pr.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,A.EXTERIOR,A.INTERIOR)},Pr.prototype.addPolygon=function(t){var e=this._distance,i=kt.LEFT;this._distance<0&&(e=-this._distance,i=kt.RIGHT);var s=t.getExteriorRing(),l=_e.removeRepeatedPoints(s.getCoordinates());if(this._distance<0&&this.isErodedCompletely(s,this._distance)||this._distance<=0&&l.length<3)return null;this.addPolygonRing(l,e,i,A.EXTERIOR,A.INTERIOR);for(var d=0;d<t.getNumInteriorRing();d++){var _=t.getInteriorRingN(d),E=_e.removeRepeatedPoints(_.getCoordinates());this._distance>0&&this.isErodedCompletely(_,-this._distance)||this.addPolygonRing(E,e,kt.opposite(i),A.INTERIOR,A.EXTERIOR)}},Pr.prototype.isTriangleErodedCompletely=function(t,e){var i=new Me(t[0],t[1],t[2]),s=i.inCentre();return bt.distancePointLine(s,i.p0,i.p1)<Math.abs(e)},Pr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=_e.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,A.EXTERIOR,A.INTERIOR)},Pr.prototype.addCurve=function(t,e,i){if(null===t||t.length<2)return null;var s=new bn(t,new tn(0,A.BOUNDARY,e,i));this._curveList.add(s)},Pr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Pr.prototype.addPolygonRing=function(t,e,i,s,l){if(0===e&&t.length<Si.MINIMUM_VALID_SIZE)return null;var d=s,_=l;t.length>=Si.MINIMUM_VALID_SIZE&&bt.isCCW(t)&&(d=l,_=s,i=kt.opposite(i));var E=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(E,d,_)},Pr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof An?this.addPolygon(t):t instanceof dn?this.addLineString(t):t instanceof Ir?this.addPoint(t):(t instanceof Wi||t instanceof Yi||t instanceof Ni||t instanceof zn)&&this.addCollection(t)},Pr.prototype.isErodedCompletely=function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var s=t.getEnvelopeInternal(),l=Math.min(s.getHeight(),s.getWidth());return e<0&&2*Math.abs(e)>l},Pr.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var Vi=function(){};Vi.prototype.locate=function(t){},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi};var Ai=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Ai.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ai.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new rt;var t=this._parent.getGeometryN(this._index++);return t instanceof zn?(this._subcollectionIterator=new Ai(t),this._subcollectionIterator.next()):t},Ai.prototype.remove=function(){throw new Error(this.getClass().getName())},Ai.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ai.prototype.interfaces_=function(){return[Cr]},Ai.prototype.getClass=function(){return Ai},Ai.isAtomic=function(t){return!(t instanceof zn)};var br=function(){this._geom=null,this._geom=arguments[0]};br.prototype.locate=function(t){return br.locate(t,this._geom)},br.prototype.interfaces_=function(){return[Vi]},br.prototype.getClass=function(){return br},br.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&bt.isPointInRing(t,e.getCoordinates())},br.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var i=e.getExteriorRing();if(!br.isPointInRing(t,i))return!1;for(var s=0;s<e.getNumInteriorRing();s++){var l=e.getInteriorRingN(s);if(br.isPointInRing(t,l))return!1}return!0},br.containsPoint=function(t,e){if(e instanceof An)return br.containsPointInPolygon(t,e);if(e instanceof zn)for(var i=new Ai(e);i.hasNext();){var s=i.next();if(s!==e&&br.containsPoint(t,s))return!0}return!1},br.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:br.containsPoint(t,e)?A.INTERIOR:A.EXTERIOR};var Qn=function(){this._edgeMap=new Ct,this._edgeList=null,this._ptInAreaLocation=[A.NONE,A.NONE]};Qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)},Qn.prototype.propagateSideLabels=function(t){for(var e=A.NONE,i=this.iterator();i.hasNext();){var s=i.next().getLabel();s.isArea(t)&&s.getLocation(t,kt.LEFT)!==A.NONE&&(e=s.getLocation(t,kt.LEFT))}if(e===A.NONE)return null;for(var l=e,d=this.iterator();d.hasNext();){var _=d.next(),E=_.getLabel();if(E.getLocation(t,kt.ON)===A.NONE&&E.setLocation(t,kt.ON,l),E.isArea(t)){var B=E.getLocation(t,kt.LEFT),nt=E.getLocation(t,kt.RIGHT);if(nt!==A.NONE){if(nt!==l)throw new bi("side location conflict",_.getCoordinate());B===A.NONE&&P.shouldNeverReachHere("found single null side (at "+_.getCoordinate()+")"),l=B}else P.isTrue(E.getLocation(t,kt.LEFT)===A.NONE,"found single null side"),E.setLocation(t,kt.RIGHT,l),E.setLocation(t,kt.LEFT,l)}}},Qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Qn.prototype.print=function(t){ee.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var i=e.size()-1,s=e.get(i).getLabel().getLocation(t,kt.LEFT);P.isTrue(s!==A.NONE,"Found unlabelled area edge");for(var l=s,d=this.iterator();d.hasNext();){var _=d.next().getLabel();P.isTrue(_.isArea(t),"Found non-area edge");var E=_.getLocation(t,kt.LEFT),B=_.getLocation(t,kt.RIGHT);if(E===B||B!==l)return!1;l=E}return!0},Qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Qn.prototype.iterator=function(){return this.getEdges().iterator()},Qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Gt(this._edgeMap.values())),this._edgeList},Qn.prototype.getLocation=function(t,e,i){return this._ptInAreaLocation[t]===A.NONE&&(this._ptInAreaLocation[t]=br.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]},Qn.prototype.toString=function(){var t=new J;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()},Qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var s=i.next().getLabel(),l=0;l<2;l++)s.isLine(l)&&s.getLocation(l)===A.BOUNDARY&&(e[l]=!0);for(var d=this.iterator();d.hasNext();)for(var _=d.next(),E=_.getLabel(),B=0;B<2;B++)if(E.isAnyNull(B)){var nt=A.NONE;if(e[B])nt=A.EXTERIOR;else{var Et=_.getCoordinate();nt=this.getLocation(B,Et,t)}E.setAllLocationsIfNull(B,nt)}},Qn.prototype.getDegree=function(){return this._edgeMap.size()},Qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var hl=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var i=null,s=null,l=this._SCANNING_FOR_INCOMING,d=0;d<this._resultAreaEdgeList.size();d++){var _=this._resultAreaEdgeList.get(d),E=_.getSym();if(_.getLabel().isArea())switch(null===i&&_.isInResult()&&(i=_),l){case this._SCANNING_FOR_INCOMING:if(!E.isInResult())continue;s=E,l=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!_.isInResult())continue;s.setNext(_),l=this._SCANNING_FOR_INCOMING}}if(l===this._LINKING_TO_OUTGOING){if(null===i)throw new bi("no outgoing dirEdge found",this.getCoordinate());P.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),s.setNext(i)}},e.prototype.insert=function(i){this.insertEdgeEnd(i,i)},e.prototype.getRightmostEdge=function(){var i=this.getEdges(),s=i.size();if(s<1)return null;var l=i.get(0);if(1===s)return l;var d=i.get(s-1),_=l.getQuadrant(),E=d.getQuadrant();return an.isNorthern(_)&&an.isNorthern(E)?l:an.isNorthern(_)||an.isNorthern(E)?0!==l.getDy()?l:0!==d.getDy()?d:(P.shouldNeverReachHere("found two horizontal edges incident on node"),null):d},e.prototype.print=function(i){ee.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var s=this.iterator();s.hasNext();){var l=s.next();i.print("out "),l.print(i),i.println(),i.print("in "),l.getSym().print(i),i.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Gt;for(var i=this.iterator();i.hasNext();){var s=i.next();(s.isInResult()||s.getSym().isInResult())&&this._resultAreaEdgeList.add(s)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(i){for(var s=this.iterator();s.hasNext();){var l=s.next().getLabel();l.setAllLocationsIfNull(0,i.getLocation(0)),l.setAllLocationsIfNull(1,i.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var i=null,s=null,l=this._edgeList.size()-1;l>=0;l--){var d=this._edgeList.get(l),_=d.getSym();null===s&&(s=_),null!==i&&_.setNext(i),i=d}s.setNext(i)},e.prototype.computeDepths=function(){if(1===arguments.length){var i=arguments[0],s=this.findIndex(i),l=i.getDepth(kt.LEFT),d=i.getDepth(kt.RIGHT),_=this.computeDepths(s+1,this._edgeList.size(),l);if(this.computeDepths(0,s,_)!==d)throw new bi("depth mismatch at "+i.getCoordinate())}else if(3===arguments.length){for(var B=arguments[1],nt=arguments[2],Et=arguments[0];Et<B;Et++){var St=this._edgeList.get(Et);St.setEdgeDepths(kt.RIGHT,nt),nt=St.getDepth(kt.LEFT)}return nt}},e.prototype.mergeSymLabels=function(){for(var i=this.iterator();i.hasNext();){var s=i.next();s.getLabel().merge(s.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(i){for(var s=null,l=null,d=this._SCANNING_FOR_INCOMING,_=this._resultAreaEdgeList.size()-1;_>=0;_--){var E=this._resultAreaEdgeList.get(_),B=E.getSym();switch(null===s&&E.getEdgeRing()===i&&(s=E),d){case this._SCANNING_FOR_INCOMING:if(B.getEdgeRing()!==i)continue;l=B,d=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(E.getEdgeRing()!==i)continue;l.setNextMin(E),d=this._SCANNING_FOR_INCOMING}}d===this._LINKING_TO_OUTGOING&&(P.isTrue(null!==s,"found null for first outgoing dirEdge"),P.isTrue(s.getEdgeRing()===i,"unable to link last incoming dirEdge"),l.setNextMin(s))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var i=0,s=this.iterator();s.hasNext();)s.next().isInResult()&&i++;return i}if(1===arguments.length){for(var l=arguments[0],d=0,_=this.iterator();_.hasNext();)_.next().getEdgeRing()===l&&d++;return d}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var i=A.NONE,s=this.iterator();s.hasNext();){var l=s.next(),d=l.getSym();if(!l.isLineEdge()){if(l.isInResult()){i=A.INTERIOR;break}if(d.isInResult()){i=A.EXTERIOR;break}}}if(i===A.NONE)return null;for(var _=i,E=this.iterator();E.hasNext();){var B=E.next(),nt=B.getSym();B.isLineEdge()?B.getEdge().setCovered(_===A.INTERIOR):(B.isInResult()&&(_=A.EXTERIOR),nt.isInResult()&&(_=A.INTERIOR))}},e.prototype.computeLabelling=function(i){t.prototype.computeLabelling.call(this,i),this._label=new tn(A.NONE);for(var s=this.iterator();s.hasNext();)for(var l=s.next().getEdge().getLabel(),d=0;d<2;d++){var _=l.getLocation(d);_!==A.INTERIOR&&_!==A.BOUNDARY||this._label.setLocation(d,A.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qn),iu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(i){return new Ms(i,new hl)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uo),ji=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ji.prototype.compareTo=function(t){return ji.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},ji.prototype.interfaces_=function(){return[C]},ji.prototype.getClass=function(){return ji},ji.orientation=function(t){return 1===_e.increasingDirection(t)},ji.compareOriented=function(t,e,i,s){for(var l=e?1:-1,d=s?1:-1,_=e?t.length:-1,E=s?i.length:-1,B=e?0:t.length-1,nt=s?0:i.length-1;;){var Et=t[B].compareTo(i[nt]);if(0!==Et)return Et;var St=(B+=l)===_,Xt=(nt+=d)===E;if(St&&!Xt)return-1;if(!St&&Xt)return 1;if(St&&Xt)return 0}};var Kr=function(){this._edges=new Gt,this._ocaMap=new Ct};Kr.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var s=i.getCoordinates(),l=0;l<s.length;l++)l>0&&t.print(","),t.print(s[l].x+" "+s[l].y);t.println(")")}t.print(")  ")},Kr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Kr.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Kr.prototype.iterator=function(){return this._edges.iterator()},Kr.prototype.getEdges=function(){return this._edges},Kr.prototype.get=function(t){return this._edges.get(t)},Kr.prototype.findEqualEdge=function(t){var e=new ji(t.getCoordinates());return this._ocaMap.get(e)},Kr.prototype.add=function(t){this._edges.add(t);var e=new ji(t.getCoordinates());this._ocaMap.put(e,t)},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr};var Ji=function(){};Ji.prototype.processIntersections=function(t,e,i,s){},Ji.prototype.isDone=function(){},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji};var Lr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Lr.prototype.isTrivialIntersection=function(t,e,i,s){if(t===i&&1===this._li.getIntersectionNum()){if(Lr.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var l=t.size()-1;if(0===e&&s===l||0===s&&e===l)return!0}}return!1},Lr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Lr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Lr.prototype.getLineIntersector=function(){return this._li},Lr.prototype.hasProperIntersection=function(){return this._hasProper},Lr.prototype.processIntersections=function(t,e,i,s){if(t===i&&e===s)return null;this.numTests++;var l=t.getCoordinates()[e],d=t.getCoordinates()[e+1],_=i.getCoordinates()[s],E=i.getCoordinates()[s+1];this._li.computeIntersection(l,d,_,E),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,s)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,s,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Lr.prototype.hasIntersection=function(){return this._hasIntersection},Lr.prototype.isDone=function(){return!1},Lr.prototype.hasInteriorIntersection=function(){return this._hasInterior},Lr.prototype.interfaces_=function(){return[Ji]},Lr.prototype.getClass=function(){return Lr},Lr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Qr=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[1],i=arguments[2];this.coord=new w(arguments[0]),this.segmentIndex=e,this.dist=i};Qr.prototype.getSegmentIndex=function(){return this.segmentIndex},Qr.prototype.getCoordinate=function(){return this.coord},Qr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Qr.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Qr.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Qr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Qr.prototype.getDistance=function(){return this.dist},Qr.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Qr.prototype.interfaces_=function(){return[C]},Qr.prototype.getClass=function(){return Qr};var ti=function(){this._nodeMap=new Ct,this.edge=null,this.edge=arguments[0]};ti.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ti.prototype.iterator=function(){return this._nodeMap.values().iterator()},ti.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var s=e.next(),l=this.createSplitEdge(i,s);t.add(l),i=s}},ti.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},ti.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,l=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);l||i--;var d=new Array(i).fill(null),_=0;d[_++]=new w(t.coord);for(var E=t.segmentIndex+1;E<=e.segmentIndex;E++)d[_++]=this.edge.pts[E];return l&&(d[_]=e.coord),new Wo(d,new tn(this.edge._label))},ti.prototype.add=function(t,e,i){var s=new Qr(t,e,i),l=this._nodeMap.get(s);return null!==l?l:(this._nodeMap.put(s,s),s)},ti.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti};var ho=function(){};ho.prototype.getChainStartIndices=function(t){var e=0,i=new Gt;i.add(new ot(e));do{var s=this.findChainEnd(t,e);i.add(new ot(s)),e=s}while(e<t.length-1);return ho.toIntArray(i)},ho.prototype.findChainEnd=function(t,e){for(var i=an.quadrant(t[e],t[e+1]),s=e+1;s<t.length&&an.quadrant(t[s-1],t[s])===i;)s++;return s-1},ho.prototype.interfaces_=function(){return[]},ho.prototype.getClass=function(){return ho},ho.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var hi=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Bt,this.env2=new Bt;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ho;this.startIndex=e.getChainStartIndices(this.pts)};hi.prototype.getCoordinates=function(){return this.pts},hi.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i},hi.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i},hi.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],arguments[3])}else if(6===arguments.length){var l=arguments[0],d=arguments[1],_=arguments[2],E=arguments[3],B=arguments[4],nt=arguments[5],Et=this.pts[l],St=this.pts[d],Xt=_.pts[E],Ut=_.pts[B];if(d-l==1&&B-E==1)return nt.addIntersections(this.e,l,_.e,E),null;if(this.env1.init(Et,St),this.env2.init(Xt,Ut),!this.env1.intersects(this.env2))return null;var Ht=Math.trunc((l+d)/2),oe=Math.trunc((E+B)/2);l<Ht&&(E<oe&&this.computeIntersectsForChain(l,Ht,_,E,oe,nt),oe<B&&this.computeIntersectsForChain(l,Ht,_,oe,B,nt)),Ht<d&&(E<oe&&this.computeIntersectsForChain(Ht,d,_,E,oe,nt),oe<B&&this.computeIntersectsForChain(Ht,d,_,oe,B,nt))}},hi.prototype.getStartIndexes=function(){return this.startIndex},hi.prototype.computeIntersects=function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var s=0;s<t.startIndex.length-1;s++)this.computeIntersectsForChain(i,t,s,e)},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi};var tr=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var i=0;i<3;i++)this._depth[e][i]=t.NULL_VALUE},sa={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,i){this._depth[t][e]=i},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===tr.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===tr.NULL_VALUE:void 0},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var s=0;this._depth[t][i]>e&&(s=1),this._depth[t][i]=s}}},tr.prototype.getDelta=function(t){return this._depth[t][kt.RIGHT]-this._depth[t][kt.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?A.EXTERIOR:A.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var s=t.getLocation(e,i);s!==A.EXTERIOR&&s!==A.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=tr.depthAtLocation(s):this._depth[e][i]+=tr.depthAtLocation(s))}else 3===arguments.length&&arguments[2]===A.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===A.EXTERIOR?0:t===A.INTERIOR?1:tr.NULL_VALUE},sa.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,sa);var Wo=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new ti(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var l=arguments[1];this.pts=arguments[0],this._label=l}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var i=new Array(2).fill(null);return i[0]=this.pts[0],i[1]=this.pts[1],new e(i,tn.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(i){this._isIsolated=i},e.prototype.setName=function(i){this._name=i},e.prototype.equals=function(i){if(!(i instanceof e))return!1;var s=i;if(this.pts.length!==s.pts.length)return!1;for(var l=!0,d=!0,_=this.pts.length,E=0;E<this.pts.length;E++)if(this.pts[E].equals2D(s.pts[E])||(l=!1),this.pts[E].equals2D(s.pts[--_])||(d=!1),!l&&!d)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(i){i.print("edge "+this._name+": "),i.print("LINESTRING (");for(var s=0;s<this.pts.length;s++)s>0&&i.print(","),i.print(this.pts[s].x+" "+this.pts[s].y);i.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(i){e.updateIM(this._label,i)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(i){i.print("edge "+this._name+": ");for(var s=this.pts.length-1;s>=0;s--)i.print(this.pts[s]+" ");i.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new hi(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Bt;for(var i=0;i<this.pts.length;i++)this._env.expandToInclude(this.pts[i])}return this._env},e.prototype.addIntersection=function(i,s,l,d){var _=new w(i.getIntersection(d)),E=s,B=i.getEdgeDistance(l,d),nt=E+1;nt<this.pts.length&&_.equals2D(this.pts[nt])&&(E=nt,B=0),this.eiList.add(_,E,B)},e.prototype.toString=function(){var i=new J;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var s=0;s<this.pts.length;s++)s>0&&i.append(","),i.append(this.pts[s].x+" "+this.pts[s].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},e.prototype.isPointwiseEqual=function(i){if(this.pts.length!==i.pts.length)return!1;for(var s=0;s<this.pts.length;s++)if(!this.pts[s].equals2D(i.pts[s]))return!1;return!0},e.prototype.setDepthDelta=function(i){this._depthDelta=i},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(i,s,l){for(var d=0;d<i.getIntersectionNum();d++)this.addIntersection(i,s,l,d)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var i=arguments[0],s=arguments[1];s.setAtLeastIfValid(i.getLocation(0,kt.ON),i.getLocation(1,kt.ON),1),i.isArea()&&(s.setAtLeastIfValid(i.getLocation(0,kt.LEFT),i.getLocation(1,kt.LEFT),2),s.setAtLeastIfValid(i.getLocation(0,kt.RIGHT),i.getLocation(1,kt.RIGHT),2))},e}(Nr),er=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Kr,this._bufParams=t||null};er.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},er.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),s=t.getLabel();e.isPointwiseEqual(t)||(s=new tn(t.getLabel())).flip(),i.merge(s);var l=er.depthDelta(s),d=e.getDepthDelta()+l;e.setDepthDelta(d)}else this._edgeList.add(t),t.setDepthDelta(er.depthDelta(t.getLabel()))},er.prototype.buildSubgraphs=function(t,e){for(var i=new Gt,s=t.iterator();s.hasNext();){var l=s.next(),d=l.getRightmostCoordinate(),_=new fo(i).getDepth(d);l.computeDepth(_),l.findResultEdges(),i.add(l),e.add(l.getDirectedEdges(),l.getNodes())}},er.prototype.createSubgraphs=function(t){for(var e=new Gt,i=t.getNodes().iterator();i.hasNext();){var s=i.next();if(!s.isVisited()){var l=new cr;l.create(s),e.add(l)}}return Jr.sort(e,Jr.reverseOrder()),e},er.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},er.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new oa,i=new wt;return i.setPrecisionModel(t),e.setSegmentIntersector(new Lr(i)),e},er.prototype.buffer=function(t,e){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var s=new vr(i,this._bufParams),l=new Pr(t,e,s).getCurves();if(l.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(l,i),this._graph=new wn(new iu),this._graph.addEdges(this._edgeList.getEdges());var d=this.createSubgraphs(this._graph),_=new dr(this._geomFact);this.buildSubgraphs(d,_);var E=_.getPolygons();return E.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(E)},er.prototype.computeNodedEdges=function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var s=i.getNodedSubstrings().iterator();s.hasNext();){var l=s.next(),d=l.getCoordinates();if(2!==d.length||!d[0].equals2D(d[1])){var _=l.getData(),E=new Wo(l.getCoordinates(),new tn(_));this.insertUniqueEdge(E)}}},er.prototype.setNoder=function(t){this._workingNoder=t},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.depthDelta=function(t){var e=t.getLocation(0,kt.LEFT),i=t.getLocation(0,kt.RIGHT);return e===A.INTERIOR&&i===A.EXTERIOR?1:e===A.EXTERIOR&&i===A.INTERIOR?-1:0},er.convertSegStrings=function(t){for(var e=new we,i=new Gt;t.hasNext();){var s=t.next(),l=e.createLineString(s.getCoordinates());i.add(l)}return e.buildGeometry(i)};var gi=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[1];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var s=arguments[1],l=arguments[2],d=arguments[3];this._noder=arguments[0],this._scaleFactor=s,this._offsetX=l,this._offsetY=d,this._isScaled=!this.isIntegerPrecision()}};gi.prototype.rescale=function(){if(Pt(arguments[0],gn))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],s=0;s<i.length;s++)i[s].x=i[s].x/this._scaleFactor+this._offsetX,i[s].y=i[s].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&ee.out.println(i)}},gi.prototype.scale=function(){if(Pt(arguments[0],gn)){for(var t=arguments[0],e=new Gt,i=t.iterator();i.hasNext();){var s=i.next();e.add(new bn(this.scale(s.getCoordinates()),s.getData()))}return e}if(arguments[0]instanceof Array){for(var l=arguments[0],d=new Array(l.length).fill(null),_=0;_<l.length;_++)d[_]=new w(Math.round((l[_].x-this._offsetX)*this._scaleFactor),Math.round((l[_].y-this._offsetY)*this._scaleFactor),l[_].z);return _e.removeRepeatedPoints(d)}},gi.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},gi.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},gi.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},gi.prototype.interfaces_=function(){return[lo]},gi.prototype.getClass=function(){return gi};var di=function(){this._li=new wt,this._segStrings=null,this._segStrings=arguments[0]},aa={fact:{configurable:!0}};di.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],s=arguments[1].iterator();s.hasNext();)for(var l=s.next().getCoordinates(),d=1;d<l.length-1;d++)if(l[d].equals(i))throw new R("found endpt/interior pt intersection at index "+d+" :pt "+i)},di.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var s=i.next();this.checkInteriorIntersections(e,s)}else if(2===arguments.length)for(var l=arguments[0],d=arguments[1],_=l.getCoordinates(),E=d.getCoordinates(),B=0;B<_.length-1;B++)for(var nt=0;nt<E.length-1;nt++)this.checkInteriorIntersections(l,B,d,nt);else if(4===arguments.length){var Et=arguments[0],St=arguments[1],Xt=arguments[2],Ut=arguments[3];if(Et===Xt&&St===Ut)return null;var Ht=Et.getCoordinates()[St],oe=Et.getCoordinates()[St+1],ge=Xt.getCoordinates()[Ut],on=Xt.getCoordinates()[Ut+1];if(this._li.computeIntersection(Ht,oe,ge,on),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Ht,oe)||this.hasInteriorIntersection(this._li,ge,on)))throw new R("found non-noded intersection at "+Ht+"-"+oe+" and "+ge+"-"+on)}},di.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},di.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),s=0;s<i.length-2;s++)this.checkCollapse(i[s],i[s+1],i[s+2])},di.prototype.hasInteriorIntersection=function(t,e,i){for(var s=0;s<t.getIntersectionNum();s++){var l=t.getIntersection(s);if(!l.equals(e)&&!l.equals(i))return!0}return!1},di.prototype.checkCollapse=function(t,e,i){if(t.equals(i))throw new R("found non-noded collapse at "+di.fact.createLineString([t,e,i]))},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},aa.fact.get=function(){return new we},Object.defineProperties(di,aa);var mr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new L("Scale factor must be non-zero");1!==e&&(this._pt=new w(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new w,this._p1Scaled=new w),this.initCorners(this._pt)},ou={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};mr.prototype.intersectsScaled=function(t,e){var i=Math.min(t.x,e.x),s=Math.max(t.x,e.x),l=Math.min(t.y,e.y),d=Math.max(t.y,e.y),_=this._maxx<i||this._minx>s||this._maxy<l||this._miny>d;if(_)return!1;var E=this.intersectsToleranceSquare(t,e);return P.isTrue(!(_&&E),"Found bad envelope test"),E},mr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new w(this._maxx,this._maxy),this._corner[1]=new w(this._minx,this._maxy),this._corner[2]=new w(this._minx,this._miny),this._corner[3]=new w(this._maxx,this._miny)},mr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},mr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},mr.prototype.getCoordinate=function(){return this._originalPt},mr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},mr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=mr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Bt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},mr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},mr.prototype.intersectsToleranceSquare=function(t,e){var i=!1,s=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(s=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&s||t.equals(this._pt)||e.equals(this._pt)))))},mr.prototype.addSnappedNode=function(t,e){var i=t.getCoordinate(e),s=t.getCoordinate(e+1);return!!this.intersects(i,s)&&(t.addIntersection(this.getCoordinate(),e),!0)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},ou.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(mr,ou);var fs=function(){this.tempEnv1=new Bt,this.selectedSegment=new ne};fs.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs};var Zo=function(){this._index=null,this._index=arguments[0]},su={HotPixelSnapAction:{configurable:!0}};Zo.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var e=arguments[0],i=arguments[1],s=arguments[2],l=e.getSafeEnvelope(),d=new ua(e,i,s);return this._index.query(l,{interfaces_:function(){return[qi]},visitItem:function(_){_.select(l,d)}}),d.isNodeAdded()}},Zo.prototype.interfaces_=function(){return[]},Zo.prototype.getClass=function(){return Zo},su.HotPixelSnapAction.get=function(){return ua},Object.defineProperties(Zo,su);var ua=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var s=arguments[1],l=arguments[2];this._hotPixel=arguments[0],this._parentEdge=s,this._hotPixelVertexIndex=l}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var s=arguments[1],l=arguments[0].getContext();if(null!==this._parentEdge&&l===this._parentEdge&&s===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(l,s)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fs),bo=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new Gt};bo.prototype.processIntersections=function(t,e,i,s){if(t===i&&e===s)return null;var l=t.getCoordinates()[e],d=t.getCoordinates()[e+1],_=i.getCoordinates()[s],E=i.getCoordinates()[s+1];if(this._li.computeIntersection(l,d,_,E),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var B=0;B<this._li.getIntersectionNum();B++)this._interiorIntersections.add(this._li.getIntersection(B));t.addIntersections(this._li,e,0),i.addIntersections(this._li,s,1)}},bo.prototype.isDone=function(){return!1},bo.prototype.getInteriorIntersections=function(){return this._interiorIntersections},bo.prototype.interfaces_=function(){return[Ji]},bo.prototype.getClass=function(){return bo};var Ti=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new wt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Ti.prototype.checkCorrectness=function(t){var e=bn.getNodedSubstrings(t),i=new di(e);try{i.checkValid()}catch(s){if(!(s instanceof te))throw s;s.printStackTrace()}},Ti.prototype.getNodedSubstrings=function(){return bn.getNodedSubstrings(this._nodedSegStrings)},Ti.prototype.snapRound=function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},Ti.prototype.findInteriorIntersections=function(t,e){var i=new bo(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},Ti.prototype.computeVertexSnaps=function(){if(Pt(arguments[0],gn))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof bn)for(var i=arguments[0],s=i.getCoordinates(),l=0;l<s.length;l++){var d=new mr(s[l],this._scaleFactor,this._li);this._pointSnapper.snap(d,i,l)&&i.addIntersection(s[l],l)}},Ti.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new oa,this._pointSnapper=new Zo(this._noder.getIndex()),this.snapRound(t,this._li)},Ti.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),s=new mr(i,this._scaleFactor,this._li);this._pointSnapper.snap(s)}},Ti.prototype.interfaces_=function(){return[lo]},Ti.prototype.getClass=function(){return Ti};var Zn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ne,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var i=arguments[1];this._argGeom=arguments[0],this._bufParams=i}},Lo={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Zn.prototype.bufferFixedPrecision=function(t){var e=new gi(new Ti(new Qe(1)),t.getScale()),i=new er(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)},Zn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Zn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(d){if(!(d instanceof bi))throw d;t._saveException=d}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var s=Zn.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),l=new Qe(s);this.bufferFixedPrecision(l)}},Zn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Qe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Zn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Zn.prototype.bufferOriginalPrecision=function(){try{var t=new er(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof R))throw e;this._saveException=e}},Zn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Zn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new Zn(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof zt&&"number"==typeof arguments[1]){var s=arguments[1],l=arguments[2],d=new Zn(arguments[0]);return d.setQuadrantSegments(l),d.getResultGeometry(s)}if(arguments[2]instanceof Ne&&arguments[0]instanceof zt&&"number"==typeof arguments[1]){var E=arguments[1];return new Zn(arguments[0],arguments[2]).getResultGeometry(E)}}else if(4===arguments.length){var Et=arguments[1],St=arguments[2],Xt=arguments[3],Ut=new Zn(arguments[0]);return Ut.setQuadrantSegments(St),Ut.setEndCapStyle(Xt),Ut.getResultGeometry(Et)}},Zn.precisionScaleFactor=function(t,e,i){var s=t.getEnvelopeInternal(),l=X.max(Math.abs(s.getMaxX()),Math.abs(s.getMaxY()),Math.abs(s.getMinX()),Math.abs(s.getMinY()))+2*(e>0?e:0),d=i-Math.trunc(Math.log(l)/Math.log(10)+1);return Math.pow(10,d)},Lo.CAP_ROUND.get=function(){return Ne.CAP_ROUND},Lo.CAP_BUTT.get=function(){return Ne.CAP_FLAT},Lo.CAP_FLAT.get=function(){return Ne.CAP_FLAT},Lo.CAP_SQUARE.get=function(){return Ne.CAP_SQUARE},Lo.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Zn,Lo);var sr=function(){this._pt=[new w,new w],this._distance=M.NaN,this._isNull=!0};sr.prototype.getCoordinates=function(){return this._pt},sr.prototype.getCoordinate=function(t){return this._pt[t]},sr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var s=e.distance(i);s<this._distance&&this.initialize(e,i,s)}},sr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var s=arguments[1],l=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(s),this._distance=l,this._isNull=!1}},sr.prototype.getDistance=function(){return this._distance},sr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var s=e.distance(i);s>this._distance&&this.initialize(e,i,s)}},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var yi=function(){};yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi.computeDistance=function(){if(arguments[2]instanceof sr&&arguments[0]instanceof dn&&arguments[1]instanceof w)for(var e=arguments[1],i=arguments[2],s=arguments[0].getCoordinates(),l=new ne,d=0;d<s.length-1;d++){l.setCoordinates(s[d],s[d+1]);var _=l.closestPoint(e);i.setMinimum(_,e)}else if(arguments[2]instanceof sr&&arguments[0]instanceof An&&arguments[1]instanceof w){var E=arguments[0],B=arguments[1],nt=arguments[2];yi.computeDistance(E.getExteriorRing(),B,nt);for(var Et=0;Et<E.getNumInteriorRing();Et++)yi.computeDistance(E.getInteriorRingN(Et),B,nt)}else if(arguments[2]instanceof sr&&arguments[0]instanceof zt&&arguments[1]instanceof w){var St=arguments[0],Xt=arguments[1],Ut=arguments[2];if(St instanceof dn)yi.computeDistance(St,Xt,Ut);else if(St instanceof An)yi.computeDistance(St,Xt,Ut);else if(St instanceof zn)for(var Ht=St,oe=0;oe<Ht.getNumGeometries();oe++){var ge=Ht.getGeometryN(oe);yi.computeDistance(ge,Xt,Ut)}else Ut.setMinimum(St.getCoordinate(),Xt)}else if(arguments[2]instanceof sr&&arguments[0]instanceof ne&&arguments[1]instanceof w){var en=arguments[1],mn=arguments[2],xe=arguments[0].closestPoint(en);mn.setMinimum(xe,en)}};var $i=function(t){this._maxPtDist=new sr,this._inputGeom=t||null},bs={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};$i.prototype.computeMaxMidpointDistance=function(t){var e=new Di(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},$i.prototype.computeMaxVertexDistance=function(t){var e=new po(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},$i.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},$i.prototype.getDistancePoints=function(){return this._maxPtDist},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},bs.MaxPointDistanceFilter.get=function(){return po},bs.MaxMidpointDistanceFilter.get=function(){return Di},Object.defineProperties($i,bs);var po=function(t){this._maxPtDist=new sr,this._minPtDist=new sr,this._geom=t||null};po.prototype.filter=function(t){this._minPtDist.initialize(),yi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},po.prototype.getMaxPointDistance=function(){return this._maxPtDist},po.prototype.interfaces_=function(){return[$t]},po.prototype.getClass=function(){return po};var Di=function(t){this._maxPtDist=new sr,this._minPtDist=new sr,this._geom=t||null};Di.prototype.filter=function(t,e){if(0===e)return null;var i=t.getCoordinate(e-1),s=t.getCoordinate(e),l=new w((i.x+s.x)/2,(i.y+s.y)/2);this._minPtDist.initialize(),yi.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Di.prototype.isDone=function(){return!1},Di.prototype.isGeometryChanged=function(){return!1},Di.prototype.getMaxPointDistance=function(){return this._maxPtDist},Di.prototype.interfaces_=function(){return[Vr]},Di.prototype.getClass=function(){return Di};var vi=function(t){this._comps=t||null};vi.prototype.filter=function(t){t instanceof An&&this._comps.add(t)},vi.prototype.interfaces_=function(){return[Zr]},vi.prototype.getClass=function(){return vi},vi.getPolygons=function(){if(1===arguments.length)return vi.getPolygons(arguments[0],new Gt);if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof An?i.add(e):e instanceof zn&&e.apply(new vi(i)),i}};var Vn=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var i=arguments[1];this._lines=arguments[0],this._isForcedToLineString=i}};Vn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Si){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof dn&&this._lines.add(t)},Vn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Vn.prototype.interfaces_=function(){return[me]},Vn.prototype.getClass=function(){return Vn},Vn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Vn.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().buildGeometry(Vn.getLines(e,i))}},Vn.getLines=function(){if(1===arguments.length)return Vn.getLines(arguments[0],!1);if(2===arguments.length){if(Pt(arguments[0],gn)&&Pt(arguments[1],gn)){for(var i=arguments[1],s=arguments[0].iterator();s.hasNext();){var l=s.next();Vn.getLines(l,i)}return i}if(arguments[0]instanceof zt&&"boolean"==typeof arguments[1]){var d=arguments[0],_=arguments[1],E=new Gt;return d.apply(new Vn(E,_)),E}if(arguments[0]instanceof zt&&Pt(arguments[1],gn)){var B=arguments[0],nt=arguments[1];return B instanceof dn?nt.add(B):B.apply(new Vn(nt)),nt}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Pt(arguments[0],gn)&&Pt(arguments[1],gn)){for(var St=arguments[1],Xt=arguments[2],Ut=arguments[0].iterator();Ut.hasNext();){var Ht=Ut.next();Vn.getLines(Ht,St,Xt)}return St}if("boolean"==typeof arguments[2]&&arguments[0]instanceof zt&&Pt(arguments[1],gn)){var ge=arguments[1];return arguments[0].apply(new Vn(ge,arguments[2])),ge}}};var ei=function(){if(this._boundaryRule=Ke.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new L("Rule must be non-null");this._boundaryRule=t}};ei.prototype.locateInternal=function(){if(arguments[0]instanceof w&&arguments[1]instanceof An){var t=arguments[0],e=arguments[1];if(e.isEmpty())return A.EXTERIOR;var i=e.getExteriorRing(),s=this.locateInPolygonRing(t,i);if(s===A.EXTERIOR)return A.EXTERIOR;if(s===A.BOUNDARY)return A.BOUNDARY;for(var l=0;l<e.getNumInteriorRing();l++){var d=e.getInteriorRingN(l),_=this.locateInPolygonRing(t,d);if(_===A.INTERIOR)return A.EXTERIOR;if(_===A.BOUNDARY)return A.BOUNDARY}return A.INTERIOR}if(arguments[0]instanceof w&&arguments[1]instanceof dn){var E=arguments[0],B=arguments[1];if(!B.getEnvelopeInternal().intersects(E))return A.EXTERIOR;var nt=B.getCoordinates();return B.isClosed()||!E.equals(nt[0])&&!E.equals(nt[nt.length-1])?bt.isOnLine(E,nt)?A.INTERIOR:A.EXTERIOR:A.BOUNDARY}if(arguments[0]instanceof w&&arguments[1]instanceof Ir){var Et=arguments[0];return arguments[1].getCoordinate().equals2D(Et)?A.INTERIOR:A.EXTERIOR}},ei.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?bt.locatePointInRing(t,e.getCoordinates()):A.EXTERIOR},ei.prototype.intersects=function(t,e){return this.locate(t,e)!==A.EXTERIOR},ei.prototype.updateLocationInfo=function(t){t===A.INTERIOR&&(this._isIn=!0),t===A.BOUNDARY&&this._numBoundaries++},ei.prototype.computeLocation=function(t,e){if(e instanceof Ir&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof dn)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof An)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Yi)for(var i=e,s=0;s<i.getNumGeometries();s++){var l=i.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,l))}else if(e instanceof Ni)for(var d=e,_=0;_<d.getNumGeometries();_++){var E=d.getGeometryN(_);this.updateLocationInfo(this.locateInternal(t,E))}else if(e instanceof zn)for(var B=new Ai(e);B.hasNext();){var nt=B.next();nt!==e&&this.computeLocation(t,nt)}},ei.prototype.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:e instanceof dn||e instanceof An?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?A.BOUNDARY:this._numBoundaries>0||this._isIn?A.INTERIOR:A.EXTERIOR)},ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei};var pr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var l=arguments[1],d=arguments[2];this._component=arguments[0],this._segIndex=l,this._pt=d}},au={INSIDE_AREA:{configurable:!0}};pr.prototype.isInsideArea=function(){return this._segIndex===pr.INSIDE_AREA},pr.prototype.getCoordinate=function(){return this._pt},pr.prototype.getGeometryComponent=function(){return this._component},pr.prototype.getSegmentIndex=function(){return this._segIndex},pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},au.INSIDE_AREA.get=function(){return-1},Object.defineProperties(pr,au);var Ki=function(t){this._pts=t||null};Ki.prototype.filter=function(t){t instanceof Ir&&this._pts.add(t)},Ki.prototype.interfaces_=function(){return[Zr]},Ki.prototype.getClass=function(){return Ki},Ki.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ir?Jr.singletonList(t):Ki.getPoints(t,new Gt)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof Ir?i.add(e):e instanceof zn&&e.apply(new Ki(i)),i}};var go=function(){this._locations=null,this._locations=arguments[0]};go.prototype.filter=function(t){(t instanceof Ir||t instanceof dn||t instanceof An)&&this._locations.add(new pr(t,0,t.getCoordinate()))},go.prototype.interfaces_=function(){return[Zr]},go.prototype.getClass=function(){return go},go.getLocations=function(t){var e=new Gt;return t.apply(new go(e)),e};var nr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ei,this._minDistanceLocation=null,this._minDistance=M.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var i=arguments[0],s=arguments[1],l=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=s,this._terminateDistance=l}};nr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],s=1-e,l=vi.getPolygons(this._geom[e]);if(l.size()>0){var d=go.getLocations(this._geom[s]);if(this.computeContainmentDistance(d,l,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[s]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Pt(arguments[0],qn)&&Pt(arguments[1],qn)){for(var _=arguments[0],E=arguments[1],B=arguments[2],nt=0;nt<_.size();nt++)for(var Et=_.get(nt),St=0;St<E.size();St++)if(this.computeContainmentDistance(Et,E.get(St),B),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof pr&&arguments[1]instanceof An){var Xt=arguments[0],Ut=arguments[1],Ht=arguments[2],oe=Xt.getCoordinate();if(A.EXTERIOR!==this._ptLocator.locate(oe,Ut))return this._minDistance=0,Ht[0]=Xt,Ht[1]=new pr(Ut,oe),null}},nr.prototype.computeMinDistanceLinesPoints=function(t,e,i){for(var s=0;s<t.size();s++)for(var l=t.get(s),d=0;d<e.size();d++){var _=e.get(d);if(this.computeMinDistance(l,_,i),this._minDistance<=this._terminateDistance)return null}},nr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Vn.getLines(this._geom[0]),i=Vn.getLines(this._geom[1]),s=Ki.getPoints(this._geom[0]),l=Ki.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,l,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,s,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(s,l,t),void this.updateMinDistance(t,!1))))},nr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},nr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},nr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},nr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof dn&&arguments[1]instanceof Ir){var t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var s=t.getCoordinates(),l=e.getCoordinate(),d=0;d<s.length-1;d++){var _=bt.distancePointLine(l,s[d],s[d+1]);if(_<this._minDistance){this._minDistance=_;var E=new ne(s[d],s[d+1]).closestPoint(l);i[0]=new pr(t,d,E),i[1]=new pr(e,0,l)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof dn&&arguments[1]instanceof dn){var B=arguments[0],nt=arguments[1],Et=arguments[2];if(B.getEnvelopeInternal().distance(nt.getEnvelopeInternal())>this._minDistance)return null;for(var St=B.getCoordinates(),Xt=nt.getCoordinates(),Ut=0;Ut<St.length-1;Ut++)for(var Ht=0;Ht<Xt.length-1;Ht++){var oe=bt.distanceLineLine(St[Ut],St[Ut+1],Xt[Ht],Xt[Ht+1]);if(oe<this._minDistance){this._minDistance=oe;var ge=new ne(St[Ut],St[Ut+1]),on=new ne(Xt[Ht],Xt[Ht+1]),en=ge.closestPoints(on);Et[0]=new pr(B,Ut,en[0]),Et[1]=new pr(nt,Ht,en[1])}if(this._minDistance<=this._terminateDistance)return null}}},nr.prototype.computeMinDistancePoints=function(t,e,i){for(var s=0;s<t.size();s++)for(var l=t.get(s),d=0;d<e.size();d++){var _=e.get(d),E=l.getCoordinate().distance(_.getCoordinate());if(E<this._minDistance&&(this._minDistance=E,i[0]=new pr(l,0,l.getCoordinate()),i[1]=new pr(_,0,_.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},nr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new L("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},nr.prototype.computeMinDistanceLines=function(t,e,i){for(var s=0;s<t.size();s++)for(var l=t.get(s),d=0;d<e.size();d++){var _=e.get(d);if(this.computeMinDistance(l,_,i),this._minDistance<=this._terminateDistance)return null}},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr},nr.distance=function(t,e){return new nr(t,e).distance()},nr.isWithinDistance=function(t,e,i){return new nr(t,e,i).distance()<=i},nr.nearestPoints=function(t,e){return new nr(t,e).nearestPoints()};var ar=function(){this._pt=[new w,new w],this._distance=M.NaN,this._isNull=!0};ar.prototype.getCoordinates=function(){return this._pt},ar.prototype.getCoordinate=function(t){return this._pt[t]},ar.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var s=e.distance(i);s<this._distance&&this.initialize(e,i,s)}},ar.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var s=arguments[1],l=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(s),this._distance=l,this._isNull=!1}},ar.prototype.toString=function(){return dt.toLineString(this._pt[0],this._pt[1])},ar.prototype.getDistance=function(){return this._distance},ar.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var s=e.distance(i);s>this._distance&&this.initialize(e,i,s)}},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar};var mi=function(){};mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.computeDistance=function(){if(arguments[2]instanceof ar&&arguments[0]instanceof dn&&arguments[1]instanceof w)for(var t=arguments[0],e=arguments[1],i=arguments[2],s=new ne,l=t.getCoordinates(),d=0;d<l.length-1;d++){s.setCoordinates(l[d],l[d+1]);var _=s.closestPoint(e);i.setMinimum(_,e)}else if(arguments[2]instanceof ar&&arguments[0]instanceof An&&arguments[1]instanceof w){var E=arguments[0],B=arguments[1],nt=arguments[2];mi.computeDistance(E.getExteriorRing(),B,nt);for(var Et=0;Et<E.getNumInteriorRing();Et++)mi.computeDistance(E.getInteriorRingN(Et),B,nt)}else if(arguments[2]instanceof ar&&arguments[0]instanceof zt&&arguments[1]instanceof w){var St=arguments[0],Xt=arguments[1],Ut=arguments[2];if(St instanceof dn)mi.computeDistance(St,Xt,Ut);else if(St instanceof An)mi.computeDistance(St,Xt,Ut);else if(St instanceof zn)for(var Ht=St,oe=0;oe<Ht.getNumGeometries();oe++){var ge=Ht.getGeometryN(oe);mi.computeDistance(ge,Xt,Ut)}else Ut.setMinimum(St.getCoordinate(),Xt)}else if(arguments[2]instanceof ar&&arguments[0]instanceof ne&&arguments[1]instanceof w){var en=arguments[1],mn=arguments[2],xe=arguments[0].closestPoint(en);mn.setMinimum(xe,en)}};var zr=function(){this._g0=null,this._g1=null,this._ptDist=new ar,this._densifyFrac=0;var e=arguments[1];this._g0=arguments[0],this._g1=e},Ls={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};zr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},zr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new L("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},zr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},zr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},zr.prototype.computeOrientedDistance=function(t,e,i){var s=new Oo(e);if(t.apply(s),i.setMaximum(s.getMaxPointDistance()),this._densifyFrac>0){var l=new zi(e,this._densifyFrac);t.apply(l),i.setMaximum(l.getMaxPointDistance())}},zr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.distance=function(){if(2===arguments.length)return new zr(arguments[0],arguments[1]).distance();if(3===arguments.length){var l=arguments[2],d=new zr(arguments[0],arguments[1]);return d.setDensifyFraction(l),d.distance()}},Ls.MaxPointDistanceFilter.get=function(){return Oo},Ls.MaxDensifiedByFractionDistanceFilter.get=function(){return zi},Object.defineProperties(zr,Ls);var Oo=function(){this._maxPtDist=new ar,this._minPtDist=new ar,this._euclideanDist=new mi,this._geom=null,this._geom=arguments[0]};Oo.prototype.filter=function(t){this._minPtDist.initialize(),mi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Oo.prototype.getMaxPointDistance=function(){return this._maxPtDist},Oo.prototype.interfaces_=function(){return[$t]},Oo.prototype.getClass=function(){return Oo};var zi=function(){this._maxPtDist=new ar,this._minPtDist=new ar,this._geom=null,this._numSubSegs=0;var e=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/e))};zi.prototype.filter=function(t,e){if(0===e)return null;for(var i=t.getCoordinate(e-1),s=t.getCoordinate(e),l=(s.x-i.x)/this._numSubSegs,d=(s.y-i.y)/this._numSubSegs,_=0;_<this._numSubSegs;_++){var nt=new w(i.x+_*l,i.y+_*d);this._minPtDist.initialize(),mi.computeDistance(this._geom,nt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},zi.prototype.isDone=function(){return!1},zi.prototype.isGeometryChanged=function(){return!1},zi.prototype.getMaxPointDistance=function(){return this._maxPtDist},zi.prototype.interfaces_=function(){return[Vr]},zi.prototype.getClass=function(){return zi};var _r=function(t,e,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=i||null},yo={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};_r.prototype.checkMaximumDistance=function(t,e,i){var s=new zr(e,t);if(s.setDensifyFraction(.25),this._maxDistanceFound=s.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1;var l=s.getCoordinates();this._errorLocation=l[1],this._errorIndicator=t.getFactory().createLineString(l),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+dt.toLineString(l[0],l[1])+")"}},_r.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=_r.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),_r.VERBOSE&&ee.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},_r.prototype.checkNegativeValid=function(){if(!(this._input instanceof An||this._input instanceof Ni||this._input instanceof zn))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},_r.prototype.getErrorIndicator=function(){return this._errorIndicator},_r.prototype.checkMinimumDistance=function(t,e,i){var s=new nr(t,e,i);if(this._minDistanceFound=s.distance(),this._minDistanceFound<i){this._isValid=!1;var l=s.nearestPoints();this._errorLocation=s.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(l),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+dt.toLineString(l[0],l[1])+" )"}},_r.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},_r.prototype.getErrorLocation=function(){return this._errorLocation},_r.prototype.getPolygonLines=function(t){for(var e=new Gt,i=new Vn(e),s=vi.getPolygons(t).iterator();s.hasNext();)s.next().apply(i);return t.getFactory().buildGeometry(e)},_r.prototype.getErrorMessage=function(){return this._errMsg},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},yo.VERBOSE.get=function(){return!1},yo.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(_r,yo);var jn=function(t,e,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=i||null},cs={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};jn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},jn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*jn.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Bt(this._input.getEnvelopeInternal());e.expandBy(this._distance);var i=new Bt(this._result.getEnvelopeInternal());i.expandBy(t),i.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},jn.prototype.checkDistance=function(){var t=new _r(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},jn.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},jn.prototype.checkPolygonal=function(){this._result instanceof An||this._result instanceof Ni||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},jn.prototype.getErrorIndicator=function(){return this._errorIndicator},jn.prototype.getErrorLocation=function(){return this._errorLocation},jn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},jn.prototype.report=function(t){if(!jn.VERBOSE)return null;ee.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},jn.prototype.getErrorMessage=function(){return this._errorMsg},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.isValidMsg=function(t,e,i){var s=new jn(t,e,i);return s.isValid()?null:s.getErrorMessage()},jn.isValid=function(t,e,i){return!!new jn(t,e,i).isValid()},cs.VERBOSE.get=function(){return!1},cs.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jn,cs);var Xr=function(){this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};Xr.prototype.getCoordinates=function(){return this._pts},Xr.prototype.size=function(){return this._pts.length},Xr.prototype.getCoordinate=function(t){return this._pts[t]},Xr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:No.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Xr.prototype.setData=function(t){this._data=t},Xr.prototype.getData=function(){return this._data},Xr.prototype.toString=function(){return dt.toLineString(new Mn(this._pts))},Xr.prototype.interfaces_=function(){return[Oi]},Xr.prototype.getClass=function(){return Xr};var Ln=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Gt,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Ln.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ln.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Ln.prototype.getIntersectionSegments=function(){return this._intSegments},Ln.prototype.count=function(){return this._intersectionCount},Ln.prototype.getIntersections=function(){return this._intersections},Ln.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ln.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Ln.prototype.processIntersections=function(t,e,i,s){if(!this._findAllIntersections&&this.hasIntersection()||t===i&&e===s||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,s))return null;var l=t.getCoordinates()[e],d=t.getCoordinates()[e+1],_=i.getCoordinates()[s],E=i.getCoordinates()[s+1];this._li.computeIntersection(l,d,_,E),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=l,this._intSegments[1]=d,this._intSegments[2]=_,this._intSegments[3]=E,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ln.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Ln.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ln.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ln.prototype.interfaces_=function(){return[Ji]},Ln.prototype.getClass=function(){return Ln},Ln.createAllIntersectionsFinder=function(t){var e=new Ln(t);return e.setFindAllIntersections(!0),e},Ln.createAnyIntersectionFinder=function(t){return new Ln(t)},Ln.createIntersectionCounter=function(t){var e=new Ln(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new wt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ln(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new oa;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new bi(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+dt.toLineString(t[0],t[1])+" and "+dt.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var ni=function t(){this._nv=null,this._nv=new Ur(t.toSegmentStrings(arguments[0]))};ni.prototype.checkValid=function(){this._nv.checkValid()},ni.prototype.interfaces_=function(){return[]},ni.prototype.getClass=function(){return ni},ni.toSegmentStrings=function(t){for(var e=new Gt,i=t.iterator();i.hasNext();){var s=i.next();e.add(new Xr(s.getCoordinates(),s))}return e},ni.checkValid=function(t){new ni(t).checkValid()};var ri=function(t){this._mapOp=t};ri.prototype.map=function(t){for(var e=new Gt,i=0;i<t.getNumGeometries();i++){var s=this._mapOp.map(t.getGeometryN(i));s.isEmpty()||e.add(s)}return t.getFactory().createGeometryCollection(we.toGeometryArray(e))},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri},ri.map=function(t,e){return new ri(e).map(t)};var ii=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Gt,this._resultLineList=new Gt;var e=arguments[1],i=arguments[2];this._op=arguments[0],this._geometryFactory=e,this._ptLocator=i};ii.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},ii.prototype.labelIsolatedLine=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)},ii.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},ii.prototype.collectLineEdge=function(t,e,i){var s=t.getLabel(),l=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ye.isResultOfOp(s,e)||l.isCovered()||(i.add(l),t.setVisitedEdge(!0)))},ii.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),s=i.getEdge();if(i.isLineEdge()&&!s.isCoveredSet()){var l=this._op.isCoveredByA(i.getCoordinate());s.setCovered(l)}}},ii.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),s=i.getLabel();i.isIsolated()&&(s.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},ii.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var i=e.next(),s=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(s),i.setInResult(!0)}},ii.prototype.collectBoundaryTouchEdge=function(t,e,i){var s=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(P.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ye.isResultOfOp(s,e)&&e===ye.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii};var Ro=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Gt;var e=arguments[1];this._op=arguments[0],this._geometryFactory=e};Ro.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var i=this._geometryFactory.createPoint(e);this._resultPointList.add(i)}},Ro.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==ye.INTERSECTION)){var s=i.getLabel();ye.isResultOfOp(s,t)&&this.filterCoveredNodeToPoint(i)}}},Ro.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro};var xr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};xr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},xr.prototype.transformPolygon=function(t,e){var i=!0,s=this.transformLinearRing(t.getExteriorRing(),t);null!==s&&s instanceof Si&&!s.isEmpty()||(i=!1);for(var l=new Gt,d=0;d<t.getNumInteriorRing();d++){var _=this.transformLinearRing(t.getInteriorRingN(d),t);null===_||_.isEmpty()||(_ instanceof Si||(i=!1),l.add(_))}if(i)return this._factory.createPolygon(s,l.toArray([]));var E=new Gt;return null!==s&&E.add(s),E.addAll(l),this._factory.buildGeometry(E)},xr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},xr.prototype.getInputGeometry=function(){return this._inputGeom},xr.prototype.transformMultiLineString=function(t,e){for(var i=new Gt,s=0;s<t.getNumGeometries();s++){var l=this.transformLineString(t.getGeometryN(s),t);null!==l&&(l.isEmpty()||i.add(l))}return this._factory.buildGeometry(i)},xr.prototype.transformCoordinates=function(t,e){return this.copy(t)},xr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},xr.prototype.transformMultiPoint=function(t,e){for(var i=new Gt,s=0;s<t.getNumGeometries();s++){var l=this.transformPoint(t.getGeometryN(s),t);null!==l&&(l.isEmpty()||i.add(l))}return this._factory.buildGeometry(i)},xr.prototype.transformMultiPolygon=function(t,e){for(var i=new Gt,s=0;s<t.getNumGeometries();s++){var l=this.transformPolygon(t.getGeometryN(s),t);null!==l&&(l.isEmpty()||i.add(l))}return this._factory.buildGeometry(i)},xr.prototype.copy=function(t){return t.copy()},xr.prototype.transformGeometryCollection=function(t,e){for(var i=new Gt,s=0;s<t.getNumGeometries();s++){var l=this.transform(t.getGeometryN(s));null!==l&&(this._pruneEmptyGeometry&&l.isEmpty()||i.add(l))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(we.toGeometryArray(i)):this._factory.buildGeometry(i)},xr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Ir)return this.transformPoint(t,null);if(t instanceof Wi)return this.transformMultiPoint(t,null);if(t instanceof Si)return this.transformLinearRing(t,null);if(t instanceof dn)return this.transformLineString(t,null);if(t instanceof Yi)return this.transformMultiLineString(t,null);if(t instanceof An)return this.transformPolygon(t,null);if(t instanceof Ni)return this.transformMultiPolygon(t,null);if(t instanceof zn)return this.transformGeometryCollection(t,null);throw new L("Unknown Geometry subtype: "+t.getClass().getName())},xr.prototype.transformLinearRing=function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);var s=i.size();return s>0&&s<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var oi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ne,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof dn&&"number"==typeof arguments[1]){var i=arguments[1];t.call(this,arguments[0].getCoordinates(),i)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1];this._srcPts=s,this._isClosed=t.isClosed(s),this._snapTolerance=l}};oi.prototype.snapVertices=function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),s=0;s<i;s++){var l=t.get(s),d=this.findSnapForVertex(l,e);null!==d&&(t.set(s,new w(d)),0===s&&this._isClosed&&t.set(t.size()-1,new w(d)))}},oi.prototype.findSnapForVertex=function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null},oi.prototype.snapTo=function(t){var e=new Tr(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},oi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(var s=0;s<i;s++){var l=e[s],d=this.findSegmentIndexToSnap(l,t);d>=0&&t.add(d+1,new w(l),!1)}},oi.prototype.findSegmentIndexToSnap=function(t,e){for(var i=M.MAX_VALUE,s=-1,l=0;l<e.size()-1;l++){if(this._seg.p0=e.get(l),this._seg.p1=e.get(l+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var d=this._seg.distance(t);d<this._snapTolerance&&d<i&&(i=d,s=l)}return s},oi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Pn=function(t){this._srcGeom=t||null},Ao={SNAP_PRECISION_FACTOR:{configurable:!0}};Pn.prototype.snapTo=function(t,e){var i=this.extractTargetCoordinates(t);return new Os(e,i).transform(this._srcGeom)},Pn.prototype.snapToSelf=function(t,e){var i=this.extractTargetCoordinates(this._srcGeom),s=new Os(t,i,!0).transform(this._srcGeom),l=s;return e&&Pt(l,Hi)&&(l=s.buffer(0)),l},Pn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Pn.prototype.extractTargetCoordinates=function(t){for(var e=new yt,i=t.getCoordinates(),s=0;s<i.length;s++)e.add(i[s]);return e.toArray(new Array(0).fill(null))},Pn.prototype.computeMinimumSegmentLength=function(t){for(var e=M.MAX_VALUE,i=0;i<t.length-1;i++){var s=t[i].distance(t[i+1]);s<e&&(e=s)}return e},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.snap=function(t,e,i){var s=new Array(2).fill(null),l=new Pn(t);s[0]=l.snapTo(e,i);var d=new Pn(e);return s[1]=d.snapTo(s[0],i),s},Pn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Pn.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===Qe.FIXED){var s=1/i.getScale()*2/1.415;s>e&&(e=s)}return e}if(2===arguments.length){var d=arguments[1];return Math.min(Pn.computeOverlaySnapTolerance(arguments[0]),Pn.computeOverlaySnapTolerance(d))}},Pn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Pn.SNAP_PRECISION_FACTOR},Pn.snapToSelf=function(t,e,i){return new Pn(t).snapToSelf(e,i)},Ao.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Pn,Ao);var Os=function(t){function e(i,s,l){t.call(this),this._snapTolerance=i||null,this._snapPts=s||null,this._isSelfSnap=void 0!==l&&l}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(i,s){var l=new oi(i,this._snapTolerance);return l.setAllowSnappingToSourceVertices(this._isSelfSnap),l.snapTo(s)},e.prototype.transformCoordinates=function(i,s){var l=i.toCoordinateArray(),d=this.snapLine(l,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(d)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xr),Jn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Jn.prototype.getCommon=function(){return M.longBitsToDouble(this._commonBits)},Jn.prototype.add=function(t){var e=M.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Jn.signExpBits(this._commonBits),this._isFirst=!1,null):Jn.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Jn.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Jn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Jn.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=M.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+M.toBinaryString(t),s=i.substring(i.length-64);return s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]"}},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.getBit=function(t,e){return t&1<<e?1:0},Jn.signExpBits=function(t){return t>>52},Jn.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Jn.numCommonMostSigMantissaBits=function(t,e){for(var i=0,s=52;s>=0;s--){if(Jn.getBit(t,s)!==Jn.getBit(e,s))return i;i++}return 52};var _i=function(){this._commonCoord=null,this._ccFilter=new To},la={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};_i.prototype.addCommonBits=function(t){var e=new Qi(this._commonCoord);t.apply(e),t.geometryChanged()},_i.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new w(this._commonCoord);e.x=-e.x,e.y=-e.y;var i=new Qi(e);return t.apply(i),t.geometryChanged(),t},_i.prototype.getCommonCoordinate=function(){return this._commonCoord},_i.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i},la.CommonCoordinateFilter.get=function(){return To},la.Translater.get=function(){return Qi},Object.defineProperties(_i,la);var To=function(){this._commonBitsX=new Jn,this._commonBitsY=new Jn};To.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},To.prototype.getCommonCoordinate=function(){return new w(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},To.prototype.interfaces_=function(){return[$t]},To.prototype.getClass=function(){return To};var Qi=function(){this.trans=null,this.trans=arguments[0]};Qi.prototype.filter=function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,s=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,s)},Qi.prototype.isDone=function(){return!1},Qi.prototype.isGeometryChanged=function(){return!0},Qi.prototype.interfaces_=function(){return[Vr]},Qi.prototype.getClass=function(){return Qi};var Bn=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Bn.prototype.selfSnap=function(t){return new Pn(t).snapTo(t,this._snapTolerance)},Bn.prototype.removeCommonBits=function(t){this._cbr=new _i,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Bn.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Bn.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),i=ye.overlayOp(e[0],e[1],t);return this.prepareResult(i)},Bn.prototype.checkValid=function(t){t.isValid()||ee.out.println("Snapped geometry is invalid")},Bn.prototype.computeSnapTolerance=function(){this._snapTolerance=Pn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Bn.prototype.snap=function(t){var e=this.removeCommonBits(t);return Pn.snap(e[0],e[1],this._snapTolerance)},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.overlayOp=function(t,e,i){return new Bn(t,e).getResultGeometry(i)},Bn.union=function(t,e){return Bn.overlayOp(t,e,ye.UNION)},Bn.intersection=function(t,e){return Bn.overlayOp(t,e,ye.INTERSECTION)},Bn.symDifference=function(t,e){return Bn.overlayOp(t,e,ye.SYMDIFFERENCE)},Bn.difference=function(t,e){return Bn.overlayOp(t,e,ye.DIFFERENCE)};var $n=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};$n.prototype.getResultGeometry=function(t){var e=null,i=!1,s=null;try{e=ye.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(l){if(!(l instanceof R))throw l;s=l}if(!i)try{e=Bn.overlayOp(this._geom[0],this._geom[1],t)}catch(l){throw l instanceof R?s:l}return e},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.overlayOp=function(t,e,i){return new $n(t,e).getResultGeometry(i)},$n.union=function(t,e){return $n.overlayOp(t,e,ye.UNION)},$n.intersection=function(t,e){return $n.overlayOp(t,e,ye.INTERSECTION)},$n.symDifference=function(t,e){return $n.overlayOp(t,e,ye.SYMDIFFERENCE)},$n.difference=function(t,e){return $n.overlayOp(t,e,ye.DIFFERENCE)};var Do=function(){this.mce=null,this.chainIndex=null;var e=arguments[1];this.mce=arguments[0],this.chainIndex=e};Do.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do};var ur=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],i=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=i}else if(3===arguments.length){var s=arguments[0],l=arguments[1],d=arguments[2];this._eventType=t.INSERT,this._label=s,this._xValue=l,this._obj=d}},fa={INSERT:{configurable:!0},DELETE:{configurable:!0}};ur.prototype.isDelete=function(){return this._eventType===ur.DELETE},ur.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ur.prototype.getObject=function(){return this._obj},ur.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},ur.prototype.getInsertEvent=function(){return this._insertEvent},ur.prototype.isInsert=function(){return this._eventType===ur.INSERT},ur.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ur.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ur.prototype.interfaces_=function(){return[C]},ur.prototype.getClass=function(){return ur},fa.INSERT.get=function(){return 1},fa.DELETE.get=function(){return 2},Object.defineProperties(ur,fa);var Rs=function(){};Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs};var Un=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[1],i=arguments[2];this._li=arguments[0],this._includeProper=e,this._recordIsolated=i};Un.prototype.isTrivialIntersection=function(t,e,i,s){if(t===i&&1===this._li.getIntersectionNum()){if(Un.isAdjacentSegments(e,s))return!0;if(t.isClosed()){var l=t.getNumPoints()-1;if(0===e&&s===l||0===s&&e===l)return!0}}return!1},Un.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Un.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Un.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Un.prototype.isBoundaryPointInternal=function(t,e){for(var i=e.iterator();i.hasNext();){var s=i.next().getCoordinate();if(t.isIntersection(s))return!0}return!1},Un.prototype.hasProperIntersection=function(){return this._hasProper},Un.prototype.hasIntersection=function(){return this._hasIntersection},Un.prototype.isDone=function(){return this._isDone},Un.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Un.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Un.prototype.addIntersections=function(t,e,i,s){if(t===i&&e===s)return null;this.numTests++;var l=t.getCoordinates()[e],d=t.getCoordinates()[e+1],_=i.getCoordinates()[s],E=i.getCoordinates()[s+1];this._li.computeIntersection(l,d,_,E),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,s)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,s,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pl=function(t){function e(){t.call(this),this.events=new Gt,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){Jr.sort(this.events);for(var i=0;i<this.events.size();i++){var s=this.events.get(i);s.isDelete()&&s.getInsertEvent().setDeleteEventIndex(i)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var s=0;s<this.events.size();s++){var l=this.events.get(s);if(l.isInsert()&&this.processOverlaps(s,l.getDeleteEventIndex(),l,i),i.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Un&&Pt(arguments[0],qn)&&Pt(arguments[1],qn)){var d=arguments[0],_=arguments[1],E=arguments[2];this.addEdges(d,d),this.addEdges(_,_),this.computeIntersections(E)}else if("boolean"==typeof arguments[2]&&Pt(arguments[0],qn)&&arguments[1]instanceof Un){var B=arguments[0],nt=arguments[1];arguments[2]?this.addEdges(B,null):this.addEdges(B),this.computeIntersections(nt)}},e.prototype.addEdge=function(i,s){for(var l=i.getMonotoneChainEdge(),d=l.getStartIndexes(),_=0;_<d.length-1;_++){var E=new Do(l,_),B=new ur(s,l.getMinX(_),E);this.events.add(B),this.events.add(new ur(l.getMaxX(_),B))}},e.prototype.processOverlaps=function(i,s,l,d){for(var _=l.getObject(),E=i;E<s;E++){var B=this.events.get(E);if(B.isInsert()){var nt=B.getObject();l.isSameLabel(B)||(_.computeIntersections(nt,d),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var i=arguments[0].iterator();i.hasNext();){var s=i.next();this.addEdge(s,s)}else if(2===arguments.length)for(var d=arguments[1],_=arguments[0].iterator();_.hasNext();){var E=_.next();this.addEdge(E,d)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rs),xi=function(){this._min=M.POSITIVE_INFINITY,this._max=M.NEGATIVE_INFINITY},ca={NodeComparator:{configurable:!0}};xi.prototype.getMin=function(){return this._min},xi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},xi.prototype.getMax=function(){return this._max},xi.prototype.toString=function(){return dt.toLineString(new w(this._min,0),new w(this._max,0))},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},ca.NodeComparator.get=function(){return Fo},Object.defineProperties(xi,ca);var Fo=function(){};Fo.prototype.compare=function(t,e){var l=(t._min+t._max)/2,d=(e._min+e._max)/2;return l<d?-1:l>d?1:0},Fo.prototype.interfaces_=function(){return[G]},Fo.prototype.getClass=function(){return Fo};var gl=function(t){function e(){t.call(this),this._item=null;var s=arguments[1],l=arguments[2];this._min=arguments[0],this._max=s,this._item=l}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(i,s,l){if(!this.intersects(i,s))return null;l.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xi),ha=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var s=arguments[1];this._node1=arguments[0],this._node2=s,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(i,s){this._min=Math.min(i._min,s._min),this._max=Math.max(i._max,s._max)},e.prototype.query=function(i,s,l){if(!this.intersects(i,s))return null;null!==this._node1&&this._node1.query(i,s,l),null!==this._node2&&this._node2.query(i,s,l)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xi),si=function(){this._leaves=new Gt,this._root=null,this._level=0};si.prototype.buildTree=function(){Jr.sort(this._leaves,new xi.NodeComparator);for(var t=this._leaves,e=null,i=new Gt;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}},si.prototype.insert=function(t,e,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gl(t,e,i))},si.prototype.query=function(t,e,i){this.init(),this._root.query(t,e,i)},si.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},si.prototype.printNode=function(t){ee.out.println(dt.toLineString(new w(t._min,this._level),new w(t._max,this._level)))},si.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},si.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var i=0;i<t.size();i+=2){var s=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(s);else{var l=new ha(t.get(i),t.get(i+1));e.add(l)}}},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si};var Bo=function(){this._items=new Gt};Bo.prototype.visitItem=function(t){this._items.add(t)},Bo.prototype.getItems=function(){return this._items},Bo.prototype.interfaces_=function(){return[qi]},Bo.prototype.getClass=function(){return Bo};var Vo=function(){this._index=null;var t=arguments[0];if(!Pt(t,Hi))throw new L("Argument must be Polygonal");this._index=new mo(t)},pa={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Vo.prototype.locate=function(t){var e=new Ft(t),i=new vo(e);return this._index.query(t.y,t.y,i),e.getLocation()},Vo.prototype.interfaces_=function(){return[Vi]},Vo.prototype.getClass=function(){return Vo},pa.SegmentVisitor.get=function(){return vo},pa.IntervalIndexedGeometry.get=function(){return mo},Object.defineProperties(Vo,pa);var vo=function(){this._counter=null,this._counter=arguments[0]};vo.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},vo.prototype.interfaces_=function(){return[qi]},vo.prototype.getClass=function(){return vo};var mo=function(){this._index=new si,this.init(arguments[0])};mo.prototype.init=function(t){for(var e=Vn.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates();this.addLine(i)}},mo.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var i=new ne(t[e-1],t[e]),s=Math.min(i.p0.y,i.p1.y),l=Math.max(i.p0.y,i.p1.y);this._index.insert(s,l,i)}},mo.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new Bo;return this._index.query(t,e,i),i.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo};var hs=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Qs,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ei,2===arguments.length){var s=arguments[1],l=Ke.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=s,this._boundaryNodeRule=l,null!==s&&this.add(s)}else if(3===arguments.length){var _=arguments[1],E=arguments[2];this._argIndex=arguments[0],this._parentGeom=_,this._boundaryNodeRule=E,null!==_&&this.add(_)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(i,s){var l=this._nodes.addNode(s).getLabel(),d=1;l.getLocation(i,kt.ON)===A.BOUNDARY&&d++;var _=e.determineBoundary(this._boundaryNodeRule,d);l.setLocation(i,_)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var d=arguments[1],_=arguments[2],E=new Un(arguments[0],!0,!1);return E.setIsDoneIfProperInt(_),this.createEdgeSetIntersector().computeIntersections(this._edges,E,d||!(this._parentGeom instanceof Si||this._parentGeom instanceof An||this._parentGeom instanceof Ni)),this.addSelfIntersectionNodes(this._argIndex),E}},e.prototype.computeSplitEdges=function(i){for(var s=this._edges.iterator();s.hasNext();)s.next().eiList.addSplitEdges(i)},e.prototype.computeEdgeIntersections=function(i,s,l){var d=new Un(s,l,!0);return d.setBoundaryNodes(this.getBoundaryNodes(),i.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,i._edges,d),d},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Ir){var i=arguments[0].getCoordinate();this.insertPoint(this._argIndex,i,A.INTERIOR)}else arguments[0]instanceof w&&this.insertPoint(this._argIndex,arguments[0],A.INTERIOR)},e.prototype.addPolygon=function(i){this.addPolygonRing(i.getExteriorRing(),A.EXTERIOR,A.INTERIOR);for(var s=0;s<i.getNumInteriorRing();s++){var l=i.getInteriorRingN(s);this.addPolygonRing(l,A.INTERIOR,A.EXTERIOR)}},e.prototype.addEdge=function(i){this.insertEdge(i);var s=i.getCoordinates();this.insertPoint(this._argIndex,s[0],A.BOUNDARY),this.insertPoint(this._argIndex,s[s.length-1],A.BOUNDARY)},e.prototype.addLineString=function(i){var s=_e.removeRepeatedPoints(i.getCoordinates());if(s.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=s[0],null;var l=new Wo(s,new tn(this._argIndex,A.INTERIOR));this._lineEdgeMap.put(i,l),this.insertEdge(l),P.isTrue(s.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,s[0]),this.insertBoundaryPoint(this._argIndex,s[s.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var i=this.getBoundaryNodes(),s=new Array(i.size()).fill(null),l=0,d=i.iterator();d.hasNext();){var _=d.next();s[l++]=_.getCoordinate().copy()}return s},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(i,s,l){if(this.isBoundaryNode(i,s))return null;l===A.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(i,s):this.insertPoint(i,s,l)},e.prototype.addPolygonRing=function(i,s,l){if(i.isEmpty())return null;var d=_e.removeRepeatedPoints(i.getCoordinates());if(d.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=d[0],null;var _=s,E=l;bt.isCCW(d)&&(_=l,E=s);var B=new Wo(d,new tn(this._argIndex,A.BOUNDARY,_,E));this._lineEdgeMap.put(i,B),this.insertEdge(B),this.insertPoint(this._argIndex,d[0],A.BOUNDARY)},e.prototype.insertPoint=function(i,s,l){var d=this._nodes.addNode(s),_=d.getLabel();null===_?d._label=new tn(i,l):_.setLocation(i,l)},e.prototype.createEdgeSetIntersector=function(){return new pl},e.prototype.addSelfIntersectionNodes=function(i){for(var s=this._edges.iterator();s.hasNext();)for(var l=s.next(),d=l.getLabel().getLocation(i),_=l.eiList.iterator();_.hasNext();){var E=_.next();this.addSelfIntersectionNode(i,E.coord,d)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var i=arguments[0];if(i.isEmpty())return null;if(i instanceof Ni&&(this._useBoundaryDeterminationRule=!1),i instanceof An)this.addPolygon(i);else if(i instanceof dn)this.addLineString(i);else if(i instanceof Ir)this.addPoint(i);else if(i instanceof Wi)this.addCollection(i);else if(i instanceof Yi)this.addCollection(i);else if(i instanceof Ni)this.addCollection(i);else{if(!(i instanceof zn))throw new Error(i.getClass().getName());this.addCollection(i)}},e.prototype.addCollection=function(i){for(var s=0;s<i.getNumGeometries();s++){var l=i.getGeometryN(s);this.add(l)}},e.prototype.locate=function(i){return Pt(this._parentGeom,Hi)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Vo(this._parentGeom)),this._areaPtLocator.locate(i)):this._ptLocator.locate(i,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(i,s){return i.isInBoundary(s)?A.BOUNDARY:A.INTERIOR},e}(wn),to=function(){if(this._li=new wt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new hs(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],s=Ke.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new hs(0,e,s),this._arg[1]=new hs(1,i,s)}else if(3===arguments.length){var l=arguments[0],d=arguments[1],_=arguments[2];l.getPrecisionModel().compareTo(d.getPrecisionModel())>=0?this.setComputationPrecision(l.getPrecisionModel()):this.setComputationPrecision(d.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new hs(0,l,_),this._arg[1]=new hs(1,d,_)}};to.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},to.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to};var _o=function(){};_o.prototype.interfaces_=function(){return[]},_o.prototype.getClass=function(){return _o},_o.map=function(){if(arguments[0]instanceof zt&&Pt(arguments[1],_o.MapOp)){for(var t=arguments[0],e=arguments[1],i=new Gt,s=0;s<t.getNumGeometries();s++){var l=e.map(t.getGeometryN(s));null!==l&&i.add(l)}return t.getFactory().buildGeometry(i)}if(Pt(arguments[0],gn)&&Pt(arguments[1],_o.MapOp)){for(var d=arguments[0],_=arguments[1],E=new Gt,B=d.iterator();B.hasNext();){var nt=B.next(),Et=_.map(nt);null!==Et&&E.add(Et)}return E}},_o.MapOp=function(){};var ye=function(t){function e(){var i=arguments[0];t.call(this,i,arguments[1]),this._ptLocator=new ei,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Kr,this._resultPolyList=new Gt,this._resultLineList=new Gt,this._resultPointList=new Gt,this._graph=new wn(new iu),this._geomFact=i.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(i){var s=this._edgeList.findEqualEdge(i);if(null!==s){var l=s.getLabel(),d=i.getLabel();s.isPointwiseEqual(i)||(d=new tn(i.getLabel())).flip();var _=s.getDepth();_.isNull()&&_.add(l),_.add(d),l.merge(d)}else this._edgeList.add(i)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var s=i.next(),l=s.getSym();s.isInResult()&&l.isInResult()&&(s.setInResult(!1),l.setInResult(!1))}},e.prototype.isCoveredByLA=function(i){return!!this.isCovered(i,this._resultLineList)||!!this.isCovered(i,this._resultPolyList)},e.prototype.computeGeometry=function(i,s,l,d){var _=new Gt;return _.addAll(i),_.addAll(s),_.addAll(l),_.isEmpty()?e.createEmptyResult(d,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(_)},e.prototype.mergeSymLabels=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();)i.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(i,s){for(var l=s.iterator();l.hasNext();){var d=l.next();if(this._ptLocator.locate(i,d)!==A.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var i=new Gt,s=this._edgeList.iterator();s.hasNext();){var l=s.next();l.isCollapsed()&&(s.remove(),i.add(l.getCollapsedEdge()))}this._edgeList.addAll(i)},e.prototype.updateNodeLabelling=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();){var s=i.next(),l=s.getEdges().getLabel();s.getLabel().merge(l)}},e.prototype.getResultGeometry=function(i){return this.computeOverlay(i),this._resultGeom},e.prototype.insertUniqueEdges=function(i){for(var s=i.iterator();s.hasNext();){var l=s.next();this.insertUniqueEdge(l)}},e.prototype.computeOverlay=function(i){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var s=new Gt;this._arg[0].computeSplitEdges(s),this._arg[1].computeSplitEdges(s),this.insertUniqueEdges(s),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ni.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(i),this.cancelDuplicateResultEdges();var l=new dr(this._geomFact);l.add(this._graph),this._resultPolyList=l.getPolygons();var d=new ii(this,this._geomFact,this._ptLocator);this._resultLineList=d.build(i);var _=new Ro(this,this._geomFact,this._ptLocator);this._resultPointList=_.build(i),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,i)},e.prototype.labelIncompleteNode=function(i,s){var l=this._ptLocator.locate(i.getCoordinate(),this._arg[s].getGeometry());i.getLabel().setLocation(s,l)},e.prototype.copyPoints=function(i){for(var s=this._arg[i].getNodeIterator();s.hasNext();){var l=s.next();this._graph.addNode(l.getCoordinate()).setLabel(i,l.getLabel().getLocation(i))}},e.prototype.findResultAreaEdges=function(i){for(var s=this._graph.getEdgeEnds().iterator();s.hasNext();){var l=s.next(),d=l.getLabel();d.isArea()&&!l.isInteriorAreaEdge()&&e.isResultOfOp(d.getLocation(0,kt.RIGHT),d.getLocation(1,kt.RIGHT),i)&&l.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var i=this._edgeList.iterator();i.hasNext();){var s=i.next(),l=s.getLabel(),d=s.getDepth();if(!d.isNull()){d.normalize();for(var _=0;_<2;_++)l.isNull(_)||!l.isArea()||d.isNull(_)||(0===d.getDelta(_)?l.toLine(_):(P.isTrue(!d.isNull(_,kt.LEFT),"depth of LEFT side has not been initialized"),l.setLocation(_,kt.LEFT,d.getLocation(_,kt.LEFT)),P.isTrue(!d.isNull(_,kt.RIGHT),"depth of RIGHT side has not been initialized"),l.setLocation(_,kt.RIGHT,d.getLocation(_,kt.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();)i.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var i=this._graph.getNodes().iterator();i.hasNext();){var s=i.next(),l=s.getLabel();s.isIsolated()&&(l.isNull(0)?this.labelIncompleteNode(s,0):this.labelIncompleteNode(s,1)),s.getEdges().updateLabelling(l)}},e.prototype.isCoveredByA=function(i){return!!this.isCovered(i,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(to);ye.overlayOp=function(t,e,i){return new ye(t,e).getResultGeometry(i)},ye.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ye.createEmptyResult(ye.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return ri.map(t,{interfaces_:function(){return[_o.MapOp]},map:function(s){return s.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),$n.overlayOp(t,e,ye.INTERSECTION)},ye.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ye.createEmptyResult(ye.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),$n.overlayOp(t,e,ye.SYMDIFFERENCE)},ye.resultDimension=function(t,e,i){var s=e.getDimension(),l=i.getDimension(),d=-1;switch(t){case ye.INTERSECTION:d=Math.min(s,l);break;case ye.UNION:d=Math.max(s,l);break;case ye.DIFFERENCE:d=s;break;case ye.SYMDIFFERENCE:d=Math.max(s,l)}return d},ye.createEmptyResult=function(t,e,i,s){var l=null;switch(ye.resultDimension(t,e,i)){case-1:l=s.createGeometryCollection(new Array(0).fill(null));break;case 0:l=s.createPoint();break;case 1:l=s.createLineString();break;case 2:l=s.createPolygon()}return l},ye.difference=function(t,e){return t.isEmpty()?ye.createEmptyResult(ye.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),$n.overlayOp(t,e,ye.DIFFERENCE))},ye.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),s=t.getLocation(1);return ye.isResultOfOp(i,s,e)}if(3===arguments.length){var l=arguments[0],d=arguments[1];switch(l===A.BOUNDARY&&(l=A.INTERIOR),d===A.BOUNDARY&&(d=A.INTERIOR),arguments[2]){case ye.INTERSECTION:return l===A.INTERIOR&&d===A.INTERIOR;case ye.UNION:return l===A.INTERIOR||d===A.INTERIOR;case ye.DIFFERENCE:return l===A.INTERIOR&&d!==A.INTERIOR;case ye.SYMDIFFERENCE:return l===A.INTERIOR&&d!==A.INTERIOR||l!==A.INTERIOR&&d===A.INTERIOR}return!1}},ye.INTERSECTION=1,ye.UNION=2,ye.DIFFERENCE=3,ye.SYMDIFFERENCE=4;var Fi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new ei,this._seg=new ne;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Fi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var i=this._linework.getGeometryN(e).getCoordinateSequence(),s=0;s<i.size()-1;s++)if(i.getCoordinate(s,this._seg.p0),i.getCoordinate(s+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Fi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?A.BOUNDARY:this._ptLocator.locate(t,this._g)},Fi.prototype.extractLinework=function(t){var e=new jo;t.apply(e);var i=e.getLinework(),s=we.toLineStringArray(i);return t.getFactory().createMultiLineString(s)},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var jo=function(){this._linework=null,this._linework=new Gt};jo.prototype.getLinework=function(){return this._linework},jo.prototype.filter=function(t){if(t instanceof An){var e=t;this._linework.add(e.getExteriorRing());for(var i=0;i<e.getNumInteriorRing();i++)this._linework.add(e.getInteriorRingN(i))}},jo.prototype.interfaces_=function(){return[Zr]},jo.prototype.getClass=function(){return jo};var xo=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};xo.prototype.extractPoints=function(t,e,i){for(var s=t.getCoordinates(),l=0;l<s.length-1;l++)this.computeOffsetPoints(s[l],s[l+1],e,i)},xo.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},xo.prototype.getPoints=function(t){for(var e=new Gt,i=Vn.getLines(this._g).iterator();i.hasNext();){var s=i.next();this.extractPoints(s,t,e)}return e},xo.prototype.computeOffsetPoints=function(t,e,i,s){var l=e.x-t.x,d=e.y-t.y,_=Math.sqrt(l*l+d*d),E=i*l/_,B=i*d/_,nt=(e.x+t.x)/2,Et=(e.y+t.y)/2;if(this._doLeft){var St=new w(nt-B,Et+E);s.add(St)}if(this._doRight){var Xt=new w(nt+B,Et-E);s.add(Xt)}},xo.prototype.interfaces_=function(){return[]},xo.prototype.getClass=function(){return xo};var Er=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Gt;var e=arguments[0],i=arguments[1],s=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,i),this._geom=[e,i,s],this._locFinder=[new Fi(this._geom[0],this._boundaryDistanceTolerance),new Fi(this._geom[1],this._boundaryDistanceTolerance),new Fi(this._geom[2],this._boundaryDistanceTolerance)]},uu={TOLERANCE:{configurable:!0}};Er.prototype.reportResult=function(t,e,i){ee.out.println("Overlay result invalid - A:"+A.toLocationSymbol(e[0])+" B:"+A.toLocationSymbol(e[1])+" expected:"+(i?"i":"e")+" actual:"+A.toLocationSymbol(e[2]))},Er.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Er.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var i=this._testCoords.get(e);if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var s=arguments[0],l=arguments[1];return this._location[0]=this._locFinder[0].getLocation(l),this._location[1]=this._locFinder[1].getLocation(l),this._location[2]=this._locFinder[2].getLocation(l),!!Er.hasLocation(this._location,A.BOUNDARY)||this.isValidResult(s,this._location)}},Er.prototype.addTestPts=function(t){var e=new xo(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Er.prototype.isValidResult=function(t,e){var i=ye.isResultOfOp(e[0],e[1],t),s=!(i^e[2]===A.INTERIOR);return s||this.reportResult(t,e,i),s},Er.prototype.getInvalidLocation=function(){return this._invalidLocation},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er},Er.hasLocation=function(t,e){for(var i=0;i<3;i++)if(t[i]===e)return!0;return!1},Er.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Pn.computeSizeBasedSnapTolerance(t),Pn.computeSizeBasedSnapTolerance(e))},Er.isValid=function(t,e,i,s){return new Er(t,e,s).isValid(i)},uu.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Er,uu);var Or=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Or.prototype.extractElements=function(t,e){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var s=t.getGeometryN(i);this._skipEmpty&&s.isEmpty()||e.add(s)}},Or.prototype.combine=function(){for(var t=new Gt,e=this._inputGeoms.iterator();e.hasNext();){var i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.combine=function(){return 1===arguments.length?new Or(arguments[0]).combine():2===arguments.length?new Or(Or.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Or(Or.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Or.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Or.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new Gt;return i.add(t),i.add(e),i}if(3===arguments.length){var s=arguments[0],l=arguments[1],d=arguments[2],_=new Gt;return _.add(s),_.add(l),_.add(d),_}};var On=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new Gt)},lu={STRTREE_NODE_CAPACITY:{configurable:!0}};On.prototype.reduceToGeometries=function(t){for(var e=new Gt,i=t.iterator();i.hasNext();){var s=i.next(),l=null;Pt(s,qn)?l=this.unionTree(s):s instanceof zt&&(l=s),e.add(l)}return e},On.prototype.extractByEnvelope=function(t,e,i){for(var s=new Gt,l=0;l<e.getNumGeometries();l++){var d=e.getGeometryN(l);d.getEnvelopeInternal().intersects(t)?s.add(d):i.add(d)}return this._geomFactory.buildGeometry(s)},On.prototype.unionOptimized=function(t,e){var i=t.getEnvelopeInternal(),s=e.getEnvelopeInternal();if(!i.intersects(s))return Or.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var l=i.intersection(s);return this.unionUsingEnvelopeIntersection(t,e,l)},On.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ka(On.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var i=e.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var s=t.itemsTree();return this.unionTree(s)},On.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],s=arguments[2];if(s-i<=1){var l=On.getGeometry(e,i);return this.unionSafe(l,null)}if(s-i==2)return this.unionSafe(On.getGeometry(e,i),On.getGeometry(e,i+1));var d=Math.trunc((s+i)/2),_=this.binaryUnion(e,i,d),E=this.binaryUnion(e,d,s);return this.unionSafe(_,E)}},On.prototype.repeatedUnion=function(t){for(var e=null,i=t.iterator();i.hasNext();){var s=i.next();e=null===e?s.copy():e.union(s)}return e},On.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},On.prototype.unionActual=function(t,e){return On.restrictToPolygons(t.union(e))},On.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},On.prototype.unionUsingEnvelopeIntersection=function(t,e,i){var s=new Gt,l=this.extractByEnvelope(i,t,s),d=this.extractByEnvelope(i,e,s),_=this.unionActual(l,d);return s.add(_),Or.combine(s)},On.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().createGeometryCollection([e,i]).buffer(0)}},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.restrictToPolygons=function(t){if(Pt(t,Hi))return t;var e=vi.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(we.toPolygonArray(e))},On.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},On.union=function(t){return new On(t).union()},lu.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(On,lu);var ps=function(){};ps.prototype.interfaces_=function(){return[]},ps.prototype.getClass=function(){return ps},ps.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ye.createEmptyResult(ye.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),$n.overlayOp(t,e,ye.UNION)},W.GeoJSONReader=na,W.GeoJSONWriter=ra,W.OverlayOp=ye,W.UnionOp=ps,W.BufferOp=Zn,Object.defineProperty(W,"__esModule",{value:!0})}(gt)}}]);